import{a as N,b as W,c as L,d as ni,e as aw}from"./chunk-CLPC5DQS.js";function df(n,e){return Object.is(n,e)}var st=null,Jc=!1,hf=1,Xt=Symbol("SIGNAL");function ce(n){let e=st;return st=n,e}function ff(){return st}var Zi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ks(n){if(Jc)throw new Error("");if(st===null)return;st.consumerOnSignalRead(n);let e=st.nextProducerIndex++;if(rl(st),e<st.producerNode.length&&st.producerNode[e]!==n&&Ws(st)){let t=st.producerNode[e];nl(t,st.producerIndexOfThis[e])}st.producerNode[e]!==n&&(st.producerNode[e]=n,st.producerIndexOfThis[e]=Ws(st)?lw(n,st,e):0),st.producerLastReadVersion[e]=n.version}function cw(){hf++}function pf(n){if(!(Ws(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hf)){if(!n.producerMustRecompute(n)&&!tl(n)){uf(n);return}n.producerRecomputeValue(n),uf(n)}}function mf(n){if(n.liveConsumerNode===void 0)return;let e=Jc;Jc=!0;try{for(let t of n.liveConsumerNode)t.dirty||CD(t)}finally{Jc=e}}function gf(){return st?.consumerAllowSignalWrites!==!1}function CD(n){n.dirty=!0,mf(n),n.consumerMarkedDirty?.(n)}function uf(n){n.dirty=!1,n.lastCleanEpoch=hf}function Qs(n){return n&&(n.nextProducerIndex=0),ce(n)}function el(n,e){if(ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ws(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)nl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function tl(n){rl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(pf(t),r!==t.version))return!0}return!1}function Ys(n){if(rl(n),Ws(n))for(let e=0;e<n.producerNode.length;e++)nl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function lw(n,e,t){if(uw(n),n.liveConsumerNode.length===0&&dw(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=lw(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function nl(n,e){if(uw(n),n.liveConsumerNode.length===1&&dw(n))for(let r=0;r<n.producerNode.length;r++)nl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];rl(i),i.producerIndexOfThis[r]=e}}function Ws(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function rl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function uw(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function dw(n){return n.producerNode!==void 0}function yf(n,e){let t=Object.create(ED);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(pf(t),Ks(t),t.value===Xc)throw t.error;return t.value};return r[Xt]=t,r}var cf=Symbol("UNSET"),lf=Symbol("COMPUTING"),Xc=Symbol("ERRORED"),ED=W(N({},Zi),{value:cf,dirty:!0,error:null,equal:df,kind:"computed",producerMustRecompute(n){return n.value===cf||n.value===lf},producerRecomputeValue(n){if(n.value===lf)throw new Error("Detected cycle in computations.");let e=n.value;n.value=lf;let t=Qs(n),r,i=!1;try{r=n.computation(),ce(null),i=e!==cf&&e!==Xc&&r!==Xc&&n.equal(e,r)}catch(o){r=Xc,n.error=o}finally{el(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function ID(){throw new Error}var hw=ID;function fw(n){hw(n)}function vf(n){hw=n}var TD=null;function _f(n,e){let t=Object.create(il);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Ks(t),t.value);return r[Xt]=t,r}function Zs(n,e){gf()||fw(n),n.equal(n.value,e)||(n.value=e,SD(n))}function wf(n,e){gf()||fw(n),Zs(n,e(n.value))}var il=W(N({},Zi),{equal:df,value:void 0,kind:"signal"});function SD(n){n.version++,cw(),mf(n),TD?.()}function bf(n){let e=ce(null);try{return n()}finally{ce(e)}}var Cf;function Js(){return Cf}function Zn(n){let e=Cf;return Cf=n,e}var ol=Symbol("NotFound");function se(n){return typeof n=="function"}function Ji(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var sl=Ji(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Xs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ye=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof sl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{pw(o)}catch(s){e=e??[],s instanceof sl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new sl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Xs(t,e)}remove(e){let{_finalizers:t}=this;t&&Xs(t,e),e instanceof n&&e._removeParent(this)}};Ye.EMPTY=(()=>{let n=new Ye;return n.closed=!0,n})();var Ef=Ye.EMPTY;function al(n){return n instanceof Ye||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function pw(n){se(n)?n():n.unsubscribe()}var hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xi={setTimeout(n,e,...t){let{delegate:r}=Xi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Xi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function cl(n){Xi.setTimeout(()=>{let{onUnhandledError:e}=hn;if(e)e(n);else throw n})}function ea(){}var mw=If("C",void 0,void 0);function gw(n){return If("E",void 0,n)}function yw(n){return If("N",n,void 0)}function If(n,e,t){return{kind:n,value:e,error:t}}var ri=null;function eo(n){if(hn.useDeprecatedSynchronousErrorHandling){let e=!ri;if(e&&(ri={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ri;if(ri=null,t)throw r}}else n()}function vw(n){hn.useDeprecatedSynchronousErrorHandling&&ri&&(ri.errorThrown=!0,ri.error=n)}var ii=class extends Ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,al(e)&&e.add(this)):this.destination=PD}static create(e,t,r){return new to(e,t,r)}next(e){this.isStopped?Sf(yw(e),this):this._next(e)}error(e){this.isStopped?Sf(gw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sf(mw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AD=Function.prototype.bind;function Tf(n,e){return AD.call(n,e)}var xf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ll(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ll(r)}else ll(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ll(t)}}},to=class extends ii{constructor(e,t,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&hn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Tf(e.next,o),error:e.error&&Tf(e.error,o),complete:e.complete&&Tf(e.complete,o)}):i=e}this.destination=new xf(i)}};function ll(n){hn.useDeprecatedSynchronousErrorHandling?vw(n):cl(n)}function RD(n){throw n}function Sf(n,e){let{onStoppedNotification:t}=hn;t&&Xi.setTimeout(()=>t(n,e))}var PD={closed:!0,next:ea,error:RD,complete:ea};var no=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Gt(n){return n}function Df(...n){return Mf(n)}function Mf(n){return n.length===0?Gt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=OD(t)?t:new to(t,r,i);return eo(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=_w(r),new r((i,o)=>{let s=new to({next:c=>{try{t(c)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[no](){return this}pipe(...t){return Mf(t)(this)}toPromise(t){return t=_w(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function _w(n){var e;return(e=n??hn.Promise)!==null&&e!==void 0?e:Promise}function ND(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function OD(n){return n&&n instanceof ii||ND(n)&&al(n)}function Af(n){return se(n?.lift)}function Ce(n){return e=>{if(Af(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new Rf(n,e,t,r,i)}var Rf=class extends ii{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ro(){return Ce((n,e)=>{let t=null;n._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var io=class extends Ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Af(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ye;let t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ye.EMPTY)}return e}refCount(){return ro()(this)}};var ww=Ji(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class n extends Ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ul(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ww}next(t){eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ef:(this.currentObservers=null,o.push(t),new Ye(()=>{this.currentObservers=null,Xs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ne;return t.source=this,t}}return n.create=(e,t)=>new ul(e,t),n})(),ul=class extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Ef}};var gt=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var kt=new Ne(n=>n.complete());function bw(n){return n&&se(n.schedule)}function Cw(n){return n[n.length-1]}function dl(n){return se(Cw(n))?n.pop():void 0}function Rr(n){return bw(Cw(n))?n.pop():void 0}function Iw(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(h){try{u(r.next(h))}catch(p){s(p)}}function l(h){try{u(r.throw(h))}catch(p){s(p)}}function u(h){h.done?o(h.value):i(h.value).then(c,l)}u((r=r.apply(n,e||[])).next())})}function Ew(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oi(n){return this instanceof oi?(this.v=n,this):new oi(n)}function Tw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(D){return Promise.resolve(D).then(g,p)}}function c(g,D){r[g]&&(i[g]=function(O){return new Promise(function(F,z){o.push([g,O,F,z])>1||l(g,O)})},D&&(i[g]=D(i[g])))}function l(g,D){try{u(r[g](D))}catch(O){y(o[0][3],O)}}function u(g){g.value instanceof oi?Promise.resolve(g.value.v).then(h,p):y(o[0][2],g)}function h(g){l("next",g)}function p(g){l("throw",g)}function y(g,D){g(D),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Sw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ew=="function"?Ew(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,l){s=n[o](s),i(c,l,s.done,s.value)})}}function i(o,s,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},s)}}var hl=n=>n&&typeof n.length=="number"&&typeof n!="function";function fl(n){return se(n?.then)}function pl(n){return se(n[no])}function ml(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function gl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yl=kD();function vl(n){return se(n?.[yl])}function _l(n){return Tw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield oi(t.read());if(i)return yield oi(void 0);yield yield oi(r)}}finally{t.releaseLock()}})}function wl(n){return se(n?.getReader)}function Ze(n){if(n instanceof Ne)return n;if(n!=null){if(pl(n))return VD(n);if(hl(n))return LD(n);if(fl(n))return FD(n);if(ml(n))return xw(n);if(vl(n))return jD(n);if(wl(n))return UD(n)}throw gl(n)}function VD(n){return new Ne(e=>{let t=n[no]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function LD(n){return new Ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function FD(n){return new Ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,cl)})}function jD(n){return new Ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function xw(n){return new Ne(e=>{BD(n,e).catch(t=>e.error(t))})}function UD(n){return xw(_l(n))}function BD(n,e){var t,r,i,o;return Iw(this,void 0,void 0,function*(){try{for(t=Sw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Vt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function bl(n,e=0){return Ce((t,r)=>{t.subscribe(_e(r,i=>Vt(r,n,()=>r.next(i),e),()=>Vt(r,n,()=>r.complete(),e),i=>Vt(r,n,()=>r.error(i),e)))})}function Cl(n,e=0){return Ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Dw(n,e){return Ze(n).pipe(Cl(e),bl(e))}function Mw(n,e){return Ze(n).pipe(Cl(e),bl(e))}function Aw(n,e){return new Ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Rw(n,e){return new Ne(t=>{let r;return Vt(t,e,()=>{r=n[yl](),Vt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function El(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ne(t=>{Vt(t,e,()=>{let r=n[Symbol.asyncIterator]();Vt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Pw(n,e){return El(_l(n),e)}function Nw(n,e){if(n!=null){if(pl(n))return Dw(n,e);if(hl(n))return Aw(n,e);if(fl(n))return Mw(n,e);if(ml(n))return El(n,e);if(vl(n))return Rw(n,e);if(wl(n))return Pw(n,e)}throw gl(n)}function Be(n,e){return e?Nw(n,e):Ze(n)}function ne(...n){let e=Rr(n);return Be(n,e)}function oo(n,e){let t=se(n)?n:()=>n,r=i=>i.error(t());return new Ne(e?i=>e.schedule(r,0,i):r)}function Pf(n){return!!n&&(n instanceof Ne||se(n.lift)&&se(n.subscribe))}var Jn=Ji(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function be(n,e){return Ce((t,r)=>{let i=0;t.subscribe(_e(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:$D}=Array;function HD(n,e){return $D(e)?n(...e):n(e)}function Il(n){return be(e=>HD(n,e))}var{isArray:zD}=Array,{getPrototypeOf:qD,prototype:GD,keys:WD}=Object;function Tl(n){if(n.length===1){let e=n[0];if(zD(e))return{args:e,keys:null};if(KD(e)){let t=WD(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function KD(n){return n&&typeof n=="object"&&qD(n)===GD}function Sl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function xl(...n){let e=Rr(n),t=dl(n),{args:r,keys:i}=Tl(n);if(r.length===0)return Be([],e);let o=new Ne(QD(r,e,i?s=>Sl(i,s):Gt));return t?o.pipe(Il(t)):o}function QD(n,e,t=Gt){return r=>{Ow(e,()=>{let{length:i}=n,o=new Array(i),s=i,c=i;for(let l=0;l<i;l++)Ow(e,()=>{let u=Be(n[l],e),h=!1;u.subscribe(_e(r,p=>{o[l]=p,h||(h=!0,c--),c||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ow(n,e,t){n?Vt(t,n,e):e()}function kw(n,e,t,r,i,o,s,c){let l=[],u=0,h=0,p=!1,y=()=>{p&&!l.length&&!u&&e.complete()},g=O=>u<r?D(O):l.push(O),D=O=>{o&&e.next(O),u++;let F=!1;Ze(t(O,h++)).subscribe(_e(e,z=>{i?.(z),o?g(z):e.next(z)},()=>{F=!0},void 0,()=>{if(F)try{for(u--;l.length&&u<r;){let z=l.shift();s?Vt(e,s,()=>D(z)):D(z)}y()}catch(z){e.error(z)}}))};return n.subscribe(_e(e,g,()=>{p=!0,y()})),()=>{c?.()}}function Je(n,e,t=1/0){return se(e)?Je((r,i)=>be((o,s)=>e(r,o,i,s))(Ze(n(r,i))),t):(typeof e=="number"&&(t=e),Ce((r,i)=>kw(r,i,n,t)))}function so(n=1/0){return Je(Gt,n)}function Vw(){return so(1)}function ao(...n){return Vw()(Be(n,Rr(n)))}function Dl(n){return new Ne(e=>{Ze(n()).subscribe(e)})}function Nf(...n){let e=dl(n),{args:t,keys:r}=Tl(n),i=new Ne(o=>{let{length:s}=t;if(!s){o.complete();return}let c=new Array(s),l=s,u=s;for(let h=0;h<s;h++){let p=!1;Ze(t[h]).subscribe(_e(o,y=>{p||(p=!0,u--),c[h]=y},()=>l--,void 0,()=>{(!l||!p)&&(u||o.next(r?Sl(r,c):c),o.complete())}))}});return e?i.pipe(Il(e)):i}function en(n,e){return Ce((t,r)=>{let i=0;t.subscribe(_e(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Xn(n){return Ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(_e(t,void 0,void 0,s=>{o=Ze(n(s,Xn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Lw(n,e,t,r,i){return(o,s)=>{let c=t,l=e,u=0;o.subscribe(_e(s,h=>{let p=u++;l=c?n(l,h,p):(c=!0,h),r&&s.next(l)},i&&(()=>{c&&s.next(l),s.complete()})))}}function si(n,e){return se(e)?Je(n,e,1):Je(n,1)}function Pr(n){return Ce((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function er(n){return n<=0?()=>kt:Ce((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ml(n=YD){return Ce((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function YD(){return new Jn}function ta(n){return Ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function tr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?en((i,o)=>n(i,o,r)):Gt,er(1),t?Pr(e):Ml(()=>new Jn))}function co(n){return n<=0?()=>kt:Ce((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Of(n,e){let t=arguments.length>=2;return r=>r.pipe(n?en((i,o)=>n(i,o,r)):Gt,co(1),t?Pr(e):Ml(()=>new Jn))}function kf(n,e){return Ce(Lw(n,e,arguments.length>=2,!0))}function Vf(...n){let e=Rr(n);return Ce((t,r)=>{(e?ao(n,t,e):ao(n,t)).subscribe(r)})}function fn(n,e){return Ce((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(_e(r,l=>{i?.unsubscribe();let u=0,h=o++;Ze(n(l,h)).subscribe(i=_e(r,p=>r.next(e?e(l,p,h,u++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function Lf(n){return Ce((e,t)=>{Ze(n).subscribe(_e(t,()=>t.complete(),ea)),!t.closed&&e.subscribe(t)})}function yt(n,e,t){let r=se(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(_e(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;c=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;c=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;c&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Gt}var bb="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Y=class extends Error{code;constructor(e,t){super(Cb(e,t)),this.code=e}};function ZD(n){return`NG0${Math.abs(n)}`}function Cb(n,e){return`${ZD(n)}${e?": "+e:""}`}var Eb=Symbol("InputSignalNode#UNSET"),JD=W(N({},il),{transformFn:void 0,applyValueToInputSignal(n,e){Zs(n,e)}});function Ib(n,e){let t=Object.create(JD);t.value=n,t.transformFn=e?.transform;function r(){if(Ks(t),t.value===Eb){let i=null;throw new Y(-950,i)}return t.value}return r[Xt]=t,r}function cu(n){return{toString:n}.toString()}var Xf=globalThis;function Le(n){for(let e in n)if(n[e]===Le)return e;throw Error("Could not find renamed property on target object.")}function XD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ft(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ft).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ep(n,e){return n?e?`${n} ${e}`:n:e||""}var eM=Le({__forward_ref__:Le});function vn(n){return n.__forward_ref__=vn,n.toString=function(){return Ft(this())},n}function Pt(n){return Tb(n)?n():n}function Tb(n){return typeof n=="function"&&n.hasOwnProperty(eM)&&n.__forward_ref__===vn}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Io(n){return{providers:n.providers||[],imports:n.imports||[]}}function lu(n){return Fw(n,xb)||Fw(n,Db)}function Sb(n){return lu(n)!==null}function Fw(n,e){return n.hasOwnProperty(e)?n[e]:null}function tM(n){let e=n&&(n[xb]||n[Db]);return e||null}function jw(n){return n&&(n.hasOwnProperty(Uw)||n.hasOwnProperty(nM))?n[Uw]:null}var xb=Le({\u0275prov:Le}),Uw=Le({\u0275inj:Le}),Db=Le({ngInjectableDef:Le}),nM=Le({ngInjectorDef:Le}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Mb(n){return n&&!!n.\u0275providers}var rM=Le({\u0275cmp:Le}),iM=Le({\u0275dir:Le}),oM=Le({\u0275pipe:Le}),sM=Le({\u0275mod:Le}),Fl=Le({\u0275fac:Le}),oa=Le({__NG_ELEMENT_ID__:Le}),Bw=Le({__NG_ENV_ID__:Le});function po(n){return typeof n=="string"?n:n==null?"":String(n)}function aM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():po(n)}function Ab(n,e){throw new Y(-200,n)}function Zp(n,e){throw new Y(-201,!1)}var he=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(he||{}),tp;function Rb(){return tp}function tn(n){let e=tp;return tp=n,e}function Pb(n,e,t){let r=lu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&he.Optional)return null;if(e!==void 0)return e;Zp(n,"Injector")}var cM={},ai=cM,lM="__NG_DI_FLAG__",jl=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?ol:ai,r)}},Ul="ngTempTokenPath",uM="ngTokenPath",dM=/\n/gm,hM="\u0275",$w="__source";function fM(n,e=he.Default){if(Js()===void 0)throw new Y(-203,!1);if(Js()===null)return Pb(n,void 0,e);{let t=Js(),r;return t instanceof jl?r=t.injector:r=t,r.get(n,e&he.Optional?null:void 0,e)}}function fe(n,e=he.Default){return(Rb()||fM)(Pt(n),e)}function k(n,e=he.Default){return fe(n,uu(e))}function uu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function np(n){let e=[];for(let t=0;t<n.length;t++){let r=Pt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,o=he.Default;for(let s=0;s<r.length;s++){let c=r[s],l=pM(c);typeof l=="number"?l===-1?i=c.token:o|=l:i=c}e.push(fe(i,o))}else e.push(fe(r))}return e}function pM(n){return n[lM]}function mM(n,e,t,r){let i=n[Ul];throw e[$w]&&i.unshift(e[$w]),n.message=gM(`
`+n.message,i,t,r),n[uM]=i,n[Ul]=null,n}function gM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==hM?n.slice(2):n;let i=Ft(e);if(Array.isArray(e))i=e.map(Ft).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):Ft(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(dM,`
  `)}`}function mo(n,e){let t=n.hasOwnProperty(Fl);return t?n[Fl]:null}function yM(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function vM(n){return n.flat(Number.POSITIVE_INFINITY)}function Jp(n,e){n.forEach(t=>Array.isArray(t)?Jp(t,e):e(t))}function Nb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Bl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function _M(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Xp(n,e,t){let r=wa(n,e);return r>=0?n[r|1]=t:(r=~r,_M(n,r,e,t)),r}function Ff(n,e){let t=wa(n,e);if(t>=0)return n[t|1]}function wa(n,e){return wM(n,e,1)}function wM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var li={},Lt=[],sa=new J(""),Ob=new J("",-1),kb=new J(""),$l=class{get(e,t=ai){if(t===ai){let r=new Error(`NullInjectorError: No provider for ${Ft(e)}!`);throw r.name="NullInjectorError",r}return t}};function Vb(n,e){let t=n[sM]||null;if(!t&&e===!0)throw new Error(`Type ${Ft(n)} does not have '\u0275mod' property.`);return t}function go(n){return n[rM]||null}function bM(n){return n[iM]||null}function CM(n){return n[oM]||null}function Lb(n){return{\u0275providers:n}}function EM(...n){return{\u0275providers:Fb(!0,n),\u0275fromNgModule:!0}}function Fb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Jp(e,s=>{let c=s;rp(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&jb(i,o),t}function jb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];em(i,o=>{e(o,r)})}}function rp(n,e,t,r){if(n=Pt(n),!n)return!1;let i=null,o=jw(n),s=!o&&go(n);if(!o&&!s){let l=n.ngModule;if(o=jw(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)rp(u,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let u;try{Jp(o.imports,h=>{rp(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&jb(u,e)}if(!c){let u=mo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Lt},i),e({provide:kb,useValue:i,multi:!0},i),e({provide:sa,useValue:()=>fe(i),multi:!0},i)}let l=o.providers;if(l!=null&&!c){let u=n;em(l,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function em(n,e){for(let t of n)Mb(t)&&(t=t.\u0275providers),Array.isArray(t)?em(t,e):e(t)}var IM=Le({provide:String,useValue:Le});function Ub(n){return n!==null&&typeof n=="object"&&IM in n}function TM(n){return!!(n&&n.useExisting)}function SM(n){return!!(n&&n.useFactory)}function yo(n){return typeof n=="function"}function xM(n){return!!n.useClass}var du=new J(""),Pl={},Hw={},jf;function tm(){return jf===void 0&&(jf=new $l),jf}var Wt=class{},aa=class extends Wt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,op(e,s=>this.processProvider(s)),this.records.set(Ob,lo(void 0,this)),i.has("environment")&&this.records.set(Wt,lo(void 0,this));let o=this.records.get(du);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kb,Lt,he.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?ol:ai,r)}destroy(){ra(this),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return ra(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ra(this);let t=Zn(this),r=tn(void 0),i;try{return e()}finally{Zn(t),tn(r)}}get(e,t=ai,r=he.Default){if(ra(this),e.hasOwnProperty(Bw))return e[Bw](this);r=uu(r);let i,o=Zn(this),s=tn(void 0);try{if(!(r&he.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=PM(e)&&lu(e);u&&this.injectableDefInScope(u)?l=lo(ip(e),Pl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let c=r&he.Self?tm():this.parent;return t=r&he.Optional&&t===ai?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[Ul]=c[Ul]||[]).unshift(Ft(e)),o)throw c;return mM(c,e,"R3InjectorError",this.source)}else throw c}finally{tn(s),Zn(o)}}resolveInjectorInitializers(){let e=ce(null),t=Zn(this),r=tn(void 0),i;try{let o=this.get(sa,Lt,he.Self);for(let s of o)s()}finally{Zn(t),tn(r),ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ft(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Pt(e);let t=yo(e)?e:Pt(e&&e.provide),r=MM(e);if(!yo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=lo(void 0,Pl,!0),i.factory=()=>np(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ce(null);try{return t.value===Hw?Ab(Ft(e)):t.value===Pl&&(t.value=Hw,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&RM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ce(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Pt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ip(n){let e=lu(n),t=e!==null?e.factory:mo(n);if(t!==null)return t;if(n instanceof J)throw new Y(204,!1);if(n instanceof Function)return DM(n);throw new Y(204,!1)}function DM(n){if(n.length>0)throw new Y(204,!1);let t=tM(n);return t!==null?()=>t.factory(n):()=>new n}function MM(n){if(Ub(n))return lo(void 0,n.useValue);{let e=Bb(n);return lo(e,Pl)}}function Bb(n,e,t){let r;if(yo(n)){let i=Pt(n);return mo(i)||ip(i)}else if(Ub(n))r=()=>Pt(n.useValue);else if(SM(n))r=()=>n.useFactory(...np(n.deps||[]));else if(TM(n))r=(i,o)=>fe(Pt(n.useExisting),o!==void 0&&o&he.Optional?he.Optional:void 0);else{let i=Pt(n&&(n.useClass||n.provide));if(AM(n))r=()=>new i(...np(n.deps));else return mo(i)||ip(i)}return r}function ra(n){if(n.destroyed)throw new Y(205,!1)}function lo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function AM(n){return!!n.deps}function RM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function PM(n){return typeof n=="function"||typeof n=="object"&&n instanceof J}function op(n,e){for(let t of n)Array.isArray(t)?op(t,e):t&&Mb(t)?op(t.\u0275providers,e):e(t)}function _n(n,e){let t;n instanceof aa?(ra(n),t=n):t=new jl(n);let r,i=Zn(t),o=tn(void 0);try{return e()}finally{Zn(i),tn(o)}}function $b(){return Rb()!==void 0||Js()!=null}function NM(n){if(!$b())throw new Y(-203,!1)}function OM(n){return typeof n=="function"}var ir=0,le=1,re=2,Et=3,gn=4,wn=5,ca=6,Hl=7,ct=8,vo=9,nr=10,Xe=11,la=12,zw=13,To=14,yn=15,ui=16,uo=17,rr=18,hu=19,Hb=20,Nr=21,Uf=22,di=23,nn=24,Bf=25,jt=26,zb=1;var hi=7,zl=8,_o=9,Ct=10;function Or(n){return Array.isArray(n)&&typeof n[zb]=="object"}function or(n){return Array.isArray(n)&&n[zb]===!0}function qb(n){return(n.flags&4)!==0}function So(n){return n.componentOffset>-1}function nm(n){return(n.flags&1)===1}function Mn(n){return!!n.template}function ql(n){return(n[re]&512)!==0}function xo(n){return(n[re]&256)===256}var sp=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Gb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Vr=(()=>{let n=()=>Wb;return n.ngInherit=!0,n})();function Wb(n){return n.type.prototype.ngOnChanges&&(n.setInput=VM),kM}function kM(){let n=Qb(this),e=n?.current;if(e){let t=n.previous;if(t===li)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function VM(n,e,t,r,i){let o=this.declaredInputs[r],s=Qb(n)||LM(n,{previous:li,current:null}),c=s.current||(s.current={}),l=s.previous,u=l[o];c[o]=new sp(u&&u.currentValue,t,l===li),Gb(n,e,i,t)}var Kb="__ngSimpleChanges__";function Qb(n){return n[Kb]||null}function LM(n,e){return n[Kb]=e}var qw=null;var Fe=function(n,e=null,t){qw?.(n,e,t)},FM="svg",jM="math";function An(n){for(;Array.isArray(n);)n=n[ir];return n}function Yb(n,e){return An(e[n])}function Vn(n,e){return An(e[n.index])}function rm(n,e){return n.data[e]}function UM(n,e){return n[e]}function Zb(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Rn(n,e){let t=e[n];return Or(t)?t:t[ir]}function BM(n){return(n[re]&4)===4}function im(n){return(n[re]&128)===128}function $M(n){return or(n[Et])}function wo(n,e){return e==null?null:n[e]}function Jb(n){n[uo]=0}function Xb(n){n[re]&1024||(n[re]|=1024,im(n)&&ba(n))}function HM(n,e){for(;n>0;)e=e[To],n--;return e}function fu(n){return!!(n[re]&9216||n[nn]?.dirty)}function ap(n){n[nr].changeDetectionScheduler?.notify(8),n[re]&64&&(n[re]|=1024),fu(n)&&ba(n)}function ba(n){n[nr].changeDetectionScheduler?.notify(0);let e=fi(n);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!im(e)));)e=fi(e)}function eC(n,e){if(xo(n))throw new Y(911,!1);n[Nr]===null&&(n[Nr]=[]),n[Nr].push(e)}function zM(n,e){if(n[Nr]===null)return;let t=n[Nr].indexOf(e);t!==-1&&n[Nr].splice(t,1)}function fi(n){let e=n[Et];return or(e)?e[Et]:e}function om(n){return n[Hl]??=[]}function sm(n){return n.cleanup??=[]}function qM(n,e,t,r){let i=om(e);i.push(t),n.firstCreatePass&&sm(n).push(r,i.length-1)}var me={lFrame:cC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cp=!1;function GM(){return me.lFrame.elementDepthCount}function WM(){me.lFrame.elementDepthCount++}function KM(){me.lFrame.elementDepthCount--}function tC(){return me.bindingsEnabled}function QM(){return me.skipHydrationRootTNode!==null}function YM(n){return me.skipHydrationRootTNode===n}function ZM(){me.skipHydrationRootTNode=null}function ye(){return me.lFrame.lView}function lt(){return me.lFrame.tView}function U(n){return me.lFrame.contextLView=n,n[ct]}function B(n){return me.lFrame.contextLView=null,n}function Nt(){let n=nC();for(;n!==null&&n.type===64;)n=n.parent;return n}function nC(){return me.lFrame.currentTNode}function JM(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Do(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function rC(){return me.lFrame.isParent}function XM(){me.lFrame.isParent=!1}function eA(){return me.lFrame.contextLView}function iC(){return cp}function Gl(n){let e=cp;return cp=n,e}function tA(){let n=me.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function nA(){return me.lFrame.bindingIndex}function rA(n){return me.lFrame.bindingIndex=n}function Mo(){return me.lFrame.bindingIndex++}function am(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function iA(){return me.lFrame.inI18n}function oA(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,lp(e)}function sA(){return me.lFrame.currentDirectiveIndex}function lp(n){me.lFrame.currentDirectiveIndex=n}function aA(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function oC(){return me.lFrame.currentQueryIndex}function cm(n){me.lFrame.currentQueryIndex=n}function cA(n){let e=n[le];return e.type===2?e.declTNode:e.type===1?n[wn]:null}function sC(n,e,t){if(t&he.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&he.Host);)if(i=cA(o),i===null||(o=o[To],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=aC();return r.currentTNode=e,r.lView=n,!0}function lm(n){let e=aC(),t=n[le];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function aC(){let n=me.lFrame,e=n===null?null:n.child;return e===null?cC(n):e}function cC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function lC(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var uC=lC;function um(){let n=lC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function lA(n){return(me.lFrame.contextLView=HM(n,me.lFrame.contextLView))[ct]}function Ln(){return me.lFrame.selectedIndex}function pi(n){me.lFrame.selectedIndex=n}function dm(){let n=me.lFrame;return rm(n.tView,n.selectedIndex)}function uA(){return me.lFrame.currentNamespace}var dC=!0;function hm(){return dC}function fm(n){dC=n}function dA(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Wb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function hC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Nl(n,e,t){fC(n,e,3,t)}function Ol(n,e,t,r){(n[re]&3)===t&&fC(n,e,t,r)}function $f(n,e){let t=n[re];(t&3)===e&&(t&=16383,t+=1,n[re]=t)}function fC(n,e,t,r){let i=r!==void 0?n[uo]&65535:0,o=r??-1,s=e.length-1,c=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(n[uo]+=65536),(c<o||o==-1)&&(hA(n,t,e,l),n[uo]=(n[uo]&4294901760)+l+2),l++}function Gw(n,e){Fe(4,n,e);let t=ce(null);try{e.call(n)}finally{ce(t),Fe(5,n,e)}}function hA(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[re]>>14<n[uo]>>16&&(n[re]&3)===e&&(n[re]+=16384,Gw(c,o)):Gw(c,o)}var fo=-1,mi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function fA(n){return(n.flags&8)!==0}function pA(n){return(n.flags&16)!==0}function mA(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];gA(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function pC(n){return n===3||n===4||n===6}function gA(n){return n.charCodeAt(0)===64}function ua(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Ww(n,t,i,null,e[++r]):Ww(n,t,i,null,null))}}return n}function Ww(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function mC(n){return n!==fo}function Wl(n){return n&32767}function yA(n){return n>>16}function Kl(n,e){let t=yA(n),r=e;for(;t>0;)r=r[To],t--;return r}var up=!0;function Kw(n){let e=up;return up=n,e}var vA=256,gC=vA-1,yC=5,_A=0,Dn={};function wA(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(oa)&&(r=t[oa]),r==null&&(r=t[oa]=_A++);let i=r&gC,o=1<<i;e.data[n+(i>>yC)]|=o}function Ql(n,e){let t=vC(n,e);if(t!==-1)return t;let r=e[le];r.firstCreatePass&&(n.injectorIndex=e.length,Hf(r.data,n),Hf(e,null),Hf(r.blueprint,null));let i=pm(n,e),o=n.injectorIndex;if(mC(i)){let s=Wl(i),c=Kl(i,e),l=c[le].data;for(let u=0;u<8;u++)e[o+u]=c[s+u]|l[s+u]}return e[o+8]=i,o}function Hf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function pm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=EC(i),r===null)return fo;if(t++,i=i[To],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return fo}function dp(n,e,t){wA(n,e,t)}function bA(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(pC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function _C(n,e,t){if(t&he.Optional||n!==void 0)return n;Zp(e,"NodeInjector")}function wC(n,e,t,r){if(t&he.Optional&&r===void 0&&(r=null),(t&(he.Self|he.Host))===0){let i=n[vo],o=tn(void 0);try{return i?i.get(e,r,t&he.Optional):Pb(e,r,t&he.Optional)}finally{tn(o)}}return _C(r,e,t)}function bC(n,e,t,r=he.Default,i){if(n!==null){if(e[re]&2048&&!(r&he.Self)){let s=TA(n,e,t,r,Dn);if(s!==Dn)return s}let o=CC(n,e,t,r,Dn);if(o!==Dn)return o}return wC(e,t,r,i)}function CC(n,e,t,r,i){let o=EA(t);if(typeof o=="function"){if(!sC(e,n,r))return r&he.Host?_C(i,t,r):wC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&he.Optional))Zp(t);else return s}finally{uC()}}else if(typeof o=="number"){let s=null,c=vC(n,e),l=fo,u=r&he.Host?e[yn][wn]:null;for((c===-1||r&he.SkipSelf)&&(l=c===-1?pm(n,e):e[c+8],l===fo||!Yw(r,!1)?c=-1:(s=e[le],c=Wl(l),e=Kl(l,e)));c!==-1;){let h=e[le];if(Qw(o,c,h.data)){let p=CA(c,e,t,s,r,u);if(p!==Dn)return p}l=e[c+8],l!==fo&&Yw(r,e[le].data[c+8]===u)&&Qw(o,c,e)?(s=h,c=Wl(l),e=Kl(l,e)):c=-1}}return i}function CA(n,e,t,r,i,o){let s=e[le],c=s.data[n+8],l=r==null?So(c)&&up:r!=s&&(c.type&3)!==0,u=i&he.Host&&o===c,h=kl(c,s,t,l,u);return h!==null?da(e,s,h,c,i):Dn}function kl(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,l=n.directiveStart,u=n.directiveEnd,h=o>>20,p=r?c:c+h,y=i?c+h:u;for(let g=p;g<y;g++){let D=s[g];if(g<l&&t===D||g>=l&&D.type===t)return g}if(i){let g=s[l];if(g&&Mn(g)&&g.type===t)return l}return null}function da(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof mi){let c=o;c.resolving&&Ab(aM(s[t]));let l=Kw(c.canSeeViewProviders);c.resolving=!0;let u,h=c.injectImpl?tn(c.injectImpl):null,p=sC(n,r,he.Default);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&dA(t,s[t],e)}finally{h!==null&&tn(h),Kw(l),c.resolving=!1,uC()}}return o}function EA(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(oa)?n[oa]:void 0;return typeof e=="number"?e>=0?e&gC:IA:e}function Qw(n,e,t){let r=1<<n;return!!(t[e+(n>>yC)]&r)}function Yw(n,e){return!(n&he.Self)&&!(n&he.Host&&e)}var ci=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return bC(this._tNode,this._lView,e,uu(r),t)}};function IA(){return new ci(Nt(),ye())}function bn(n){return cu(()=>{let e=n.prototype.constructor,t=e[Fl]||hp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Fl]||hp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function hp(n){return Tb(n)?()=>{let e=hp(Pt(n));return e&&e()}:mo(n)}function TA(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[re]&2048&&!ql(s);){let c=CC(o,s,t,r|he.Self,Dn);if(c!==Dn)return c;let l=o.parent;if(!l){let u=s[Hb];if(u){let h=u.get(t,Dn,r);if(h!==Dn)return h}l=EC(s),s=s[To]}o=l}return i}function EC(n){let e=n[le],t=e.type;return t===2?e.declTNode:t===1?n[wn]:null}function IC(n){return bA(Nt(),n)}function Zw(n,e=null,t=null,r){let i=TC(n,e,t,r);return i.resolveInjectorInitializers(),i}function TC(n,e=null,t=null,r,i=new Set){let o=[t||Lt,EM(n)];return r=r||(typeof n=="object"?void 0:Ft(n)),new aa(o,e||tm(),r||null,i)}var Pn=class n{static THROW_IF_NOT_FOUND=ai;static NULL=new $l;static create(e,t){if(Array.isArray(e))return Zw({name:""},t,e,"");{let r=e.name??"";return Zw({name:r},e.parent,e.providers,r)}}static \u0275prov=Q({token:n,providedIn:"any",factory:()=>fe(Ob)});static __NG_ELEMENT_ID__=-1};var SA=new J("");SA.__NG_ELEMENT_ID__=n=>{let e=Nt();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&he.Optional)return null;throw new Y(204,!1)};var SC=!1,Ao=(()=>{class n{static __NG_ELEMENT_ID__=xA;static __NG_ENV_ID__=t=>t}return n})(),Yl=class extends Ao{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return xo(t)?(e(),()=>{}):(eC(t,e),()=>zM(t,e))}};function xA(){return new Yl(ye())}var bo=class{},xC=new J("",{providedIn:"root",factory:()=>!1});var DC=new J(""),MC=new J(""),Ro=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new gt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();var fp=class extends qe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,$b()&&(this.destroyRef=k(Ao,{optional:!0})??void 0,this.pendingTasks=k(Ro,{optional:!0})??void 0)}emit(e){let t=ce(null);try{super.next(e)}finally{ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ye&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},at=fp;function ha(...n){}function AC(n){let e,t;function r(){n=ha;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Jw(n){return queueMicrotask(()=>n()),()=>{n=ha}}var mm="isAngularZone",Zl=mm+"_ID",DA=0,vt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new at(!1);onMicrotaskEmpty=new at(!1);onStable=new at(!1);onError=new at(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=SC}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,RA(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(mm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,MA,ha,ha);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},MA={};function gm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function AA(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){AC(()=>{n.callbackScheduled=!1,pp(n),n.isCheckStableRunning=!0,gm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),pp(n)}function RA(n){let e=()=>{AA(n)},t=DA++;n._inner=n._inner.fork({name:"angular",properties:{[mm]:!0,[Zl]:t,[Zl+t]:!0},onInvokeTask:(r,i,o,s,c,l)=>{if(PA(l))return r.invokeTask(o,s,c,l);try{return Xw(n),r.invokeTask(o,s,c,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),eb(n)}},onInvoke:(r,i,o,s,c,l,u)=>{try{return Xw(n),r.invoke(o,s,c,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!NA(l)&&e(),eb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,pp(n),gm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function pp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Xw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function eb(n){n._nesting--,gm(n)}var mp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new at;onMicrotaskEmpty=new at;onStable=new at;onError=new at;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function PA(n){return RC(n,"__ignore_ng_zone__")}function NA(n){return RC(n,"__scheduler_tick__")}function RC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Nn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},OA=new J("",{providedIn:"root",factory:()=>{let n=k(vt),e=k(Nn);return t=>n.runOutsideAngular(()=>e.handleError(t))}}),gp=class{destroyed=!1;listeners=null;errorHandler=k(Nn,{optional:!0});destroyRef=k(Ao);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new Y(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(Cb(953,!1));return}if(this.listeners===null)return;let t=ce(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{ce(t)}}};function et(n){return new gp}function tb(n,e){return Ib(n,e)}function kA(n){return Ib(Eb,n)}var Ge=(tb.required=kA,tb);function VA(){return Po(Nt(),ye())}function Po(n,e){return new rn(Vn(n,e))}var rn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=VA}return n})();function LA(n){return n instanceof rn?n.nativeElement:n}function FA(n){return typeof n=="function"&&n[Xt]!==void 0}function K(n,e){let t=_f(n,e?.equal),r=t[Xt];return t.set=i=>Zs(r,i),t.update=i=>wf(r,i),t.asReadonly=jA.bind(t),t}function jA(){let n=this[Xt];if(n.readonlyFn===void 0){let e=()=>this();e[Xt]=n,n.readonlyFn=e}return n.readonlyFn}function PC(n){return FA(n)&&typeof n.set=="function"}function UA(){return this._results[Symbol.iterator]()}var yp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new qe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=vM(e);(this._changesDetected=!yM(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=UA};function NC(n){return(n.flags&128)===128}var OC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(OC||{}),kC=new Map,BA=0;function $A(){return BA++}function HA(n){kC.set(n[hu],n)}function vp(n){kC.delete(n[hu])}var nb="__ngContext__";function Ca(n,e){Or(e)?(n[nb]=e[hu],HA(e)):n[nb]=e}function VC(n){return FC(n[la])}function LC(n){return FC(n[gn])}function FC(n){for(;n!==null&&!or(n);)n=n[gn];return n}var _p;function jC(n){_p=n}function zA(){if(_p!==void 0)return _p;if(typeof document<"u")return document;throw new Y(210,!1)}var ym=new J("",{providedIn:"root",factory:()=>qA}),qA="ng",vm=new J(""),vi=new J("",{providedIn:"platform",factory:()=>"unknown"});var _m=new J("",{providedIn:"root",factory:()=>zA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var GA="h",WA="b";var UC=!1,KA=new J("",{providedIn:"root",factory:()=>UC});var BC=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(BC||{}),pu=new J(""),rb=new Set;function Ea(n){rb.has(n)||(rb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var $C=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=QA}return n})();function QA(){return new $C(ye(),Nt())}var YA=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();var ZA=(n,e,t,r)=>{};function JA(n,e,t,r){ZA(n,e,t,r)}var XA=()=>null;function HC(n,e,t=!1){return XA(n,e,t)}function zC(n,e){let t=n.contentQueries;if(t!==null){let r=ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];cm(o),c.contentQueries(2,e[s],s)}}}finally{ce(r)}}}function wp(n,e,t){cm(0);let r=ce(null);try{e(n,t)}finally{ce(r)}}function qC(n,e,t){if(qb(e)){let r=ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let l=t[s];c.contentQueries(1,l,s)}}}finally{ce(r)}}}var On=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(On||{});var Al;function eR(){if(Al===void 0&&(Al=null,Xf.trustedTypes))try{Al=Xf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Al}function ib(n){return eR()?.createScriptURL(n)||n}var Jl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bb})`}};function mu(n){return n instanceof Jl?n.changingThisBreaksApplicationSecurity:n}function GC(n,e){let t=tR(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${bb})`)}return t===e}function tR(n){return n instanceof Jl&&n.getTypeName()||null}var nR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rR(n){return n=String(n),n.match(nR)?n:"unsafe:"+n}function iR(n,e){return n.createText(e)}function oR(n,e,t){n.setValue(e,t)}function WC(n,e,t){return n.createElement(e,t)}function Xl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function KC(n,e,t){n.appendChild(e,t)}function ob(n,e,t,r,i){r!==null?Xl(n,e,t,r,i):KC(n,e,t)}function sR(n,e,t){n.removeChild(null,e,t)}function aR(n,e,t){n.setAttribute(e,"style",t)}function cR(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function QC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&mA(n,e,r),i!==null&&cR(n,e,i),o!==null&&aR(n,e,o)}var wm=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(wm||{});function bm(n){let e=ZC();return e?e.sanitize(wm.URL,n)||"":GC(n,"URL")?mu(n):rR(po(n))}function lR(n){let e=ZC();if(e)return ib(e.sanitize(wm.RESOURCE_URL,n)||"");if(GC(n,"ResourceURL"))return ib(mu(n));throw new Y(904,!1)}function uR(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?lR:bm}function YC(n,e,t){return uR(e,t)(n)}function ZC(){let n=ye();return n&&n[nr].sanitizer}function JC(n){return n instanceof Function?n():n}function dR(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var XC="ng-template";function hR(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&dR(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Cm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Cm(n){return n.type===4&&n.value!==XC}function fR(n,e,t){let r=n.type===4&&!t?XC:n.value;return e===r}function pR(n,e,t){let r=4,i=n.attrs,o=i!==null?yR(i):0,s=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!s&&!pn(r)&&!pn(l))return!1;if(s&&pn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!fR(n,l,t)||l===""&&e.length===1){if(pn(r))return!1;s=!0}}else if(r&8){if(i===null||!hR(n,i,l,t)){if(pn(r))return!1;s=!0}}else{let u=e[++c],h=mR(l,i,Cm(n),t);if(h===-1){if(pn(r))return!1;s=!0;continue}if(u!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if(pn(r))return!1;s=!0}}}}return pn(r)||s}function pn(n){return(n&1)===0}function mR(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return vR(e,n)}function gR(n,e,t=!1){for(let r=0;r<e.length;r++)if(pR(n,e[r],t))return!0;return!1}function yR(n){for(let e=0;e<n.length;e++){let t=n[e];if(pC(t))return e}return n.length}function vR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function sb(n,e){return n?":not("+e.trim()+")":e}function _R(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!pn(s)&&(e+=sb(o,i),i=""),r=s,o=o||!pn(r);t++}return i!==""&&(e+=sb(o,i)),e}function wR(n){return n.map(_R).join(",")}function bR(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!pn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var on={};function Em(n,e,t,r,i,o,s,c,l,u,h){let p=jt+r,y=p+i,g=CR(p,y),D=typeof u=="function"?u():u;return g[le]={type:n,blueprint:g,template:t,queries:null,viewQuery:c,declTNode:e,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:D,incompleteFirstPass:!1,ssrId:h}}function CR(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:on);return t}function ER(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Em(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Im(n,e,t,r,i,o,s,c,l,u,h){let p=e.blueprint.slice();return p[ir]=i,p[re]=r|4|128|8|64|1024,(u!==null||n&&n[re]&2048)&&(p[re]|=2048),Jb(p),p[Et]=p[To]=n,p[ct]=t,p[nr]=s||n&&n[nr],p[Xe]=c||n&&n[Xe],p[vo]=l||n&&n[vo]||null,p[wn]=o,p[hu]=$A(),p[ca]=h,p[Hb]=u,p[yn]=e.type==2?n[yn]:p,p}function IR(n,e,t){let r=Vn(e,n),i=ER(t),o=n[nr].rendererFactory,s=Tm(n,Im(n,i,null,eE(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function eE(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function tE(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Tm(n,e){return n[la]?n[zw][gn]=e:n[la]=e,n[zw]=e,e}function R(n=1){nE(lt(),ye(),Ln()+n,!1)}function nE(n,e,t,r){if(!r)if((e[re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Nl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ol(e,o,0,t)}pi(t)}var gu=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(gu||{});function bp(n,e,t,r){let i=ce(null);try{let[o,s,c]=n.inputs[t],l=null;(s&gu.SignalBased)!==0&&(l=e[o][Xt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):Gb(e,l,o,r)}finally{ce(i)}}function rE(n,e,t,r,i){let o=Ln(),s=r&2;try{pi(-1),s&&e.length>jt&&nE(n,e,jt,!1),Fe(s?2:0,i),t(r,i)}finally{pi(o),Fe(s?3:1,i)}}function Sm(n,e,t){AR(n,e,t),(t.flags&64)===64&&RR(n,e,t)}function iE(n,e,t=Vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function TR(n,e,t,r){let o=r.get(KA,UC)||t===On.ShadowDom,s=n.selectRootElement(e,o);return SR(s),s}function SR(n){xR(n)}var xR=()=>null;function DR(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oE(n,e,t,r,i,o,s,c){if(!c&&xm(e,n,t,r,i)){So(e)&&MR(t,e.index);return}if(e.type&3){let l=Vn(e,t);r=DR(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)}else e.type&12}function MR(n,e){let t=Rn(e,n);t[re]&16||(t[re]|=64)}function AR(n,e,t){let r=t.directiveStart,i=t.directiveEnd;So(t)&&IR(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ql(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],l=da(e,n,s,t);if(Ca(l,e),o!==null&&kR(e,s-r,l,c,t,o),Mn(c)){let u=Rn(t.index,e);u[ct]=da(e,n,s,t)}}}function RR(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=sA();try{pi(o);for(let c=r;c<i;c++){let l=n.data[c],u=e[c];lp(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&PR(l,u)}}finally{pi(-1),lp(s)}}function PR(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function sE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];gR(e,o.selectors,!1)&&(r??=[],Mn(o)?r.unshift(o):r.push(o))}return r}function NR(n,e,t,r,i,o){let s=Vn(n,e);OR(e[Xe],s,o,n.value,t,r,i)}function OR(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?po(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function kR(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1];bp(r,t,l,u)}}function VR(n,e){let t=n[vo],r=t?t.get(Nn,null):null;r&&r.handleError(e)}function xm(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],h=s[l+1],p=e.data[u];bp(p,t[u],h,i),c=!0}if(o)for(let l of o){let u=t[l],h=e.data[l];bp(h,u,r,i),c=!0}return c}function LR(n,e){let t=Rn(e,n),r=t[le];FR(r,t);let i=t[ir];i!==null&&t[ca]===null&&(t[ca]=HC(i,t[vo])),Fe(18),Dm(r,t,t[ct]),Fe(19,t[ct])}function FR(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Dm(n,e,t){lm(e);try{let r=n.viewQuery;r!==null&&wp(1,r,t);let i=n.template;i!==null&&rE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[rr]?.finishViewCreation(n),n.staticContentQueries&&zC(n,e),n.staticViewQueries&&wp(2,n.viewQuery,t);let o=n.components;o!==null&&jR(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[re]&=-5,um()}}function jR(n,e){for(let t=0;t<e.length;t++)LR(n,e[t])}function yu(n,e,t,r){let i=ce(null);try{let o=e.tView,c=n[re]&4096?4096:16,l=Im(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[ui]=u;let h=n[rr];return h!==null&&(l[rr]=h.createEmbeddedView(o)),Dm(o,l,t),l}finally{ce(i)}}function fa(n,e){return!e||e.firstChild===null||NC(n)}var UR;function Mm(n,e){return UR(n,e)}var kr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(kr||{});function aE(n){return(n.flags&32)===32}function ho(n,e,t,r,i){if(r!=null){let o,s=!1;or(r)?o=r:Or(r)&&(s=!0,r=r[ir]);let c=An(r);n===0&&t!==null?i==null?KC(e,t,c):Xl(e,t,c,i||null,!0):n===1&&t!==null?Xl(e,t,c,i||null,!0):n===2?sR(e,c,s):n===3&&e.destroyNode(c),o!=null&&JR(e,n,o,t,i)}}function BR(n,e){cE(n,e),e[ir]=null,e[wn]=null}function $R(n,e,t,r,i,o){r[ir]=i,r[wn]=e,_u(n,r,t,1,i,o)}function cE(n,e){e[nr].changeDetectionScheduler?.notify(9),_u(n,e,e[Xe],2,null,null)}function HR(n){let e=n[la];if(!e)return zf(n[le],n);for(;e;){let t=null;if(Or(e))t=e[la];else{let r=e[Ct];r&&(t=r)}if(!t){for(;e&&!e[gn]&&e!==n;)Or(e)&&zf(e[le],e),e=e[Et];e===null&&(e=n),Or(e)&&zf(e[le],e),t=e&&e[gn]}e=t}}function Am(n,e){let t=n[_o],r=t.indexOf(e);t.splice(r,1)}function vu(n,e){if(xo(e))return;let t=e[Xe];t.destroyNode&&_u(n,e,t,3,null,null),HR(e)}function zf(n,e){if(xo(e))return;let t=ce(null);try{e[re]&=-129,e[re]|=256,e[nn]&&Ys(e[nn]),qR(n,e),zR(n,e),e[le].type===1&&e[Xe].destroy();let r=e[ui];if(r!==null&&or(e[Et])){r!==e[Et]&&Am(r,e);let i=e[rr];i!==null&&i.detachView(n)}vp(e)}finally{ce(t)}}function zR(n,e){let t=n.cleanup,r=e[Hl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[Hl]=null);let i=e[Nr];if(i!==null){e[Nr]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[di];if(o!==null){e[di]=null;for(let s of o)s.destroy()}}function qR(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof mi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],l=o[s+1];Fe(4,c,l);try{l.call(c)}finally{Fe(5,c,l)}}else{Fe(4,i,o);try{o.call(i)}finally{Fe(5,i,o)}}}}}function GR(n,e,t){return WR(n,e.parent,t)}function WR(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ir];if(So(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===On.None||i===On.Emulated)return null}return Vn(r,t)}function KR(n,e,t){return YR(n,e,t)}function QR(n,e,t){return n.type&40?Vn(n,t):null}var YR=QR,ab;function Rm(n,e,t,r){let i=GR(n,r,e),o=e[Xe],s=r.parent||e[wn],c=KR(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)ob(o,i,t[l],c,!1);else ob(o,i,t,c,!1);ab!==void 0&&ab(o,r,e,t,i)}function ia(n,e){if(e!==null){let t=e.type;if(t&3)return Vn(e,n);if(t&4)return Cp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ia(n,r);{let i=n[e.index];return or(i)?Cp(-1,i):An(i)}}else{if(t&128)return ia(n,e.next);if(t&32)return Mm(e,n)()||An(n[e.index]);{let r=lE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fi(n[yn]);return ia(i,r)}else return ia(n,e.next)}}}return null}function lE(n,e){if(e!==null){let r=n[yn][wn],i=e.projection;return r.projection[i]}return null}function Cp(n,e){let t=Ct+n+1;if(t<e.length){let r=e[t],i=r[le].firstChild;if(i!==null)return ia(r,i)}return e[hi]}function Pm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&Ca(An(c),r),t.flags|=2),!aE(t))if(l&8)Pm(n,e,t.child,r,i,o,!1),ho(e,n,i,c,o);else if(l&32){let u=Mm(t,r),h;for(;h=u();)ho(e,n,i,h,o);ho(e,n,i,c,o)}else l&16?ZR(n,e,r,t,i,o):ho(e,n,i,c,o);t=s?t.projectionNext:t.next}}function _u(n,e,t,r,i,o){Pm(t,r,n.firstChild,e,i,o,!1)}function ZR(n,e,t,r,i,o){let s=t[yn],l=s[wn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];ho(e,n,i,h,o)}else{let u=l,h=s[Et];NC(r)&&(u.flags|=128),Pm(n,e,u,h,i,o,!0)}}function JR(n,e,t,r,i){let o=t[hi],s=An(t);o!==s&&ho(e,n,r,o,i);for(let c=Ct;c<t.length;c++){let l=t[c];_u(l[le],l,n,e,r,o)}}function XR(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:kr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=kr.Important),n.setStyle(t,r,i,o))}}function eu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(An(o)),or(o)&&e1(o,r);let s=t.type;if(s&8)eu(n,e,t.child,r);else if(s&32){let c=Mm(t,e),l;for(;l=c();)r.push(l)}else if(s&16){let c=lE(e,t);if(Array.isArray(c))r.push(...c);else{let l=fi(e[yn]);eu(l[le],l,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function e1(n,e){for(let t=Ct;t<n.length;t++){let r=n[t],i=r[le].firstChild;i!==null&&eu(r[le],r,i,e)}n[hi]!==n[ir]&&e.push(n[hi])}function uE(n){if(n[Bf]!==null){for(let e of n[Bf])e.impl.addSequence(e);n[Bf].length=0}}var dE=[];function t1(n){return n[nn]??n1(n)}function n1(n){let e=dE.pop()??Object.create(i1);return e.lView=n,e}function r1(n){n.lView[nn]!==n&&(n.lView=null,dE.push(n))}var i1=W(N({},Zi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ba(n.lView)},consumerOnSignalRead(){this.lView[nn]=this}});function o1(n){let e=n[nn]??Object.create(s1);return e.lView=n,e}var s1=W(N({},Zi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=fi(n.lView);for(;e&&!hE(e[le]);)e=fi(e);e&&Xb(e)},consumerOnSignalRead(){this.lView[nn]=this}});function hE(n){return n.type!==2}function fE(n){if(n[di]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[di])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[re]&8192)}}var a1=100;function pE(n,e=!0,t=0){let i=n[nr].rendererFactory,o=!1;o||i.begin?.();try{c1(n,t)}catch(s){throw e&&VR(n,s),s}finally{o||i.end?.()}}function c1(n,e){let t=iC();try{Gl(!0),Ep(n,e);let r=0;for(;fu(n);){if(r===a1)throw new Y(103,!1);r++,Ep(n,1)}}finally{Gl(t)}}function l1(n,e,t,r){if(xo(e))return;let i=e[re],o=!1,s=!1;lm(e);let c=!0,l=null,u=null;o||(hE(n)?(u=t1(e),l=Qs(u)):ff()===null?(c=!1,u=o1(e),l=Qs(u)):e[nn]&&(Ys(e[nn]),e[nn]=null));try{Jb(e),rA(n.bindingStartIndex),t!==null&&rE(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let g=n.preOrderCheckHooks;g!==null&&Nl(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Ol(e,g,0,null),$f(e,0)}if(s||u1(e),fE(e),mE(e,0),n.contentQueries!==null&&zC(n,e),!o)if(h){let g=n.contentCheckHooks;g!==null&&Nl(e,g)}else{let g=n.contentHooks;g!==null&&Ol(e,g,1),$f(e,1)}h1(n,e);let p=n.components;p!==null&&yE(e,p,0);let y=n.viewQuery;if(y!==null&&wp(2,y,r),!o)if(h){let g=n.viewCheckHooks;g!==null&&Nl(e,g)}else{let g=n.viewHooks;g!==null&&Ol(e,g,2),$f(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Uf]){for(let g of e[Uf])g();e[Uf]=null}o||(uE(e),e[re]&=-73)}catch(h){throw o||ba(e),h}finally{u!==null&&(el(u,l),c&&r1(u)),um()}}function mE(n,e){for(let t=VC(n);t!==null;t=LC(t))for(let r=Ct;r<t.length;r++){let i=t[r];gE(i,e)}}function u1(n){for(let e=VC(n);e!==null;e=LC(e)){if(!(e[re]&2))continue;let t=e[_o];for(let r=0;r<t.length;r++){let i=t[r];Xb(i)}}}function d1(n,e,t){Fe(18);let r=Rn(e,n);gE(r,t),Fe(19,r[ct])}function gE(n,e){im(n)&&Ep(n,e)}function Ep(n,e){let r=n[le],i=n[re],o=n[nn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&tl(o)),s||=!1,o&&(o.dirty=!1),n[re]&=-9217,s)l1(r,n,r.template,n[ct]);else if(i&8192){fE(n),mE(n,1);let c=r.components;c!==null&&yE(n,c,1),uE(n)}}function yE(n,e,t){for(let r=0;r<e.length;r++)d1(n,e[r],t)}function h1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)pi(~i);else{let o=i,s=t[++r],c=t[++r];oA(s,o);let l=e[o];Fe(24,l),c(2,l),Fe(25,l)}}}finally{pi(-1)}}function Nm(n,e){let t=iC()?64:1088;for(n[nr].changeDetectionScheduler?.notify(e);n;){n[re]|=t;let r=fi(n);if(ql(n)&&!r)return n;n=r}return null}function vE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function _E(n,e){let t=Ct+e;if(t<n.length)return n[t]}function wu(n,e,t,r=!0){let i=e[le];if(f1(i,e,n,t),r){let s=Cp(t,n),c=e[Xe],l=c.parentNode(n[hi]);l!==null&&$R(i,n[wn],c,e,l,s)}let o=e[ca];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function wE(n,e){let t=pa(n,e);return t!==void 0&&vu(t[le],t),t}function pa(n,e){if(n.length<=Ct)return;let t=Ct+e,r=n[t];if(r){let i=r[ui];i!==null&&i!==n&&Am(i,r),e>0&&(n[t-1][gn]=r[gn]);let o=Bl(n,Ct+e);BR(r[le],r);let s=o[rr];s!==null&&s.detachView(o[le]),r[Et]=null,r[gn]=null,r[re]&=-129}return r}function f1(n,e,t,r){let i=Ct+r,o=t.length;r>0&&(t[i-1][gn]=e),r<o-Ct?(e[gn]=t[i],Nb(t,Ct+r,e)):(t.push(e),e[gn]=null),e[Et]=t;let s=e[ui];s!==null&&t!==s&&bE(s,e);let c=e[rr];c!==null&&c.insertView(n),ap(e),e[re]|=128}function bE(n,e){let t=n[_o],r=e[Et];if(Or(r))n[re]|=2;else{let i=r[Et][yn];e[yn]!==i&&(n[re]|=2)}t===null?n[_o]=[e]:t.push(e)}var ma=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[le];return eu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[ct]}set context(e){this._lView[ct]=e}get destroyed(){return xo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Et];if(or(e)){let t=e[zl],r=t?t.indexOf(this):-1;r>-1&&(pa(e,r),Bl(t,r))}this._attachedToViewContainer=!1}vu(this._lView[le],this._lView)}onDestroy(e){eC(this._lView,e)}markForCheck(){Nm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){ap(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,pE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ql(this._lView),t=this._lView[ui];t!==null&&!e&&Am(t,this._lView),cE(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=ql(this._lView),r=this._lView[ui];r!==null&&!t&&bE(r,this._lView),ap(this._lView)}};var tu=(()=>{class n{static __NG_ELEMENT_ID__=g1}return n})(),p1=tu,m1=class extends p1{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=yu(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ma(i)}};function g1(){return Om(Nt(),ye())}function Om(n,e){return n.type&4?new m1(e,n,Po(n,e)):null}function bu(n,e,t,r,i){let o=n.data[e];if(o===null)o=y1(n,e,t,r,i),iA()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=JM();o.injectorIndex=s===null?-1:s.injectorIndex}return Do(o,!0),o}function y1(n,e,t,r,i){let o=nC(),s=rC(),c=s?o:o&&o.parent,l=n.data[e]=_1(n,c,t,e,r,i);return v1(n,l,o,s),l}function v1(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function _1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return QM()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var oz=new RegExp(`^(\\d+)*(${WA}|${GA})*(.*)`);var w1=()=>null;function ga(n,e){return w1(n,e)}var b1=class{},CE=class{},Ip=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Ft(e)}.`)}},Cu=class{static NULL=new Ip},Co=class{},Lr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>C1()}return n})();function C1(){let n=ye(),e=Nt(),t=Rn(e.index,n);return(Or(t)?t:n)[Xe]}var E1=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}return n})();var qf={},Tp=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=uu(r);let i=this.injector.get(e,qf,r);return i!==qf||t===qf?i:this.parentInjector.get(e,t,r)}};function cb(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=ep(i,c);else if(o==2){let l=c,u=e[++s];r=ep(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Te(n,e=he.Default){let t=ye();if(t===null)return fe(n,e);let r=Nt();return bC(r,t,Pt(n),e)}function EE(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c,l=null,u=null,h=T1(s);h===null?c=s:[c,l,u]=h,D1(n,e,t,c,o,l,u)}o!==null&&r!==null&&I1(t,r,o)}function I1(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Y(-301,!1);r.push(e[i],o)}}function T1(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let c=n[s];if(s===0&&Mn(c)&&(e=c),c.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,S1(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function S1(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function x1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function D1(n,e,t,r,i,o,s){let c=r.length,l=!1;for(let y=0;y<c;y++){let g=r[y];!l&&Mn(g)&&(l=!0,x1(n,t,y)),dp(Ql(t,e),n,g.type)}O1(t,n.data.length,c);for(let y=0;y<c;y++){let g=r[y];g.providersResolver&&g.providersResolver(g)}let u=!1,h=!1,p=tE(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let y=0;y<c;y++){let g=r[y];if(t.mergedAttrs=ua(t.mergedAttrs,g.hostAttrs),A1(n,t,e,p,g),N1(p,g,i),s!==null&&s.has(g)){let[O,F]=s.get(g);t.directiveToIndex.set(g.type,[p,O+t.directiveStart,F+t.directiveStart])}else(o===null||!o.has(g))&&t.directiveToIndex.set(g.type,p);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let D=g.type.prototype;!u&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}M1(n,t,o)}function M1(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))lb(0,e,i,r),lb(1,e,i,r),db(e,r,!1);else{let o=t.get(i);ub(0,e,o,r),ub(1,e,o,r),db(e,r,!0)}}}function lb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),IE(e,o)}}function ub(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),IE(e,s)}}function IE(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function db(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Cm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let l=r[c];if(l===0){c+=4;continue}else if(l===5){c+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let h of u)if(h===e){s??=[],s.push(l,r[c+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function A1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=mo(i.type,!0)),s=new mi(o,Mn(i),Te);n.blueprint[r]=s,t[r]=s,R1(n,e,r,tE(n,t,i.hostVars,on),i)}function R1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;P1(s)!=c&&s.push(c),s.push(t,r,o)}}function P1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function N1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Mn(e)&&(t[""]=n)}}function O1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function TE(n,e,t,r,i,o,s,c){let l=e.consts,u=wo(l,s),h=bu(e,n,2,r,u);return o&&EE(e,t,h,wo(l,c),i),h.mergedAttrs=ua(h.mergedAttrs,h.attrs),h.attrs!==null&&cb(h,h.attrs,!1),h.mergedAttrs!==null&&cb(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function SE(n,e){hC(n,e),qb(e)&&n.queries.elementEnd(e)}var nu=class extends Cu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=go(e);return new ya(t,this.ngModule)}};function k1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&gu.SignalBased)!==0};return i&&(o.transform=i),o})}function V1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function L1(n,e,t){let r=e instanceof Wt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Tp(t,r):t}function F1(n){let e=n.get(Co,null);if(e===null)throw new Y(407,!1);let t=n.get(E1,null),r=n.get(bo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function j1(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return WC(e,t,t==="svg"?FM:t==="math"?jM:null)}var ya=class extends CE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=k1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=V1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=wR(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Fe(22);let o=ce(null);try{let s=this.componentDef,c=r?["ng-version","19.2.17"]:bR(this.componentDef.selectors[0]),l=Em(0,null,null,1,0,null,null,null,null,[c],null),u=L1(s,i||this.ngModule,e),h=F1(u),p=h.rendererFactory.createRenderer(null,s),y=r?TR(p,r,s.encapsulation,u):j1(s,p),g=Im(null,l,null,512|eE(s),null,null,h,p,u,null,HC(y,u,!0));g[jt]=y,lm(g);let D=null;try{let O=TE(jt,l,g,"#host",()=>[this.componentDef],!0,0);y&&(QC(p,y,O),Ca(y,g)),Sm(l,g,O),qC(l,O,g),SE(l,O),t!==void 0&&U1(O,this.ngContentSelectors,t),D=Rn(O.index,g),g[ct]=D[ct],Dm(l,g,null)}catch(O){throw D!==null&&vp(D),vp(g),O}finally{Fe(23),um()}return new Sp(this.componentType,g)}finally{ce(o)}}},Sp=class extends b1{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=rm(t[le],jt),this.location=Po(this._tNode,t),this.instance=Rn(this._tNode.index,t)[ct],this.hostView=this.changeDetectorRef=new ma(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=xm(r,i[le],i,e,t);this.previousInputValues.set(e,t);let s=Rn(r.index,i);Nm(s,1)}get injector(){return new ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function U1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ia=(()=>{class n{static __NG_ELEMENT_ID__=B1}return n})();function B1(){let n=Nt();return DE(n,ye())}var $1=Ia,xE=class extends $1{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Po(this._hostTNode,this._hostLView)}get injector(){return new ci(this._hostTNode,this._hostLView)}get parentInjector(){let e=pm(this._hostTNode,this._hostLView);if(mC(e)){let t=Kl(e,this._hostLView),r=Wl(e),i=t[le].data[r+8];return new ci(i,t)}else return new ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=hb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ga(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,fa(this._hostTNode,s)),c}createComponent(e,t,r,i,o){let s=e&&!OM(e),c;if(s)c=t;else{let D=t||{};c=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let l=s?e:new ya(go(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let O=(s?u:this.parentInjector).get(Wt,null);O&&(o=O)}let h=go(l.componentType??{}),p=ga(this._lContainer,h?.id??null),y=p?.firstChild??null,g=l.create(u,i,y,o);return this.insertImpl(g.hostView,c,fa(this._hostTNode,p)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if($M(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[Et],u=new xE(l,l[wn],l[Et]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return wu(s,i,o,r),e.attachToViewContainerRef(),Nb(Gf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=hb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=pa(this._lContainer,t);r&&(Bl(Gf(this._lContainer),t),vu(r[le],r))}detach(e){let t=this._adjustIndex(e,-1),r=pa(this._lContainer,t);return r&&Bl(Gf(this._lContainer),t)!=null?new ma(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hb(n){return n[zl]}function Gf(n){return n[zl]||(n[zl]=[])}function DE(n,e){let t,r=e[n.index];return or(r)?t=r:(t=vE(r,e,null,n),e[n.index]=t,Tm(e,t)),z1(t,e,n,r),new xE(t,n,e)}function H1(n,e){let t=n[Xe],r=t.createComment(""),i=Vn(e,n),o=t.parentNode(i);return Xl(t,o,r,t.nextSibling(i),!1),r}var z1=W1,q1=()=>!1;function G1(n,e,t){return q1(n,e,t)}function W1(n,e,t,r){if(n[hi])return;let i;t.type&8?i=An(r):i=H1(e,t),n[hi]=i}var xp=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Dp=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)km(e,t).matches!==null&&this.queries[t].setDirty()}},Mp=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=tP(e):this.predicate=e}},Ap=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Rp=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,K1(t,o)),this.matchTNodeWithReadOption(e,t,kl(t,e,o,!1,!1))}else r===tu?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,kl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===rn||i===Ia||i===tu&&t.type&4)this.addMatch(t.index,-2);else{let o=kl(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function K1(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function Q1(n,e){return n.type&11?Po(n,e):n.type&4?Om(n,e):null}function Y1(n,e,t,r){return t===-1?Q1(e,n):t===-2?Z1(n,e,r):da(n,n[le],t,e)}function Z1(n,e,t){if(t===rn)return Po(e,n);if(t===tu)return Om(e,n);if(t===Ia)return DE(e,n)}function ME(n,e,t,r){let i=e[rr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)c.push(null);else{let h=o[u];c.push(Y1(e,h,s[l+1],t.metadata.read))}}i.matches=c}return i.matches}function Pp(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=ME(n,e,i,t);for(let c=0;c<o.length;c+=2){let l=o[c];if(l>0)r.push(s[c/2]);else{let u=o[c+1],h=e[-l];for(let p=Ct;p<h.length;p++){let y=h[p];y[ui]===y[Et]&&Pp(y[le],y,u,r)}if(h[_o]!==null){let p=h[_o];for(let y=0;y<p.length;y++){let g=p[y];Pp(g[le],g,u,r)}}}}}return r}function J1(n,e){return n[rr].queries[e].queryList}function X1(n,e,t){let r=new yp((t&4)===4);return qM(n,e,r,r.destroy),(e[rr]??=new Dp).queries.push(new xp(r))-1}function eP(n,e,t,r){let i=lt();if(i.firstCreatePass){let o=Nt();nP(i,new Mp(e,t,r),o.index),rP(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return X1(i,ye(),t)}function tP(n){return n.split(",").map(e=>e.trim())}function nP(n,e,t){n.queries===null&&(n.queries=new Ap),n.queries.track(new Rp(e,t))}function rP(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function km(n,e){return n.queries.getByIndex(e)}function iP(n,e){let t=n[le],r=km(t,e);return r.crossesNgTemplate?Pp(t,n,e,[]):ME(t,n,r,e)}var va=class{},Vm=class{};var Np=class extends va{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new nu(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Vb(e);this._bootstrapComponents=JC(o.bootstrap),this._r3Injector=TC(e,t,[{provide:va,useValue:this},{provide:Cu,useValue:this.componentFactoryResolver},...r],Ft(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Op=class extends Vm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Np(this.moduleType,e,[])}};var ru=class extends va{injector;componentFactoryResolver=new nu(this);instance=null;constructor(e){super();let t=new aa([...e.providers,{provide:va,useValue:this},{provide:Cu,useValue:this.componentFactoryResolver}],e.parent||tm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Eu(n,e,t=null){return new ru({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var oP=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Fb(!1,t.type),i=r.length>0?Eu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(fe(Wt))})}return n})();function ge(n){return cu(()=>{let e=AE(n),t=W(N({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===OC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(oP).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||On.Emulated,styles:n.styles||Lt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ea("NgStandalone"),RE(t);let r=n.dependencies;return t.directiveDefs=fb(r,!1),t.pipeDefs=fb(r,!0),t.id=uP(t),t})}function sP(n){return go(n)||bM(n)}function aP(n){return n!==null}function No(n){return cu(()=>({type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function cP(n,e){if(n==null)return li;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,l;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,c=gu.None,l=null),t[o]=[r,c,l],e[o]=s}return t}function lP(n){if(n==null)return li;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function tt(n){return cu(()=>{let e=AE(n);return RE(e),e})}function AE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||li,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cP(n.inputs,e),outputs:lP(n.outputs),debugInfo:null}}function RE(n){n.features?.forEach(e=>e(n))}function fb(n,e){if(!n)return null;let t=e?CM:sP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(aP)}function uP(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function dP(n){return Object.getPrototypeOf(n.prototype).constructor}function sn(n){let e=dP(n.type),t=!0,r=[n];for(;e;){let i;if(Mn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Wf(n.inputs),s.declaredInputs=Wf(n.declaredInputs),s.outputs=Wf(n.outputs);let c=i.hostBindings;c&&gP(n,c);let l=i.viewQuery,u=i.contentQueries;if(l&&pP(n,l),u&&mP(n,u),hP(n,i),XD(n.outputs,i.outputs),Mn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(n),c===sn&&(t=!1)}}e=Object.getPrototypeOf(e)}fP(r)}function hP(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function fP(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ua(i.hostAttrs,t=ua(t,i.hostAttrs))}}function Wf(n){return n===li?{}:n===Lt?[]:n}function pP(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function mP(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function gP(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function yP(n,e,t){return n[e]=t}function vP(n,e){return n[e]}function kn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function _P(n,e,t,r){let i=kn(n,e,t);return kn(n,e+1,r)||i}function wP(n,e,t,r,i,o,s,c,l){let u=e.consts,h=bu(e,n,4,s||null,c||null);tC()&&EE(e,t,h,wo(u,l),sE),h.mergedAttrs=ua(h.mergedAttrs,h.attrs),hC(e,h);let p=h.tView=Em(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function kp(n,e,t,r,i,o,s,c,l,u){let h=t+jt,p=e.firstCreatePass?wP(h,e,n,r,i,o,s,c,l):e.data[h];Do(p,!1);let y=bP(e,n,p,t);hm()&&Rm(e,n,y,p),Ca(y,n);let g=vE(y,n,y,p);return n[h]=g,Tm(n,g),G1(g,p,n),nm(p)&&Sm(e,n,p),l!=null&&iE(n,p,u),p}function ue(n,e,t,r,i,o,s,c){let l=ye(),u=lt(),h=wo(u.consts,o);return kp(l,u,n,e,t,r,i,h,s,c),ue}var bP=CP;function CP(n,e,t,r){return fm(!0),e[Xe].createComment("")}var PE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var NE=new J("");var OE=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new Vp})}return n})(),Vp=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Oo(n){return!!n&&typeof n.then=="function"}function EP(n){return!!n&&typeof n.subscribe=="function"}var IP=new J("");var kE=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(IP,{optional:!0})??[];injector=k(Pn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=_n(this.injector,i);if(Oo(o))t.push(o);else if(EP(o)){let s=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lm=new J("");function TP(){vf(()=>{throw new Y(600,!1)})}function SP(n){return n.isBoundToModule}var xP=10;var gi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(OA);afterRenderManager=k(YA);zonelessEnabled=k(xC);rootEffectScheduler=k(OE);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new qe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(Ro).hasPendingTasks.pipe(be(t=>!t));constructor(){k(pu,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(Wt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Pn.NULL){Fe(10);let o=t instanceof CE;if(!this._injector.get(kE).done){let g="";throw new Y(405,g)}let c;o?c=t:c=this._injector.get(Cu).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=SP(c)?void 0:this._injector.get(va),u=r||c.selector,h=c.create(i,[],u,l),p=h.location.nativeElement,y=h.injector.get(NE,null);return y?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Vl(this.components,h),y?.unregisterApplication(p)}),this._loadComponent(h),Fe(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Fe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(BC.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Y(101,!1);let t=ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ce(t),this.afterTick.next(),Fe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Co,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<xP;)Fe(14),this.synchronizeOnce(),Fe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)DP(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>fu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Vl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Lm,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Vl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function DP(n,e,t,r){if(!t&&!fu(n))return;pE(n,e,t&&!r?0:1)}function _i(n,e,t,r){let i=ye(),o=Mo();if(kn(i,o,e)){let s=lt(),c=dm();NR(c,i,n,e,t,r)}return _i}function MP(n,e,t,r){return kn(n,Mo(),t)?e+po(t)+r:on}function AP(n,e,t,r,i,o){let s=nA(),c=_P(n,s,t,i);return am(2),c?e+po(t)+r+po(i)+o:on}function Rl(n,e){return n<<17|e<<2}function yi(n){return n>>17&32767}function RP(n){return(n&2)==2}function PP(n,e){return n&131071|e<<17}function Lp(n){return n|2}function Eo(n){return(n&131068)>>2}function Kf(n,e){return n&-131069|e<<2}function NP(n){return(n&1)===1}function Fp(n){return n|1}function OP(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=yi(s),l=Eo(s);n[r]=t;let u=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||wa(p,h)>0)&&(u=!0)}else h=t;if(i)if(l!==0){let y=yi(n[c+1]);n[r+1]=Rl(y,c),y!==0&&(n[y+1]=Kf(n[y+1],r)),n[c+1]=PP(n[c+1],r)}else n[r+1]=Rl(c,0),c!==0&&(n[c+1]=Kf(n[c+1],r)),c=r;else n[r+1]=Rl(l,0),c===0?c=r:n[l+1]=Kf(n[l+1],r),l=r;u&&(n[r+1]=Lp(n[r+1])),pb(n,h,r,!0),pb(n,h,r,!1),kP(e,h,n,r,o),s=Rl(c,l),o?e.classBindings=s:e.styleBindings=s}function kP(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&wa(o,e)>=0&&(t[r+1]=Fp(t[r+1]))}function pb(n,e,t,r){let i=n[t+1],o=e===null,s=r?yi(i):Eo(i),c=!1;for(;s!==0&&(c===!1||o);){let l=n[s],u=n[s+1];VP(l,e)&&(c=!0,n[s+1]=r?Fp(u):Lp(u)),s=r?yi(u):Eo(u)}c&&(n[t+1]=r?Lp(i):Fp(i))}function VP(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?wa(n,e)>=0:!1}var mn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function LP(n){return n.substring(mn.key,mn.keyEnd)}function FP(n){return jP(n),VE(n,LE(n,0,mn.textEnd))}function VE(n,e){let t=mn.textEnd;return t===e?-1:(e=mn.keyEnd=UP(n,mn.key=e,t),LE(n,e,t))}function jP(n){mn.key=0,mn.keyEnd=0,mn.value=0,mn.valueEnd=0,mn.textEnd=n.length}function LE(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function UP(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ie(n,e,t){let r=ye(),i=Mo();if(kn(r,i,e)){let o=lt(),s=dm();oE(o,s,r,n,e,r[Xe],t,!1)}return ie}function jp(n,e,t,r,i){xm(e,n,t,i?"class":"style",r)}function Kt(n,e){return $P(n,e,null,!0),Kt}function FE(n){HP(QP,BP,n,!0)}function BP(n,e){for(let t=FP(e);t>=0;t=VE(e,t))Xp(n,LP(e),!0)}function $P(n,e,t,r){let i=ye(),o=lt(),s=am(2);if(o.firstUpdatePass&&UE(o,n,s,r),e!==on&&kn(i,s,e)){let c=o.data[Ln()];BE(o,c,i,i[Xe],n,i[s+1]=ZP(e,t),r,s)}}function HP(n,e,t,r){let i=lt(),o=am(2);i.firstUpdatePass&&UE(i,null,o,r);let s=ye();if(t!==on&&kn(s,o,t)){let c=i.data[Ln()];if($E(c,r)&&!jE(i,o)){let l=r?c.classesWithoutHost:c.stylesWithoutHost;l!==null&&(t=ep(l,t||"")),jp(i,c,s,t,r)}else YP(i,c,s,s[Xe],s[o+1],s[o+1]=KP(n,e,t),r,o)}}function jE(n,e){return e>=n.expandoStartIndex}function UE(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ln()],s=jE(n,t);$E(o,r)&&e===null&&!s&&(e=!1),e=zP(i,o,e,r),OP(i,o,e,t,s,r)}}function zP(n,e,t,r){let i=aA(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Qf(null,n,e,t,r),t=_a(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Qf(i,n,e,t,r),o===null){let l=qP(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Qf(null,n,e,l[1],r),l=_a(l,e.attrs,r),GP(n,e,r,l))}else o=WP(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function qP(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Eo(r)!==0)return n[yi(r)]}function GP(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[yi(i)]=r}function WP(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=_a(r,s,t)}return _a(r,e.attrs,t)}function Qf(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=_a(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function _a(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Xp(n,s,t?!0:e[++o]))}return n===void 0?null:n}function KP(n,e,t){if(t==null||t==="")return Lt;let r=[],i=mu(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function QP(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Xp(n,r,t)}function YP(n,e,t,r,i,o,s,c){i===on&&(i=Lt);let l=0,u=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let y=l<i.length?i[l+1]:void 0,g=u<o.length?o[u+1]:void 0,D=null,O;h===p?(l+=2,u+=2,y!==g&&(D=p,O=g)):p===null||h!==null&&h<p?(l+=2,D=h):(u+=2,D=p,O=g),D!==null&&BE(n,e,t,r,D,O,s,c),h=l<i.length?i[l]:null,p=u<o.length?o[u]:null}}function BE(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let l=n.data,u=l[c+1],h=NP(u)?mb(l,e,t,i,Eo(u),s):void 0;if(!iu(h)){iu(o)||RP(u)&&(o=mb(l,null,t,i,c,s));let p=Yb(Ln(),t);XR(r,s,p,i,o)}}function mb(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let l=n[i],u=Array.isArray(l),h=u?l[1]:l,p=h===null,y=t[i+1];y===on&&(y=p?Lt:void 0);let g=p?Ff(y,r):h===r?y:void 0;if(u&&!iu(g)&&(g=Ff(l,r)),iu(g)&&(c=g,s))return c;let D=n[i+1];i=s?yi(D):Eo(D)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(c=Ff(l,r))}return c}function iu(n){return n!==void 0}function ZP(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ft(mu(n)))),n}function $E(n,e){return(n.flags&(e?8:16))!==0}var Up=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Yf(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function JP(n,e,t){let r,i,o=0,s=n.length-1,c=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let u=n.at(o),h=e[o],p=Yf(o,u,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let y=n.at(s),g=e[l],D=Yf(s,y,l,g,t);if(D!==0){D<0&&n.updateValue(s,g),s--,l--;continue}let O=t(o,u),F=t(s,y),z=t(o,h);if(Object.is(z,F)){let te=t(l,g);Object.is(te,O)?(n.swap(o,s),n.updateValue(s,g),l--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new ou,i??=yb(n,o,s,t),Bp(n,r,o,z))n.updateValue(o,h),o++,s++;else if(i.has(z))r.set(O,n.detach(o)),s--;else{let te=n.create(o,e[o]);n.attach(o,te),o++,s++}}for(;o<=l;)gb(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),u=l.next();for(;!u.done&&o<=s;){let h=n.at(o),p=u.value,y=Yf(o,h,o,p,t);if(y!==0)y<0&&n.updateValue(o,p),o++,u=l.next();else{r??=new ou,i??=yb(n,o,s,t);let g=t(o,p);if(Bp(n,r,o,g))n.updateValue(o,p),o++,s++,u=l.next();else if(!i.has(g))n.attach(o,n.create(o,p)),o++,s++,u=l.next();else{let D=t(o,h);r.set(D,n.detach(o)),s--}}}for(;!u.done;)gb(n,r,t,n.length,u.value),u=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function Bp(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function gb(n,e,t,r,i){if(Bp(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function yb(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var ou=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ee(n,e){Ea("NgControlFlow");let t=ye(),r=Mo(),i=t[r]!==on?t[r]:-1,o=i!==-1?su(t,jt+i):void 0,s=0;if(kn(t,r,n)){let c=ce(null);try{if(o!==void 0&&wE(o,s),n!==-1){let l=jt+n,u=su(t,l),h=qp(t[le],l),p=ga(u,h.tView.ssrId),y=yu(t,h,e,{dehydratedView:p});wu(u,y,s,fa(h,p))}}finally{ce(c)}}else if(o!==void 0){let c=_E(o,s);c!==void 0&&(c[ct]=e)}}var $p=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ct}};var Hp=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function It(n,e,t,r,i,o,s,c,l,u,h,p,y){Ea("NgControlFlow");let g=ye(),D=lt(),O=l!==void 0,F=ye(),z=c?s.bind(F[yn][ct]):s,te=new Hp(O,z);F[jt+n]=te,kp(g,D,n+1,e,t,r,i,wo(D.consts,o)),O&&kp(g,D,n+2,l,u,h,p,wo(D.consts,y))}var zp=class extends Up{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ct}at(e){return this.getLView(e)[ct].$implicit}attach(e,t){let r=t[ca];this.needsIndexUpdate||=e!==this.length,wu(this.lContainer,t,e,fa(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,XP(this.lContainer,e)}create(e,t){let r=ga(this.lContainer,this.templateTNode.tView.ssrId),i=yu(this.hostLView,this.templateTNode,new $p(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){vu(e[le],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[ct].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ct].$index=e}getLView(e){return eN(this.lContainer,e)}};function Tt(n){let e=ce(null),t=Ln();try{let r=ye(),i=r[le],o=r[t],s=t+1,c=su(r,s);if(o.liveCollection===void 0){let u=qp(i,s);o.liveCollection=new zp(c,r,u)}else o.liveCollection.reset();let l=o.liveCollection;if(JP(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let u=Mo(),h=l.length===0;if(kn(r,u,h)){let p=t+2,y=su(r,p);if(h){let g=qp(i,p),D=ga(y,g.tView.ssrId),O=yu(r,g,void 0,{dehydratedView:D});wu(y,O,0,fa(g,D))}else wE(y,0)}}}finally{ce(e)}}function su(n,e){return n[e]}function XP(n,e){return pa(n,e)}function eN(n,e){return _E(n,e)}function qp(n,e){return rm(n,e)}function v(n,e,t,r){let i=ye(),o=lt(),s=jt+n,c=i[Xe],l=o.firstCreatePass?TE(s,o,i,e,sE,tC(),t,r):o.data[s],u=tN(o,i,l,c,e,n);i[s]=u;let h=nm(l);return Do(l,!0),QC(c,u,l),!aE(l)&&hm()&&Rm(o,i,u,l),(GM()===0||h)&&Ca(u,i),WM(),h&&(Sm(o,i,l),qC(o,l,i)),r!==null&&iE(i,l),v}function _(){let n=Nt();rC()?XM():(n=n.parent,Do(n,!1));let e=n;YM(e)&&ZM(),KM();let t=lt();return t.firstCreatePass&&SE(t,e),e.classesWithoutHost!=null&&fA(e)&&jp(t,e,ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&pA(e)&&jp(t,e,ye(),e.stylesWithoutHost,!1),_}function We(n,e,t,r){return v(n,e,t,r),_(),We}var tN=(n,e,t,r,i,o)=>(fm(!0),WC(r,i,uA()));function Se(){return ye()}var au="en-US";var nN=au;function rN(n){typeof n=="string"&&(nN=n.toLowerCase().replace(/_/g,"-"))}function vb(n,e,t){return function r(i){if(i===Function)return t;let o=So(n)?Rn(n.index,e):e;Nm(o,5);let s=e[ct],c=_b(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)c=_b(e,s,l,i)&&c,l=l.__ngNextListenerFn__;return c}}function _b(n,e,t,r){let i=ce(null);try{return Fe(6,e,t),t(r)!==!1}catch(o){return iN(n,o),!1}finally{Fe(7,e,t),ce(i)}}function iN(n,e){let t=n[vo],r=t?t.get(Nn,null):null;r&&r.handleError(e)}function wb(n,e,t,r,i,o){let s=e[t],c=e[le],u=c.data[t].outputs[r],h=s[u],p=c.firstCreatePass?sm(c):null,y=om(e),g=h.subscribe(o),D=y.length;y.push(o,g),p&&p.push(i,n.index,D,-(D+1))}function $(n,e,t,r){let i=ye(),o=lt(),s=Nt();return HE(o,i,i[Xe],s,n,e,r),$}function oN(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[Hl],l=i[o+2];return c.length>l?c[l]:null}typeof s=="string"&&(o+=2)}return null}function HE(n,e,t,r,i,o,s){let c=nm(r),u=n.firstCreatePass?sm(n):null,h=om(e),p=!0;if(r.type&3||s){let y=Vn(r,e),g=s?s(y):y,D=h.length,O=s?z=>s(An(z[r.index])):r.index,F=null;if(!s&&c&&(F=oN(n,e,i,r.index)),F!==null){let z=F.__ngLastListenerFn__||F;z.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,p=!1}else{o=vb(r,e,o),JA(e,g,i,o);let z=t.listen(g,i,o);h.push(o,z),u&&u.push(i,O,D,D+1)}}else o=vb(r,e,o);if(p){let y=r.outputs?.[i],g=r.hostDirectiveOutputs?.[i];if(g&&g.length)for(let D=0;D<g.length;D+=2){let O=g[D],F=g[D+1];wb(r,e,O,F,i,o)}if(y&&y.length)for(let D of y)wb(r,e,D,i,i,o)}}function P(n=1){return lA(n)}function zE(n,e,t,r){eP(n,e,t,r)}function qE(n){let e=ye(),t=lt(),r=oC();cm(r+1);let i=km(t,r);if(n.dirty&&BM(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=iP(e,r);n.reset(o,LA),n.notifyOnChanges()}return!0}return!1}function GE(){return J1(ye(),oC())}function E(n,e=""){let t=ye(),r=lt(),i=n+jt,o=r.firstCreatePass?bu(r,i,1,e,null):r.data[i],s=sN(r,t,o,e,n);t[i]=s,hm()&&Rm(r,t,s,o),Do(o,!1)}var sN=(n,e,t,r,i)=>(fm(!0),iR(e[Xe],r));function Ae(n){return St("",n,""),Ae}function St(n,e,t){let r=ye(),i=MP(r,n,e,t);return i!==on&&WE(r,Ln(),i),St}function wi(n,e,t,r,i){let o=ye(),s=AP(o,n,e,t,r,i);return s!==on&&WE(o,Ln(),s),wi}function WE(n,e,t){let r=Yb(e,n);oR(n[Xe],r,t)}function xe(n,e,t){PC(e)&&(e=e());let r=ye(),i=Mo();if(kn(r,i,e)){let o=lt(),s=dm();oE(o,s,r,n,e,r[Xe],t,!1)}return xe}function Re(n,e){let t=PC(n);return t&&n.set(e),t}function De(n,e){let t=ye(),r=lt(),i=Nt();return HE(r,t,t[Xe],i,n,e),De}var KE={};function ko(n){let e=lt(),t=ye(),r=n+jt,i=bu(e,r,128,null,null);return Do(i,!1),Zb(e,t,r,KE),ko}function QE(n){Ea("NgLet");let e=lt(),t=ye(),r=Ln();return Zb(e,t,r,n),n}function YE(n){let e=eA(),t=UM(e,jt+n);if(t===KE)throw new Y(314,!1);return t}function aN(n,e,t){let r=lt();if(r.firstCreatePass){let i=Mn(n);Gp(t,r.data,r.blueprint,i,!0),Gp(e,r.data,r.blueprint,i,!1)}}function Gp(n,e,t,r,i){if(n=Pt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Gp(n[o],e,t,r,i);else{let o=lt(),s=ye(),c=Nt(),l=yo(n)?n:Pt(n.provide),u=Bb(n),h=c.providerIndexes&1048575,p=c.directiveStart,y=c.providerIndexes>>20;if(yo(n)||!n.multi){let g=new mi(u,i,Te),D=Jf(l,e,i?h:h+y,p);D===-1?(dp(Ql(c,s),o,l),Zf(o,n,e.length),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(g),s.push(g)):(t[D]=g,s[D]=g)}else{let g=Jf(l,e,h+y,p),D=Jf(l,e,h,h+y),O=g>=0&&t[g],F=D>=0&&t[D];if(i&&!F||!i&&!O){dp(Ql(c,s),o,l);let z=uN(i?lN:cN,t.length,i,r,u);!i&&F&&(t[D].providerFactory=z),Zf(o,n,e.length,0),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(z),s.push(z)}else{let z=ZE(t[i?D:g],u,!i&&r);Zf(o,n,g>-1?g:D,z)}!i&&r&&F&&t[D].componentProviders++}}}function Zf(n,e,t,r){let i=yo(e),o=xM(e);if(i||o){let l=(o?Pt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,l]):u[h+1].push(r,l)}else u.push(t,l)}}}function ZE(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Jf(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function cN(n,e,t,r,i){return Wp(this.multi,[])}function lN(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,l=da(r,r[le],this.providerFactory.index,i);s=l.slice(0,c),Wp(o,s);for(let u=c;u<l.length;u++)s.push(l[u])}else s=[],Wp(o,s);return s}function Wp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function uN(n,e,t,r,i){let o=new mi(n,t,Te);return o.multi=[],o.index=e,o.componentProviders=0,ZE(o,i,r&&!t),o}function sr(n,e=[]){return t=>{t.providersResolver=(r,i)=>aN(r,i?i(n):n,e)}}function JE(n,e,t){let r=tA()+n,i=ye();return i[r]===on?yP(i,r,t?e.call(t):e()):vP(i,r)}var Kp=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},XE=(()=>{class n{compileModuleSync(t){return new Op(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Vb(t),o=JC(i.declarations).reduce((s,c)=>{let l=go(c);return l&&s.push(new ya(l)),s},[]);return new Kp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dN=(()=>{class n{zone=k(vt);changeDetectionScheduler=k(bo);applicationRef=k(gi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new vt(W(N({},fN()),{scheduleInRootZone:t})),[{provide:vt,useFactory:n},{provide:sa,multi:!0,useFactory:()=>{let r=k(dN,{optional:!0});return()=>r.initialize()}},{provide:sa,multi:!0,useFactory:()=>{let r=k(pN);return()=>{r.initialize()}}},e===!0?{provide:DC,useValue:!0}:[],{provide:MC,useValue:t??SC}]}function fN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var pN=(()=>{class n{subscription=new Ye;initialized=!1;zone=k(vt);pendingTasks=k(Ro);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{vt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mN=(()=>{class n{appRef=k(gi);taskService=k(Ro);ngZone=k(vt);zonelessEnabled=k(xC);tracing=k(pu,{optional:!0});disableScheduling=k(DC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ye;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(MC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof mp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Jw:AC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Jw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gN(){return typeof $localize<"u"&&$localize.locale||au}var e0=new J("",{providedIn:"root",factory:()=>k(e0,he.Optional|he.SkipSelf)||gN()});var Qp=new J(""),yN=new J("");function na(n){return!n.moduleRef}function vN(n){let e=na(n)?n.r3Injector:n.moduleRef.injector,t=e.get(vt);return t.run(()=>{na(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Nn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),na(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Qp);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Qp);s.add(o),n.moduleRef.onDestroy(()=>{Vl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return wN(r,t,()=>{let o=e.get(kE);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(e0,au);if(rN(s||au),!e.get(yN,!0))return na(n)?e.get(gi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(na(n)){let l=e.get(gi);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return _N(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function _N(n,e){let t=n.injector.get(gi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}function wN(n,e,t){try{let r=t();return Oo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Ll=null;function bN(n=[],e){return Pn.create({name:e,providers:[{provide:du,useValue:"platform"},{provide:Qp,useValue:new Set([()=>Ll=null])},...n]})}function CN(n=[]){if(Ll)return Ll;let e=bN(n);return Ll=e,TP(),EN(e),e}function EN(n){let e=n.get(vm,null);_n(n,()=>{e?.forEach(t=>t())})}var Vo=(()=>{class n{static __NG_ELEMENT_ID__=IN}return n})();function IN(n){return TN(Nt(),ye(),(n&16)===16)}function TN(n,e,t){if(So(n)&&!t){let r=Rn(n.index,e);return new ma(r,r)}else if(n.type&175){let r=e[yn];return new ma(r,e)}return null}function t0(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Fe(8);try{let o=i?.injector??CN(r),s=[hN({}),{provide:bo,useExisting:mN},...t||[]],c=new ru({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return vN({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Fe(9)}}function bi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ci(n){return bf(n)}function Qt(n,e){return yf(n,e?.equal)}var Yp=class{[Xt];constructor(e){this[Xt]=e}destroy(){this[Xt].destroy()}};function Ei(n,e){!e?.injector&&NM(Ei);let t=e?.injector??k(Pn),r=e?.manualCleanup!==!0?t.get(Ao):null,i,o=t.get($C,null,{optional:!0}),s=t.get(bo);return o!==null&&!e?.forceRoot?(i=DN(o.view,s,n),r instanceof Yl&&r._lView===o.view&&(r=null)):i=MN(n,t.get(OE),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Yp(i)}var n0=W(N({},Zi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ha,run(){if(this.dirty=!1,this.hasRun&&!tl(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=Qs(this),t=Gl(!1);try{this.maybeCleanup(),this.fn(n)}finally{Gl(t),el(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),SN=W(N({},n0),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Ys(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),xN=W(N({},n0),{consumerMarkedDirty(){this.view[re]|=8192,ba(this.view),this.notifier.notify(13)},destroy(){Ys(this),this.onDestroyFn(),this.maybeCleanup(),this.view[di]?.delete(this)}});function DN(n,e,t){let r=Object.create(xN);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[di]??=new Set,n[di].add(r),r.consumerMarkedDirty(r),r}function MN(n,e,t){let r=Object.create(SN);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var xt=new J("");var o0=null;function an(){return o0}function Fm(n){o0??=n}var Ta=class{},jm=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(s0),providedIn:"platform"})}return n})();var s0=(()=>{class n extends jm{_location;_history;_doc=k(xt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return an().getBaseHref(this._doc)}onPopState(t){let r=an().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=an().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function a0(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function r0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Fr(n){return n&&n[0]!=="?"?`?${n}`:n}var Lo=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(l0),providedIn:"root"})}return n})(),c0=new J(""),l0=(()=>{class n extends Lo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return a0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Fr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Fr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Fr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(fe(jm),fe(c0,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fo=(()=>{class n{_subject=new qe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=PN(r0(i0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fr(r))}normalize(t){return n.stripTrailingSlash(RN(this._basePath,i0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Fr;static joinWithSlash=a0;static stripTrailingSlash=r0;static \u0275fac=function(r){return new(r||n)(fe(Lo))};static \u0275prov=Q({token:n,factory:()=>AN(),providedIn:"root"})}return n})();function AN(){return new Fo(fe(Lo))}function RN(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function i0(n){return n.replace(/\/index.html$/,"")}function PN(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Um(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Iu="browser",u0="server";function Bm(n){return n===Iu}function Tu(n){return n===u0}var Sa=class{};var Du=new J(""),qm=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(fe(Du),fe(vt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),xa=class{_doc;constructor(e){this._doc=e}manager},Su="ng-app-id";function d0(n){for(let e of n)e.remove()}function h0(n,e){let t=e.createElement("style");return t.textContent=n,t}function ON(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Su}="${e}"],link[${Su}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Su),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Hm(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Gm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Tu(o),ON(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,h0);r?.forEach(i=>this.addUsage(i,this.external,Hm))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(d0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])d0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,h0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Hm(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Su,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(fe(xt),fe(ym),fe(_m,8),fe(vi))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),$m={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Wm=/%COMP%/g;var p0="%COMP%",kN=`_nghost-${p0}`,VN=`_ngcontent-${p0}`,LN=!0,FN=new J("",{providedIn:"root",factory:()=>LN});function jN(n){return VN.replace(Wm,n)}function UN(n){return kN.replace(Wm,n)}function m0(n,e){return e.map(t=>t.replace(Wm,n))}var Km=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,l,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.tracingService=h,this.platformIsServer=Tu(c),this.defaultRenderer=new Da(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===On.ShadowDom&&(r=W(N({},r),{encapsulation:On.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof xu?i.applyToHost(t):i instanceof Ma&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case On.Emulated:o=new xu(l,u,r,this.appId,h,s,c,p,y);break;case On.ShadowDom:return new zm(l,u,t,r,s,c,this.nonce,p,y);default:o=new Ma(l,u,r,h,s,c,p,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(fe(qm),fe(Gm),fe(ym),fe(FN),fe(xt),fe(vi),fe(vt),fe(_m),fe(pu,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Da=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS($m[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(f0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(f0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=$m[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=$m[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(kr.DashCase|kr.Important)?e.style.setProperty(t,r,i&kr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&kr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=an().getGlobalEventTarget(this.doc,e),!e))throw new Y(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function f0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var zm=class extends Da{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=m0(i.id,h);for(let y of h){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=y,this.shadowRoot.appendChild(g)}let p=i.getExternalStyles?.();if(p)for(let y of p){let g=Hm(y,o);c&&g.setAttribute("nonce",c),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ma=class extends Da{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,l,u){super(e,o,s,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?m0(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},xu=class extends Ma{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,l,u){let h=i+"-"+r.id;super(e,t,r,o,s,c,l,u,h),this.contentAttr=jN(h),this.hostAttr=UN(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Mu=class n extends Ta{supportsDOMEvents=!0;static makeCurrent(){Fm(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=BN();return t==null?null:$N(t)}resetBaseElement(){Aa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Um(document.cookie,e)}},Aa=null;function BN(){return Aa=Aa||document.head.querySelector("base"),Aa?Aa.getAttribute("href"):null}function $N(n){return new URL(n,document.baseURI).pathname}var HN=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),y0=(()=>{class n extends xa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(fe(xt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),g0=["alt","control","meta","shift"],zN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},v0=(()=>{class n extends xa{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>an().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),g0.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=zN[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),g0.forEach(s=>{if(s!==i){let c=qN[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(fe(xt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function Qm(n,e,t){return t0(N({rootComponent:n,platformRef:t?.platformRef},GN(e)))}function GN(n){return{appProviders:[...ZN,...n?.providers??[]],platformProviders:YN}}function WN(){Mu.makeCurrent()}function KN(){return new Nn}function QN(){return jC(document),document}var YN=[{provide:vi,useValue:Iu},{provide:vm,useValue:WN,multi:!0},{provide:xt,useFactory:QN}];var ZN=[{provide:du,useValue:"root"},{provide:Nn,useFactory:KN},{provide:Du,useClass:y0,multi:!0,deps:[xt]},{provide:Du,useClass:v0,multi:!0,deps:[xt]},Km,Gm,qm,{provide:Co,useExisting:Km},{provide:Sa,useClass:HN},[]];var _0=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(fe(xt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var de="primary",za=Symbol("RouteTitle"),eg=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Si(n){return new eg(n)}function x0(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=n[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function XN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fn(n[t],e[t]))return!1;return!0}function Fn(n,e){let t=n?tg(n):void 0,r=e?tg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!D0(n[i],e[i]))return!1;return!0}function tg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function D0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function M0(n){return n.length>0?n[n.length-1]:null}function Br(n){return Pf(n)?n:Oo(n)?Be(Promise.resolve(n)):ne(n)}var eO={exact:R0,subset:P0},A0={exact:tO,subset:nO,ignored:()=>!0};function w0(n,e,t){return eO[t.paths](n.root,e.root,t.matrixParams)&&A0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function tO(n,e){return Fn(n,e)}function R0(n,e,t){if(!Ii(n.segments,e.segments)||!Pu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!R0(n.children[r],e.children[r],t))return!1;return!0}function nO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>D0(n[t],e[t]))}function P0(n,e,t){return N0(n,e,e.segments,t)}function N0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ii(i,t)||e.hasChildren()||!Pu(i,t,r))}else if(n.segments.length===t.length){if(!Ii(n.segments,t)||!Pu(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!P0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ii(n.segments,i)||!Pu(n.segments,i,r)||!n.children[de]?!1:N0(n.children[de],e,o,r)}}function Pu(n,e,t){return e.every((r,i)=>A0[t](n[i].parameters,r.parameters))}var Un=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Pe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Si(this.queryParams),this._queryParamMap}toString(){return oO.serialize(this)}},Pe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nu(this)}},jr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Si(this.parameters),this._parameterMap}toString(){return k0(this)}};function rO(n,e){return Ii(n,e)&&n.every((t,r)=>Fn(t.parameters,e[r].parameters))}function Ii(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function iO(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===de&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==de&&(t=t.concat(e(i,r)))}),t}var qa=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new xi,providedIn:"root"})}return n})(),xi=class{parse(e){let t=new rg(e);return new Un(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ra(e.root,!0)}`,r=cO(e.queryParams),i=typeof e.fragment=="string"?`#${sO(e.fragment)}`:"";return`${t}${r}${i}`}},oO=new xi;function Nu(n){return n.segments.map(e=>k0(e)).join("/")}function Ra(n,e){if(!n.hasChildren())return Nu(n);if(e){let t=n.children[de]?Ra(n.children[de],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==de&&r.push(`${i}:${Ra(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=iO(n,(r,i)=>i===de?[Ra(n.children[de],!1)]:[`${i}:${Ra(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[de]!=null?`${Nu(n)}/${t[0]}`:`${Nu(n)}/(${t.join("//")})`}}function O0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Au(n){return O0(n).replace(/%3B/gi,";")}function sO(n){return encodeURI(n)}function ng(n){return O0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ou(n){return decodeURIComponent(n)}function b0(n){return Ou(n.replace(/\+/g,"%20"))}function k0(n){return`${ng(n.path)}${aO(n.parameters)}`}function aO(n){return Object.entries(n).map(([e,t])=>`;${ng(e)}=${ng(t)}`).join("")}function cO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Au(t)}=${Au(i)}`).join("&"):`${Au(t)}=${Au(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var lO=/^[^\/()?;#]+/;function Ym(n){let e=n.match(lO);return e?e[0]:""}var uO=/^[^\/()?;=#]+/;function dO(n){let e=n.match(uO);return e?e[0]:""}var hO=/^[^=?&#]+/;function fO(n){let e=n.match(hO);return e?e[0]:""}var pO=/^[^&#]+/;function mO(n){let e=n.match(pO);return e?e[0]:""}var rg=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[de]=new Pe(e,t)),r}parseSegment(){let e=Ym(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new jr(Ou(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=dO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ym(this.remaining);i&&(r=i,this.capture(r))}e[Ou(t)]=Ou(r)}parseQueryParam(e){let t=fO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=mO(this.remaining);s&&(r=s,this.capture(r))}let i=b0(t),o=b0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ym(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=de);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[de]:new Pe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function V0(n){return n.segments.length>0?new Pe([],{[de]:n}):n}function L0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=L0(i);if(r===de&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Pe(n.segments,e);return gO(t)}function gO(n){if(n.numberOfChildren===1&&n.children[de]){let e=n.children[de];return new Pe(n.segments.concat(e.segments),e.children)}return n}function Ur(n){return n instanceof Un}function F0(n,e,t=null,r=null){let i=j0(n);return U0(i,e,t,r)}function j0(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let c=new Pe(o.url,s);return o===n&&(e=c),c}let r=t(n.root),i=V0(r);return e??i}function U0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Zm(i,i,i,t,r);let o=yO(e);if(o.toRoot())return Zm(i,i,new Pe([],{}),t,r);let s=vO(o,i,n),c=s.processChildren?Na(s.segmentGroup,s.index,o.commands):$0(s.segmentGroup,s.index,o.commands);return Zm(i,s.segmentGroup,c,t,r)}function Vu(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ka(n){return typeof n=="object"&&n!=null&&n.outlets}function Zm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===e?s=t:s=B0(n,e,t);let c=V0(L0(s));return new Un(c,o,i)}function B0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=B0(o,e,t)}),new Pe(n.segments,r)}var Lu=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vu(r[0]))throw new Y(4003,!1);let i=r.find(ka);if(i&&i!==M0(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Lu(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Lu(t,e,r)}var Bo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function vO(n,e,t){if(n.isAbsolute)return new Bo(e,!0,0);if(!t)return new Bo(e,!1,NaN);if(t.parent===null)return new Bo(t,!0,0);let r=Vu(n.commands[0])?0:1,i=t.segments.length-1+r;return _O(t,i,n.numberOfDoubleDots)}function _O(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new Bo(r,!1,i-o)}function wO(n){return ka(n[0])?n[0].outlets:{[de]:n}}function $0(n,e,t){if(n??=new Pe([],{}),n.segments.length===0&&n.hasChildren())return Na(n,e,t);let r=bO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Pe(n.segments.slice(0,r.pathIndex),{});return o.children[de]=new Pe(n.segments.slice(r.pathIndex),n.children),Na(o,0,i)}else return r.match&&i.length===0?new Pe(n.segments,{}):r.match&&!n.hasChildren()?ig(n,e,t):r.match?Na(n,0,i):ig(n,e,t)}function Na(n,e,t){if(t.length===0)return new Pe(n.segments,{});{let r=wO(t),i={};if(Object.keys(r).some(o=>o!==de)&&n.children[de]&&n.numberOfChildren===1&&n.children[de].segments.length===0){let o=Na(n.children[de],e,t);return new Pe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=$0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Pe(n.segments,i)}}function bO(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],c=t[r];if(ka(c))break;let l=`${c}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!E0(l,u,s))return o;r+=2}else{if(!E0(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ig(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ka(o)){let l=CO(o.outlets);return new Pe(r,l)}if(i===0&&Vu(t[0])){let l=n.segments[e];r.push(new jr(l.path,C0(t[0]))),i++;continue}let s=ka(o)?o.outlets[de]:`${o}`,c=i<t.length-1?t[i+1]:null;s&&c&&Vu(c)?(r.push(new jr(s,C0(c))),i+=2):(r.push(new jr(s,{})),i++)}return new Pe(r,{})}function CO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ig(new Pe([],{}),0,r))}),e}function C0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function E0(n,e,t){return n==t.path&&Fn(e,t.parameters)}var ku="imperative",dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dt||{}),Zt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Di=class extends Zt{type=dt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},En=class extends Zt{urlAfterRedirects;type=dt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ut=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ut||{}),Va=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Va||{}),jn=class extends Zt{reason;code;type=dt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ar=class extends Zt{reason;code;type=dt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ho=class extends Zt{error;target;type=dt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},La=class extends Zt{urlAfterRedirects;state;type=dt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fu=class extends Zt{urlAfterRedirects;state;type=dt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ju=class extends Zt{urlAfterRedirects;state;shouldActivate;type=dt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Uu=class extends Zt{urlAfterRedirects;state;type=dt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bu=class extends Zt{urlAfterRedirects;state;type=dt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$u=class{route;type=dt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hu=class{route;type=dt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zu=class{snapshot;type=dt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qu=class{snapshot;type=dt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gu=class{snapshot;type=dt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wu=class{snapshot;type=dt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Fa=class{},zo=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function EO(n,e){return n.providers&&!n._injector&&(n._injector=Eu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Cn(n){return n.outlet||de}function IO(n,e){let t=n.filter(r=>Cn(r)===e);return t.push(...n.filter(r=>Cn(r)!==e)),t}function Ga(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ku=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ga(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Wo(this.rootInjector)}},Wo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ku(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(fe(Wt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qu=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=og(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=og(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=sg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sg(e,this._root).map(t=>t.value)}};function og(n,e){if(n===e.value)return e;for(let t of e.children){let r=og(n,t);if(r)return r}return null}function sg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=sg(n,t);if(r.length)return r.unshift(e),r}return[]}var Yt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Uo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ja=class extends Qu{snapshot;constructor(e,t){super(e),this.snapshot=t,pg(this,e)}toString(){return this.snapshot.toString()}};function H0(n){let e=TO(n),t=new gt([new jr("",{})]),r=new gt({}),i=new gt({}),o=new gt({}),s=new gt(""),c=new cr(t,r,o,s,i,de,n,e.root);return c.snapshot=e.root,new ja(new Yt(c,[]),e)}function TO(n){let e={},t={},r={},i="",o=new Ti([],e,r,i,t,de,n,null,{});return new Ua("",new Yt(o,[]))}var cr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(be(u=>u[za]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(be(e=>Si(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(be(e=>Si(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yu(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),i?.data),n._resolvedData)}:r={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&q0(i)&&(r.resolve[za]=i.title),r}var Ti=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[za]}constructor(e,t,r,i,o,s,c,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Si(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Si(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ua=class extends Qu{url;constructor(e,t){super(t),this.url=e,pg(this,t)}toString(){return z0(this._root)}};function pg(n,e){e.value._routerState=n,e.children.forEach(t=>pg(n,t))}function z0(n){let e=n.children.length>0?` { ${n.children.map(z0).join(", ")} } `:"";return`${n.value}${e}`}function Jm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fn(e.params,t.params)||n.paramsSubject.next(t.params),XN(e.url,t.url)||n.urlSubject.next(t.url),Fn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ag(n,e){let t=Fn(n.params,e.params)&&rO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ag(n.parent,e.parent))}function q0(n){return typeof n.title=="string"||n.title===null}var G0=new J(""),Wa=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=de;activateEvents=new at;deactivateEvents=new at;attachEvents=new at;detachEvents=new at;routerOutletData=Ge(void 0);parentContexts=k(Wo);location=k(Ia);changeDetector=k(Vo);inputBinder=k(ed,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new cg(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Vr]})}return n})(),cg=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===cr?this.route:e===Wo?this.childContexts:e===G0?this.outletData:this.parent.get(e,t)}},ed=new J("");var mg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ge({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&We(0,"router-outlet")},dependencies:[Wa],encapsulation:2})}return n})();function gg(n){let e=n.children&&n.children.map(gg),t=e?W(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==de&&(t.component=mg),t}function SO(n,e,t){let r=Ba(n,e._root,t?t._root:void 0);return new ja(r,e)}function Ba(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=xO(n,e,t);return new Yt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Ba(n,c)),s}}let r=DO(e.value),i=e.children.map(o=>Ba(n,o));return new Yt(r,i)}}function xO(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ba(n,r,i);return Ba(n,r)})}function DO(n){return new cr(new gt(n.url),new gt(n.params),new gt(n.queryParams),new gt(n.fragment),new gt(n.data),n.outlet,n.component,n)}var qo=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},W0="ngNavigationCancelingError";function Zu(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ur(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=K0(!1,Ut.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function K0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[W0]=!0,t.cancellationCode=e,t}function MO(n){return Q0(n)&&Ur(n.url)}function Q0(n){return!!n&&n[W0]}var AO=(n,e,t,r)=>be(i=>(new lg(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),lg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Jm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Uo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Uo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Uo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Uo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Wu(o.value.snapshot))}),e.children.length&&this.forwardEvent(new qu(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Jm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),Jm(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ju=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$o=class{component;route;constructor(e,t){this.component=e,this.route=t}};function RO(n,e,t){let r=n._root,i=e?e._root:null;return Pa(r,i,t,[r.value])}function PO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ko(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Sb(n)?n:e.get(n):r}function Pa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Uo(e);return n.children.forEach(s=>{NO(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Oa(c,t.getContext(s),i)),i}function NO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=OO(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Ju(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Pa(n,e,c?c.children:null,r,i):Pa(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new $o(c.outlet.component,s))}else s&&Oa(e,c,i),i.canActivateChecks.push(new Ju(r)),o.component?Pa(n,null,c?c.children:null,r,i):Pa(n,null,t,r,i);return i}function OO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ii(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ii(n.url,e.url)||!Fn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ag(n,e)||!Fn(n.queryParams,e.queryParams);case"paramsChange":default:return!ag(n,e)}}function Oa(n,e,t){let r=Uo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Oa(s,e.children.getContext(o),t):Oa(s,null,t):Oa(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new $o(e.outlet.component,i)):t.canDeactivateChecks.push(new $o(null,i)):t.canDeactivateChecks.push(new $o(null,i))}function Ka(n){return typeof n=="function"}function kO(n){return typeof n=="boolean"}function VO(n){return n&&Ka(n.canLoad)}function LO(n){return n&&Ka(n.canActivate)}function FO(n){return n&&Ka(n.canActivateChild)}function jO(n){return n&&Ka(n.canDeactivate)}function UO(n){return n&&Ka(n.canMatch)}function Y0(n){return n instanceof Jn||n?.name==="EmptyError"}var Ru=Symbol("INITIAL_VALUE");function Go(){return fn(n=>xl(n.map(e=>e.pipe(er(1),Vf(Ru)))).pipe(be(e=>{for(let t of e)if(t!==!0){if(t===Ru)return Ru;if(t===!1||BO(t))return t}return!0}),en(e=>e!==Ru),er(1)))}function BO(n){return Ur(n)||n instanceof qo}function $O(n,e){return Je(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ne(W(N({},t),{guardsResult:!0})):HO(s,r,i,n).pipe(Je(c=>c&&kO(c)?zO(r,o,n,e):ne(c)),be(c=>W(N({},t),{guardsResult:c})))})}function HO(n,e,t,r){return Be(n).pipe(Je(i=>QO(i.component,i.route,t,e,r)),tr(i=>i!==!0,!0))}function zO(n,e,t,r){return Be(e).pipe(si(i=>ao(GO(i.route.parent,r),qO(i.route,r),KO(n,i.path,t),WO(n,i.route,t))),tr(i=>i!==!0,!0))}function qO(n,e){return n!==null&&e&&e(new Gu(n)),ne(!0)}function GO(n,e){return n!==null&&e&&e(new zu(n)),ne(!0)}function WO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(o=>Dl(()=>{let s=Ga(e)??t,c=Ko(o,s),l=LO(c)?c.canActivate(e,n):_n(s,()=>c(e,n));return Br(l).pipe(tr())}));return ne(i).pipe(Go())}function KO(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>PO(s)).filter(s=>s!==null).map(s=>Dl(()=>{let c=s.guards.map(l=>{let u=Ga(s.node)??t,h=Ko(l,u),p=FO(h)?h.canActivateChild(r,n):_n(u,()=>h(r,n));return Br(p).pipe(tr())});return ne(c).pipe(Go())}));return ne(o).pipe(Go())}function QO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ne(!0);let s=o.map(c=>{let l=Ga(e)??i,u=Ko(c,l),h=jO(u)?u.canDeactivate(n,e,t,r):_n(l,()=>u(n,e,t,r));return Br(h).pipe(tr())});return ne(s).pipe(Go())}function YO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let o=i.map(s=>{let c=Ko(s,n),l=VO(c)?c.canLoad(e,t):_n(n,()=>c(e,t));return Br(l)});return ne(o).pipe(Go(),Z0(r))}function Z0(n){return Df(yt(e=>{if(typeof e!="boolean")throw Zu(n,e)}),be(e=>e===!0))}function ZO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let o=i.map(s=>{let c=Ko(s,n),l=UO(c)?c.canMatch(e,t):_n(n,()=>c(e,t));return Br(l)});return ne(o).pipe(Go(),Z0(r))}var $a=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ha=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function jo(n){return oo(new $a(n))}function JO(n){return oo(new Y(4e3,!1))}function XO(n){return oo(K0(!1,Ut.GuardRejected))}var ug=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[de])return JO(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let c=t,{queryParams:l,fragment:u,routeConfig:h,url:p,outlet:y,params:g,data:D,title:O}=i,F=_n(o,()=>c({params:g,data:D,queryParams:l,fragment:u,routeConfig:h,url:p,outlet:y,title:O}));if(F instanceof Un)throw new Ha(F);t=F}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ha(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Un(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([c,l])=>{s[c]=this.createSegmentGroup(e,l,r,i)}),new Pe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},dg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ek(n,e,t,r,i){let o=J0(n,e,t);return o.matched?(r=EO(e,r),ZO(r,e,t,i).pipe(be(s=>s===!0?o:N({},dg)))):ne(o)}function J0(n,e,t){if(e.path==="**")return tk(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},dg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||x0)(t,n,e);if(!i)return N({},dg);let o={};Object.entries(i.posParams??{}).forEach(([c,l])=>{o[c]=l.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function tk(n){return{matched:!0,parameters:n.length>0?M0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function I0(n,e,t,r){return t.length>0&&ik(n,t,r)?{segmentGroup:new Pe(e,rk(r,new Pe(t,n.children))),slicedSegments:[]}:t.length===0&&ok(n,t,r)?{segmentGroup:new Pe(n.segments,nk(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Pe(n.segments,n.children),slicedSegments:t}}function nk(n,e,t,r){let i={};for(let o of t)if(td(n,e,o)&&!r[Cn(o)]){let s=new Pe([],{});i[Cn(o)]=s}return N(N({},r),i)}function rk(n,e){let t={};t[de]=e;for(let r of n)if(r.path===""&&Cn(r)!==de){let i=new Pe([],{});t[Cn(r)]=i}return t}function ik(n,e,t){return t.some(r=>td(n,e,r)&&Cn(r)!==de)}function ok(n,e,t){return t.some(r=>td(n,e,r))}function td(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function sk(n,e,t){return e.length===0&&!n.children[t]}var hg=class{};function ak(n,e,t,r,i,o,s="emptyOnly"){return new fg(n,e,t,r,i,s,o).recognize()}var ck=31,fg=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new ug(this.urlSerializer,this.urlTree)}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=I0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(be(({children:t,rootSnapshot:r})=>{let i=new Yt(r,t),o=new Ua("",i),s=F0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ti([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,t).pipe(be(r=>({children:r,rootSnapshot:t})),Xn(r=>{if(r instanceof Ha)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $a?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(be(s=>s instanceof Yt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Be(o).pipe(si(s=>{let c=r.children[s],l=IO(t,s);return this.processSegmentGroup(e,l,c,s,i)}),kf((s,c)=>(s.push(...c),s)),Pr(null),Of(),Je(s=>{if(s===null)return jo(r);let c=X0(s);return lk(c),ne(c)}))}processSegment(e,t,r,i,o,s,c){return Be(t).pipe(si(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,c).pipe(Xn(u=>{if(u instanceof $a)return ne(null);throw u}))),tr(l=>!!l),Xn(l=>{if(Y0(l))return sk(r,i,o)?ne(new hg):jo(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,c,l){return Cn(r)!==s&&(s===de||!td(i,o,r))?jo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):jo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,c){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=J0(t,i,o);if(!l)return jo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ck&&(this.allowRedirects=!1));let g=new Ti(o,u,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,T0(i),Cn(i),i.component??i._loadedComponent??null,i,S0(i)),D=Yu(g,c,this.paramsInheritanceStrategy);g.params=Object.freeze(D.params),g.data=Object.freeze(D.data);let O=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,g,e);return this.applyRedirects.lineralizeSegments(i,O).pipe(Je(F=>this.processSegment(e,r,t,F.concat(y),s,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let c=ek(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(fn(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(fn(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:g}=l,D=new Ti(y,p,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,T0(r),Cn(r),r.component??r._loadedComponent??null,r,S0(r)),O=Yu(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(O.params),D.data=Object.freeze(O.data);let{segmentGroup:F,slicedSegments:z}=I0(t,y,g,u);if(z.length===0&&F.hasChildren())return this.processChildren(h,u,F,D).pipe(be(Me=>new Yt(D,Me)));if(u.length===0&&z.length===0)return ne(new Yt(D,[]));let te=Cn(r)===o;return this.processSegment(h,u,F,z,te?de:o,!0,D).pipe(be(Me=>new Yt(D,Me instanceof Yt?[Me]:[])))}))):jo(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):YO(e,t,r,this.urlSerializer).pipe(Je(i=>i?this.configLoader.loadChildren(e,t).pipe(yt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):XO(t))):ne({routes:[],injector:e})}};function lk(n){n.sort((e,t)=>e.value.outlet===de?-1:t.value.outlet===de?1:e.value.outlet.localeCompare(t.value.outlet))}function uk(n){let e=n.value.routeConfig;return e&&e.path===""}function X0(n){let e=[],t=new Set;for(let r of n){if(!uk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=X0(r.children);e.push(new Yt(r.value,i))}return e.filter(r=>!t.has(r))}function T0(n){return n.data||{}}function S0(n){return n.resolve||{}}function dk(n,e,t,r,i,o){return Je(s=>ak(n,e,t,r,s.extractedUrl,i,o).pipe(be(({state:c,tree:l})=>W(N({},s),{targetSnapshot:c,urlAfterRedirects:l}))))}function hk(n,e){return Je(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of eI(l))s.add(u);let c=0;return Be(s).pipe(si(l=>o.has(l)?fk(l,r,n,e):(l.data=Yu(l,l.parent,n).resolve,ne(void 0))),yt(()=>c++),co(1),Je(l=>c===s.size?ne(t):kt))})}function eI(n){let e=n.children.map(t=>eI(t)).flat();return[n,...e]}function fk(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!q0(i)&&(o[za]=i.title),pk(o,n,e,r).pipe(be(s=>(n._resolvedData=s,n.data=Yu(n,n.parent,t).resolve,null)))}function pk(n,e,t,r){let i=tg(n);if(i.length===0)return ne({});let o={};return Be(i).pipe(Je(s=>mk(n[s],e,t,r).pipe(tr(),yt(c=>{if(c instanceof qo)throw Zu(new xi,c);o[s]=c}))),co(1),be(()=>o),Xn(s=>Y0(s)?kt:oo(s)))}function mk(n,e,t,r){let i=Ga(e)??r,o=Ko(n,i),s=o.resolve?o.resolve(e,t):_n(i,()=>o(e,t));return Br(s)}function Xm(n){return fn(e=>{let t=n(e);return t?Be(t).pipe(be(()=>e)):ne(e)})}var yg=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===de);return r}getResolvedTitleForRoute(t){return t.data[za]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(tI),providedIn:"root"})}return n})(),tI=(()=>{class n extends yg{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(fe(_0))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qa=new J("",{providedIn:"root",factory:()=>({})}),Ya=new J(""),nI=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(XE);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Br(t.loadComponent()).pipe(be(iI),yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ta(()=>{this.componentLoaders.delete(t)})),i=new io(r,()=>new qe).pipe(ro());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=rI(r,this.compiler,t,this.onLoadEndListener).pipe(ta(()=>{this.childrenLoaders.delete(r)})),s=new io(o,()=>new qe).pipe(ro());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rI(n,e,t,r){return Br(n.loadChildren()).pipe(be(iI),Je(i=>i instanceof Vm||Array.isArray(i)?ne(i):Be(e.compileModuleAsync(i))),be(i=>{r&&r(n);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(t).injector,s=o.get(Ya,[],{optional:!0,self:!0}).flat()),{routes:s.map(gg),injector:o}}))}function gk(n){return n&&typeof n=="object"&&"default"in n}function iI(n){return gk(n)?n.default:n}var nd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(yk),providedIn:"root"})}return n})(),yk=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oI=new J("");var sI=new J(""),aI=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new qe;transitionAbortSubject=new qe;configLoader=k(nI);environmentInjector=k(Wt);destroyRef=k(Ao);urlSerializer=k(qa);rootContexts=k(Wo);location=k(Fo);inputBindingEnabled=k(ed,{optional:!0})!==null;titleStrategy=k(yg);options=k(Qa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(nd);createViewTransition=k(oI,{optional:!0});navigationErrorHandler=k(sI,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ne(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new $u(i)),r=i=>this.events.next(new Hu(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(W(N({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new gt(null),this.transitions.pipe(en(r=>r!==null),fn(r=>{let i=!1,o=!1;return ne(r).pipe(fn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ut.SupersededByNewNavigation),kt;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?W(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload"){let u="";return this.events.next(new ar(s.id,this.urlSerializer.serialize(s.rawUrl),u,Va.IgnoredSameUrlNavigation)),s.resolve(!1),kt}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ne(s).pipe(fn(u=>(this.events.next(new Di(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?kt:Promise.resolve(u))),dk(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),yt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=W(N({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new La(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:h,source:p,restoredState:y,extras:g}=s,D=new Di(u,this.urlSerializer.serialize(h),p,y);this.events.next(D);let O=H0(this.rootComponentType).snapshot;return this.currentTransition=r=W(N({},s),{targetSnapshot:O,urlAfterRedirects:h,extras:W(N({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,ne(r)}else{let u="";return this.events.next(new ar(s.id,this.urlSerializer.serialize(s.extractedUrl),u,Va.IgnoredByUrlHandlingStrategy)),s.resolve(!1),kt}}),yt(s=>{let c=new Fu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),be(s=>(this.currentTransition=r=W(N({},s),{guards:RO(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),$O(this.environmentInjector,s=>this.events.next(s)),yt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Zu(this.urlSerializer,s.guardsResult);let c=new ju(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(c)}),en(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Ut.GuardRejected),!1)),Xm(s=>{if(s.guards.canActivateChecks.length!==0)return ne(s).pipe(yt(c=>{let l=new Uu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),fn(c=>{let l=!1;return ne(c).pipe(hk(this.paramsInheritanceStrategy,this.environmentInjector),yt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",Ut.NoDataFromResolver)}}))}),yt(c=>{let l=new Bu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),Xm(s=>{let c=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(yt(h=>{l.component=h}),be(()=>{})));for(let h of l.children)u.push(...c(h));return u};return xl(c(s.targetSnapshot.root)).pipe(Pr(null),er(1))}),Xm(()=>this.afterPreactivation()),fn(()=>{let{currentSnapshot:s,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,s.root,c.root);return l?Be(l).pipe(be(()=>r)):ne(r)}),be(s=>{let c=SO(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=W(N({},s),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),yt(()=>{this.events.next(new Fa)}),AO(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),er(1),yt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new En(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Lf(this.transitionAbortSubject.pipe(yt(s=>{throw s}))),ta(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Ut.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xn(s=>{if(this.destroyed)return r.resolve(!1),kt;if(o=!0,Q0(s))this.events.next(new jn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),MO(s)?this.events.next(new zo(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Ho(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let l=_n(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof qo){let{message:u,cancellationCode:h}=Zu(this.urlSerializer,l);this.events.next(new jn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,h)),this.events.next(new zo(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),s}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return kt}))}))}cancelNavigationTransition(t,r,i){let o=new jn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vk(n){return n!==ku}var cI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(_k),providedIn:"root"})}return n})(),Xu=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},_k=(()=>{class n extends Xu{static \u0275fac=(()=>{let t;return function(i){return(t||(t=bn(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lI=(()=>{class n{urlSerializer=k(qa);options=k(Qa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Fo);urlHandlingStrategy=k(nd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Un;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Un?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=H0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(wk),providedIn:"root"})}return n})(),wk=(()=>{class n extends lI{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Di?this.updateStateMemento():t instanceof ar?this.commitTransition(r):t instanceof La?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fa?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof jn&&(t.code===Ut.GuardRejected||t.code===Ut.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ho?this.restoreHistory(r,!0):t instanceof En&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let c=this.browserPageId,l=N(N({},s),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=N(N({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bn(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vg(n,e){n.events.pipe(en(t=>t instanceof En||t instanceof jn||t instanceof Ho||t instanceof ar),be(t=>t instanceof En||t instanceof ar?0:(t instanceof jn?t.code===Ut.Redirect||t.code===Ut.SupersededByNewNavigation:!1)?2:1),en(t=>t!==2),er(1)).subscribe(()=>{e()})}var bk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ck={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(PE);stateManager=k(lI);options=k(Qa,{optional:!0})||{};pendingTasks=k(Ro);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(aI);urlSerializer=k(qa);location=k(Fo);urlHandlingStrategy=k(nd);_events=new qe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(cI);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Ya,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(ed,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ye;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof jn&&r.code!==Ut.Redirect&&r.code!==Ut.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof En)this.navigated=!0;else if(r instanceof zo){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=N({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||vk(i.source)},s);this.scheduleNavigation(c,ku,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Ik(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ku,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=N({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(gg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=j0(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return U0(p,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ur(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ku,null,r)}navigate(t,r={skipLocationChange:!1}){return Ek(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=N({},bk):r===!1?i=N({},Ck):i=r,Ur(t))return w0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return w0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,l,u;s?(c=s.resolve,l=s.reject,u=s.promise):u=new Promise((p,y)=>{c=p,l=y});let h=this.pendingTasks.add();return vg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ek(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}function Ik(n){return!(n instanceof Fa)&&!(n instanceof zo)}var Yo=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new qe;constructor(t,r,i,o,s,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=c;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof En&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ur(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:YC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ur(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Te(Qo),Te(cr),IC("tabindex"),Te(Lr),Te(rn),Te(Lo))};static \u0275dir=tt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&$("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&_i("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",bi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",bi],replaceUrl:[2,"replaceUrl","replaceUrl",bi],routerLink:"routerLink"},features:[Vr]})}return n})(),_g=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new at;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof En&&this.update()})}ngAfterContentInit(){ne(this.links.changes,ne(null)).pipe(so()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Be(t).pipe(so()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Sk(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Te(Qo),Te(rn),Te(Lr),Te(Vo),Te(Yo,8))};static \u0275dir=tt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&zE(o,Yo,5),r&2){let s;qE(s=GE())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Vr]})}return n})();function Sk(n){return!!n.paths}var xk=new J("");function wg(n,...e){return Lb([{provide:Ya,multi:!0,useValue:n},[],{provide:cr,useFactory:Dk,deps:[Qo]},{provide:Lm,multi:!0,useFactory:Mk},e.map(t=>t.\u0275providers)])}function Dk(n){return n.routerState.root}function Mk(){let n=k(Pn);return e=>{let t=n.get(gi);if(e!==t.components[0])return;let r=n.get(Qo),i=n.get(Ak);n.get(Rk)===1&&r.initialNavigation(),n.get(Pk,null,he.Optional)?.setUpPreloading(),n.get(xk,null,he.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Ak=new J("",{factory:()=>new qe}),Rk=new J("",{providedIn:"root",factory:()=>1});var Pk=new J("");var rd=class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-logo"]],decls:10,vars:0,consts:[[1,"logo-container"],[1,"logo-text"],[1,"logo-e"],[1,"logo-ampersand"],[1,"logo-d"],[1,"logo-subtitle"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"span",2),E(3,"E"),_(),v(4,"span",3),E(5,"&"),_(),v(6,"span",4),E(7,"D"),_()(),v(8,"div",5),E(9,"Hospitality"),_()())},styles:[".logo-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.125rem}.logo-text[_ngcontent-%COMP%]{display:flex;align-items:baseline;font-size:1.5rem;font-weight:700;line-height:1;color:var(--color-text-primary)}.logo-e[_ngcontent-%COMP%]{color:var(--color-primary)}.logo-ampersand[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-weight:400;margin:0 .125rem}.logo-d[_ngcontent-%COMP%]{color:#ec4899}.logo-subtitle[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:var(--color-text-secondary);letter-spacing:.05em;text-transform:uppercase}"],changeDetection:0})}};var uI=()=>{};var fI=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Nk=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},pI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,y=(c&15)<<2|u>>6,g=u&63;l||(g=64,s||(y=64)),r.push(t[h],t[p],t[y],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Nk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||u==null||p==null)throw new bg;let y=o<<2|c>>4;if(r.push(y),u!==64){let g=c<<4&240|u>>2;if(r.push(g),p!==64){let D=u<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},bg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ok=function(n){let e=fI(n);return pI.encodeByteArray(e,!0)},Ja=function(n){return Ok(n).replace(/\./g,"")},mI=function(n){try{return pI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var kk=()=>gI().__FIREBASE_DEFAULTS__,Vk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Lk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&mI(n[1]);return e&&JSON.parse(e)},Cg=()=>{try{return uI()||kk()||Vk()||Lk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Fk=n=>Cg()?.emulatorHosts?.[n],yI=n=>{let e=Fk(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Eg=()=>Cg()?.config;var id=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function od(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function vI(n){return L(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function _I(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=N({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ja(JSON.stringify(t)),Ja(JSON.stringify(s)),""].join(".")}var Za={};function jk(){let n={prod:[],emulator:[]};for(let e of Object.keys(Za))Za[e]?n.emulator.push(e):n.prod.push(e);return n}function Uk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var dI=!1;function wI(n,e){if(typeof window>"u"||typeof document>"u"||!od(window.location.host)||Za[n]===e||Za[n]||dI)return;Za[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",o=jk().prod.length>0;function s(){let y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function l(y,g){y.setAttribute("width","24"),y.setAttribute("id",g),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function u(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{dI=!0,s()},y}function h(y,g){y.setAttribute("id",g),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=Uk(r),g=t("text"),D=document.getElementById(g)||document.createElement("span"),O=t("learnmore"),F=document.getElementById(O)||document.createElement("a"),z=t("preprendIcon"),te=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let Me=y.element;c(Me),h(F,O);let zt=u();l(te,z),Me.append(te,D,F,zt),document.body.appendChild(Me)}o?(D.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function bI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bk(){let n=Cg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CI(){return!Bk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ig(){try{return typeof indexedDB=="object"}catch{return!1}}function EI(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var $k="FirebaseError",lr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$k,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}},Xa=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Hk(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new lr(i,c,r)}};function Hk(n,e){return n.replace(zk,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var zk=/\{\$([^}]+)}/g;function Mi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(hI(o)&&hI(s)){if(!Mi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function hI(n){return n!==null&&typeof n=="object"}var f5=4*60*60*1e3;function Ai(n){return n&&n._delegate?n._delegate:n}var ur=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ri="[DEFAULT]";var Tg=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new id;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gk(e))try{this.getOrInitializeService({instanceIdentifier:Ri})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return L(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ri){return this.instances.has(e)}getOptions(e=Ri){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ri){return this.component?this.component.multipleInstances?e:Ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qk(n){return n===Ri?void 0:n}function Gk(n){return n.instantiationMode==="EAGER"}var sd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Tg(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Wk=[],Ee=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ee||{}),Kk={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Qk=Ee.INFO,Yk={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},Zk=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Yk[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Zo=class{constructor(e){this.name=e,this._logLevel=Qk,this._logHandler=Zk,this._userLogHandler=null,Wk.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}};var Jk=(n,e)=>e.some(t=>n instanceof t),II,TI;function Xk(){return II||(II=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eV(){return TI||(TI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var SI=new WeakMap,xg=new WeakMap,xI=new WeakMap,Sg=new WeakMap,Mg=new WeakMap;function tV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Bn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&SI.set(t,n)}).catch(()=>{}),Mg.set(e,n),e}function nV(n){if(xg.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});xg.set(n,e)}var Dg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||xI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DI(n){Dg=n(Dg)}function rV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(ad(this),e,...t);return xI.set(r,e.sort?e.sort():[e]),Bn(r)}:eV().includes(n)?function(...e){return n.apply(ad(this),e),Bn(SI.get(this))}:function(...e){return Bn(n.apply(ad(this),e))}}function iV(n){return typeof n=="function"?rV(n):(n instanceof IDBTransaction&&nV(n),Jk(n,Xk())?new Proxy(n,Dg):n)}function Bn(n){if(n instanceof IDBRequest)return tV(n);if(Sg.has(n))return Sg.get(n);let e=iV(n);return e!==n&&(Sg.set(n,e),Mg.set(e,n)),e}var ad=n=>Mg.get(n);function AI(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=Bn(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Bn(s.result),l.oldVersion,l.newVersion,Bn(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var oV=["get","getKey","getAll","getAllKeys","count"],sV=["put","add","delete","clear"],Ag=new Map;function MI(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ag.get(e))return Ag.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=sV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oV.includes(t)))return;let o=function(s,...c){return L(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),i&&l.done]))[0]})};return Ag.set(e,o),o}DI(n=>W(N({},n),{get:(e,t,r)=>MI(e,t)||n.get(e,t,r),has:(e,t)=>!!MI(e,t)||n.has(e,t)}));var Pg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function aV(n){return n.getComponent()?.type==="VERSION"}var Ng="@firebase/app",RI="0.14.7";var dr=new Zo("@firebase/app"),cV="@firebase/app-compat",lV="@firebase/analytics-compat",uV="@firebase/analytics",dV="@firebase/app-check-compat",hV="@firebase/app-check",fV="@firebase/auth",pV="@firebase/auth-compat",mV="@firebase/database",gV="@firebase/data-connect",yV="@firebase/database-compat",vV="@firebase/functions",_V="@firebase/functions-compat",wV="@firebase/installations",bV="@firebase/installations-compat",CV="@firebase/messaging",EV="@firebase/messaging-compat",IV="@firebase/performance",TV="@firebase/performance-compat",SV="@firebase/remote-config",xV="@firebase/remote-config-compat",DV="@firebase/storage",MV="@firebase/storage-compat",AV="@firebase/firestore",RV="@firebase/ai",PV="@firebase/firestore-compat",NV="firebase",OV="12.8.0";var Og="[DEFAULT]",kV={[Ng]:"fire-core",[cV]:"fire-core-compat",[uV]:"fire-analytics",[lV]:"fire-analytics-compat",[hV]:"fire-app-check",[dV]:"fire-app-check-compat",[fV]:"fire-auth",[pV]:"fire-auth-compat",[mV]:"fire-rtdb",[gV]:"fire-data-connect",[yV]:"fire-rtdb-compat",[vV]:"fire-fn",[_V]:"fire-fn-compat",[wV]:"fire-iid",[bV]:"fire-iid-compat",[CV]:"fire-fcm",[EV]:"fire-fcm-compat",[IV]:"fire-perf",[TV]:"fire-perf-compat",[SV]:"fire-rc",[xV]:"fire-rc-compat",[DV]:"fire-gcs",[MV]:"fire-gcs-compat",[AV]:"fire-fst",[PV]:"fire-fst-compat",[RV]:"fire-vertex","fire-js":"fire-js",[NV]:"fire-js-all"};var cd=new Map,VV=new Map,kg=new Map;function PI(n,e){try{n.container.addComponent(e)}catch(t){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ec(n){let e=n.name;if(kg.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;kg.set(e,n);for(let t of cd.values())PI(t,n);for(let t of VV.values())PI(t,n);return!0}function VI(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function LI(n){return n==null?!1:n.settings!==void 0}var LV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Xa("app","Firebase",LV);var Vg=class{constructor(e,t,r){this._isDeleted=!1,this._options=N({},e),this._config=N({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}};var FI=OV;function jg(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=N({name:Og,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(t||(t=Eg()),!t)throw $r.create("no-options");let o=cd.get(i);if(o){if(Mi(t,o.options)&&Mi(r,o.config))return o;throw $r.create("duplicate-app",{appName:i})}let s=new sd(i);for(let l of kg.values())s.addComponent(l);let c=new Vg(t,r,s);return cd.set(i,c),c}function jI(n=Og){let e=cd.get(n);if(!e&&n===Og&&Eg())return jg();if(!e)throw $r.create("no-app",{appName:n});return e}function Hr(n,e,t){let r=kV[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(s.join(" "));return}ec(new ur(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var FV="firebase-heartbeat-database",jV=1,tc="firebase-heartbeat-store",Rg=null;function UI(){return Rg||(Rg=AI(FV,jV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tc)}catch(t){console.warn(t)}}}}).catch(n=>{throw $r.create("idb-open",{originalErrorMessage:n.message})})),Rg}function UV(n){return L(this,null,function*(){try{let t=(yield UI()).transaction(tc),r=yield t.objectStore(tc).get(BI(n));return yield t.done,r}catch(e){if(e instanceof lr)dr.warn(e.message);else{let t=$r.create("idb-get",{originalErrorMessage:e?.message});dr.warn(t.message)}}})}function NI(n,e){return L(this,null,function*(){try{let r=(yield UI()).transaction(tc,"readwrite");yield r.objectStore(tc).put(e,BI(n)),yield r.done}catch(t){if(t instanceof lr)dr.warn(t.message);else{let r=$r.create("idb-set",{originalErrorMessage:t?.message});dr.warn(r.message)}}})}function BI(n){return`${n.name}!${n.options.appId}`}var BV=1024,$V=30,Lg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Fg(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return L(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=OI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>$V){let i=zV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){dr.warn(e)}})}getHeartbeatsHeader(){return L(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=OI(),{heartbeatsToSend:t,unsentEntries:r}=HV(this._heartbeatsCache.heartbeats),i=Ja(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return dr.warn(e),""}})}};function OI(){return new Date().toISOString().substring(0,10)}function HV(n,e=BV){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),kI(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),kI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Fg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return L(this,null,function*(){return Ig()?EI().then(()=>!0).catch(()=>!1):!1})}read(){return L(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield UV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return L(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return NI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return L(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return NI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function kI(n){return Ja(JSON.stringify({version:2,heartbeats:n})).length}function zV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function qV(n){ec(new ur("platform-logger",e=>new Pg(e),"PRIVATE")),ec(new ur("heartbeat",e=>new Lg(e),"PRIVATE")),Hr(Ng,RI,n),Hr(Ng,RI,"esm2020"),Hr("fire-js","")}qV("");var GV="firebase",WV="12.8.0";Hr(GV,WV,"app");var $I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},HI={};var hr,Ug;(function(){var n;function e(T,w){function C(){}C.prototype=w.prototype,T.F=w.prototype,T.prototype=new C,T.prototype.constructor=T,T.D=function(S,I,M){for(var b=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)b[Ot-2]=arguments[Ot];return w.prototype[I].apply(S,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,w,C){C||(C=0);let S=Array(16);if(typeof w=="string")for(var I=0;I<16;++I)S[I]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(I=0;I<16;++I)S[I]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=T.g[0],C=T.g[1],I=T.g[2];let M=T.g[3],b;b=w+(M^C&(I^M))+S[0]+3614090360&4294967295,w=C+(b<<7&4294967295|b>>>25),b=M+(I^w&(C^I))+S[1]+3905402710&4294967295,M=w+(b<<12&4294967295|b>>>20),b=I+(C^M&(w^C))+S[2]+606105819&4294967295,I=M+(b<<17&4294967295|b>>>15),b=C+(w^I&(M^w))+S[3]+3250441966&4294967295,C=I+(b<<22&4294967295|b>>>10),b=w+(M^C&(I^M))+S[4]+4118548399&4294967295,w=C+(b<<7&4294967295|b>>>25),b=M+(I^w&(C^I))+S[5]+1200080426&4294967295,M=w+(b<<12&4294967295|b>>>20),b=I+(C^M&(w^C))+S[6]+2821735955&4294967295,I=M+(b<<17&4294967295|b>>>15),b=C+(w^I&(M^w))+S[7]+4249261313&4294967295,C=I+(b<<22&4294967295|b>>>10),b=w+(M^C&(I^M))+S[8]+1770035416&4294967295,w=C+(b<<7&4294967295|b>>>25),b=M+(I^w&(C^I))+S[9]+2336552879&4294967295,M=w+(b<<12&4294967295|b>>>20),b=I+(C^M&(w^C))+S[10]+4294925233&4294967295,I=M+(b<<17&4294967295|b>>>15),b=C+(w^I&(M^w))+S[11]+2304563134&4294967295,C=I+(b<<22&4294967295|b>>>10),b=w+(M^C&(I^M))+S[12]+1804603682&4294967295,w=C+(b<<7&4294967295|b>>>25),b=M+(I^w&(C^I))+S[13]+4254626195&4294967295,M=w+(b<<12&4294967295|b>>>20),b=I+(C^M&(w^C))+S[14]+2792965006&4294967295,I=M+(b<<17&4294967295|b>>>15),b=C+(w^I&(M^w))+S[15]+1236535329&4294967295,C=I+(b<<22&4294967295|b>>>10),b=w+(I^M&(C^I))+S[1]+4129170786&4294967295,w=C+(b<<5&4294967295|b>>>27),b=M+(C^I&(w^C))+S[6]+3225465664&4294967295,M=w+(b<<9&4294967295|b>>>23),b=I+(w^C&(M^w))+S[11]+643717713&4294967295,I=M+(b<<14&4294967295|b>>>18),b=C+(M^w&(I^M))+S[0]+3921069994&4294967295,C=I+(b<<20&4294967295|b>>>12),b=w+(I^M&(C^I))+S[5]+3593408605&4294967295,w=C+(b<<5&4294967295|b>>>27),b=M+(C^I&(w^C))+S[10]+38016083&4294967295,M=w+(b<<9&4294967295|b>>>23),b=I+(w^C&(M^w))+S[15]+3634488961&4294967295,I=M+(b<<14&4294967295|b>>>18),b=C+(M^w&(I^M))+S[4]+3889429448&4294967295,C=I+(b<<20&4294967295|b>>>12),b=w+(I^M&(C^I))+S[9]+568446438&4294967295,w=C+(b<<5&4294967295|b>>>27),b=M+(C^I&(w^C))+S[14]+3275163606&4294967295,M=w+(b<<9&4294967295|b>>>23),b=I+(w^C&(M^w))+S[3]+4107603335&4294967295,I=M+(b<<14&4294967295|b>>>18),b=C+(M^w&(I^M))+S[8]+1163531501&4294967295,C=I+(b<<20&4294967295|b>>>12),b=w+(I^M&(C^I))+S[13]+2850285829&4294967295,w=C+(b<<5&4294967295|b>>>27),b=M+(C^I&(w^C))+S[2]+4243563512&4294967295,M=w+(b<<9&4294967295|b>>>23),b=I+(w^C&(M^w))+S[7]+1735328473&4294967295,I=M+(b<<14&4294967295|b>>>18),b=C+(M^w&(I^M))+S[12]+2368359562&4294967295,C=I+(b<<20&4294967295|b>>>12),b=w+(C^I^M)+S[5]+4294588738&4294967295,w=C+(b<<4&4294967295|b>>>28),b=M+(w^C^I)+S[8]+2272392833&4294967295,M=w+(b<<11&4294967295|b>>>21),b=I+(M^w^C)+S[11]+1839030562&4294967295,I=M+(b<<16&4294967295|b>>>16),b=C+(I^M^w)+S[14]+4259657740&4294967295,C=I+(b<<23&4294967295|b>>>9),b=w+(C^I^M)+S[1]+2763975236&4294967295,w=C+(b<<4&4294967295|b>>>28),b=M+(w^C^I)+S[4]+1272893353&4294967295,M=w+(b<<11&4294967295|b>>>21),b=I+(M^w^C)+S[7]+4139469664&4294967295,I=M+(b<<16&4294967295|b>>>16),b=C+(I^M^w)+S[10]+3200236656&4294967295,C=I+(b<<23&4294967295|b>>>9),b=w+(C^I^M)+S[13]+681279174&4294967295,w=C+(b<<4&4294967295|b>>>28),b=M+(w^C^I)+S[0]+3936430074&4294967295,M=w+(b<<11&4294967295|b>>>21),b=I+(M^w^C)+S[3]+3572445317&4294967295,I=M+(b<<16&4294967295|b>>>16),b=C+(I^M^w)+S[6]+76029189&4294967295,C=I+(b<<23&4294967295|b>>>9),b=w+(C^I^M)+S[9]+3654602809&4294967295,w=C+(b<<4&4294967295|b>>>28),b=M+(w^C^I)+S[12]+3873151461&4294967295,M=w+(b<<11&4294967295|b>>>21),b=I+(M^w^C)+S[15]+530742520&4294967295,I=M+(b<<16&4294967295|b>>>16),b=C+(I^M^w)+S[2]+3299628645&4294967295,C=I+(b<<23&4294967295|b>>>9),b=w+(I^(C|~M))+S[0]+4096336452&4294967295,w=C+(b<<6&4294967295|b>>>26),b=M+(C^(w|~I))+S[7]+1126891415&4294967295,M=w+(b<<10&4294967295|b>>>22),b=I+(w^(M|~C))+S[14]+2878612391&4294967295,I=M+(b<<15&4294967295|b>>>17),b=C+(M^(I|~w))+S[5]+4237533241&4294967295,C=I+(b<<21&4294967295|b>>>11),b=w+(I^(C|~M))+S[12]+1700485571&4294967295,w=C+(b<<6&4294967295|b>>>26),b=M+(C^(w|~I))+S[3]+2399980690&4294967295,M=w+(b<<10&4294967295|b>>>22),b=I+(w^(M|~C))+S[10]+4293915773&4294967295,I=M+(b<<15&4294967295|b>>>17),b=C+(M^(I|~w))+S[1]+2240044497&4294967295,C=I+(b<<21&4294967295|b>>>11),b=w+(I^(C|~M))+S[8]+1873313359&4294967295,w=C+(b<<6&4294967295|b>>>26),b=M+(C^(w|~I))+S[15]+4264355552&4294967295,M=w+(b<<10&4294967295|b>>>22),b=I+(w^(M|~C))+S[6]+2734768916&4294967295,I=M+(b<<15&4294967295|b>>>17),b=C+(M^(I|~w))+S[13]+1309151649&4294967295,C=I+(b<<21&4294967295|b>>>11),b=w+(I^(C|~M))+S[4]+4149444226&4294967295,w=C+(b<<6&4294967295|b>>>26),b=M+(C^(w|~I))+S[11]+3174756917&4294967295,M=w+(b<<10&4294967295|b>>>22),b=I+(w^(M|~C))+S[2]+718787259&4294967295,I=M+(b<<15&4294967295|b>>>17),b=C+(M^(I|~w))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(I+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.v=function(T,w){w===void 0&&(w=T.length);let C=w-this.blockSize,S=this.C,I=this.h,M=0;for(;M<w;){if(I==0)for(;M<=C;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<w;)if(S[I++]=T.charCodeAt(M++),I==this.blockSize){i(this,S),I=0;break}}else for(;M<w;)if(S[I++]=T[M++],I==this.blockSize){i(this,S),I=0;break}}this.h=I,this.o+=w},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;w=this.o*8;for(var C=T.length-8;C<T.length;++C)T[C]=w&255,w/=256;for(this.v(T),T=Array(16),w=0,C=0;C<4;++C)for(let S=0;S<32;S+=8)T[w++]=this.g[C]>>>S&255;return T};function o(T,w){var C=c;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=w(T)}function s(T,w){this.h=w;let C=[],S=!0;for(let I=T.length-1;I>=0;I--){let M=T[I]|0;S&&M==w||(C[I]=M,S=!1)}this.g=C}var c={};function l(T){return-128<=T&&T<128?o(T,function(w){return new s([w|0],w<0?-1:0)}):new s([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return F(u(-T));let w=[],C=1;for(let S=0;T>=C;S++)w[S]=T/C|0,C*=4294967296;return new s(w,0)}function h(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return F(h(T.substring(1),w));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let C=u(Math.pow(w,8)),S=p;for(let M=0;M<T.length;M+=8){var I=Math.min(8,T.length-M);let b=parseInt(T.substring(M,M+I),w);I<8?(I=u(Math.pow(w,I)),S=S.j(I).add(u(b))):(S=S.j(C),S=S.add(u(b)))}return S}var p=l(0),y=l(1),g=l(16777216);n=s.prototype,n.m=function(){if(O(this))return-F(this).m();let T=0,w=1;for(let C=0;C<this.g.length;C++){let S=this.i(C);T+=(S>=0?S:4294967296+S)*w,w*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(O(this))return"-"+F(this).toString(T);let w=u(Math.pow(T,6));var C=this;let S="";for(;;){let I=zt(C,w).g;C=z(C,I.j(w));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(T);if(C=I,D(C))return M+S;for(;M.length<6;)M="0"+M;S=M+S}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(let w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function O(T){return T.h==-1}n.l=function(T){return T=z(this,T),O(T)?-1:D(T)?0:1};function F(T){let w=T.g.length,C=[];for(let S=0;S<w;S++)C[S]=~T.g[S];return new s(C,~T.h).add(y)}n.abs=function(){return O(this)?F(this):this},n.add=function(T){let w=Math.max(this.g.length,T.g.length),C=[],S=0;for(let I=0;I<=w;I++){let M=S+(this.i(I)&65535)+(T.i(I)&65535),b=(M>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);S=b>>>16,M&=65535,b&=65535,C[I]=b<<16|M}return new s(C,C[C.length-1]&-2147483648?-1:0)};function z(T,w){return T.add(F(w))}n.j=function(T){if(D(this)||D(T))return p;if(O(this))return O(T)?F(this).j(F(T)):F(F(this).j(T));if(O(T))return F(this.j(F(T)));if(this.l(g)<0&&T.l(g)<0)return u(this.m()*T.m());let w=this.g.length+T.g.length,C=[];for(var S=0;S<2*w;S++)C[S]=0;for(S=0;S<this.g.length;S++)for(let I=0;I<T.g.length;I++){let M=this.i(S)>>>16,b=this.i(S)&65535,Ot=T.i(I)>>>16,Ir=T.i(I)&65535;C[2*S+2*I]+=b*Ir,te(C,2*S+2*I),C[2*S+2*I+1]+=M*Ir,te(C,2*S+2*I+1),C[2*S+2*I+1]+=b*Ot,te(C,2*S+2*I+1),C[2*S+2*I+2]+=M*Ot,te(C,2*S+2*I+2)}for(T=0;T<w;T++)C[T]=C[2*T+1]<<16|C[2*T];for(T=w;T<2*w;T++)C[T]=0;return new s(C,0)};function te(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function Me(T,w){this.g=T,this.h=w}function zt(T,w){if(D(w))throw Error("division by zero");if(D(T))return new Me(p,p);if(O(T))return w=zt(F(T),w),new Me(F(w.g),F(w.h));if(O(w))return w=zt(T,F(w)),new Me(F(w.g),w.h);if(T.g.length>30){if(O(T)||O(w))throw Error("slowDivide_ only works with positive integers.");for(var C=y,S=w;S.l(T)<=0;)C=dn(C),S=dn(S);var I=mt(C,1),M=mt(S,1);for(S=mt(S,2),C=mt(C,2);!D(S);){var b=M.add(S);b.l(T)<=0&&(I=I.add(C),M=b),S=mt(S,1),C=mt(C,1)}return w=z(T,I.j(w)),new Me(I,w)}for(I=p;T.l(w)>=0;){for(C=Math.max(1,Math.floor(T.m()/w.m())),S=Math.ceil(Math.log(C)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),M=u(C),b=M.j(w);O(b)||b.l(T)>0;)C-=S,M=u(C),b=M.j(w);D(M)&&(M=y),I=I.add(M),T=z(T,b)}return new Me(I,T)}n.B=function(T){return zt(this,T).h},n.and=function(T){let w=Math.max(this.g.length,T.g.length),C=[];for(let S=0;S<w;S++)C[S]=this.i(S)&T.i(S);return new s(C,this.h&T.h)},n.or=function(T){let w=Math.max(this.g.length,T.g.length),C=[];for(let S=0;S<w;S++)C[S]=this.i(S)|T.i(S);return new s(C,this.h|T.h)},n.xor=function(T){let w=Math.max(this.g.length,T.g.length),C=[];for(let S=0;S<w;S++)C[S]=this.i(S)^T.i(S);return new s(C,this.h^T.h)};function dn(T){let w=T.g.length+1,C=[];for(let S=0;S<w;S++)C[S]=T.i(S)<<1|T.i(S-1)>>>31;return new s(C,T.h)}function mt(T,w){let C=w>>5;w%=32;let S=T.g.length-C,I=[];for(let M=0;M<S;M++)I[M]=w>0?T.i(M+C)>>>w|T.i(M+C+1)<<32-w:T.i(M+C);return new s(I,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ug=HI.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,hr=HI.Integer=s}).apply(typeof $I<"u"?$I:typeof self<"u"?self:typeof window<"u"?window:{});var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={};var Bg,KV,Jo,$g,nc,ud,Hg,zg,qg;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ld=="object"&&ld];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var x=a[m];if(!(x in f))break e;f=f[x]}a=a[a.length-1],m=f[a],d=d(m),d!=m&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var f=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&f.push([m,d[m]]);return f}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function l(a,d,f){return a.call.apply(a.bind,arguments)}function u(a,d,f){return u=l,u.apply(null,arguments)}function h(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(m,x,A){for(var H=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)H[pe-2]=arguments[pe];return d.prototype[x].apply(m,H)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function g(a){let d=a.length;if(d>0){let f=Array(d);for(let m=0;m<d;m++)f[m]=a[m];return f}return[]}function D(a,d){for(let m=1;m<arguments.length;m++){let x=arguments[m];var f=typeof x;if(f=f!="object"?f:x?Array.isArray(x)?"array":f:"null",f=="array"||f=="object"&&typeof x.length=="number"){f=a.length||0;let A=x.length||0;a.length=f+A;for(let H=0;H<A;H++)a[f+H]=x[H]}else a.push(x)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function F(a){s.setTimeout(()=>{throw a},0)}function z(){var a=T;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class te{constructor(){this.h=this.g=null}add(d,f){let m=Me.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Me=new O(()=>new zt,a=>a.reset());class zt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let dn,mt=!1,T=new te,w=()=>{let a=Promise.resolve(void 0);dn=()=>{a.then(C)}};function C(){for(var a;a=z();){try{a.h.call(a.g)}catch(f){F(f)}var d=Me;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}mt=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return a}();function b(a){return/^[\s\xa0]*$/.test(a)}function Ot(a,d){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(Ot,I),Ot.prototype.init=function(a,d){let f=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Ot.Z.h.call(this)},Ot.prototype.h=function(){Ot.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ir="closure_listenable_"+(Math.random()*1e6|0),qx=0;function Gx(a,d,f,m,x){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=x,this.key=++qx,this.da=this.fa=!1}function Vc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Lc(a,d,f){for(let m in a)d.call(f,a[m],m,a)}function Wx(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function o_(a){let d={};for(let f in a)d[f]=a[f];return d}let s_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function a_(a,d){let f,m;for(let x=1;x<arguments.length;x++){m=arguments[x];for(f in m)a[f]=m[f];for(let A=0;A<s_.length;A++)f=s_[A],Object.prototype.hasOwnProperty.call(m,f)&&(a[f]=m[f])}}function Fc(a){this.src=a,this.g={},this.h=0}Fc.prototype.add=function(a,d,f,m,x){let A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);let H=Fh(a,d,m,x);return H>-1?(d=a[H],f||(d.fa=!1)):(d=new Gx(d,this.src,A,!!m,x),d.fa=f,a.push(d)),d};function Lh(a,d){let f=d.type;if(f in a.g){var m=a.g[f],x=Array.prototype.indexOf.call(m,d,void 0),A;(A=x>=0)&&Array.prototype.splice.call(m,x,1),A&&(Vc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Fh(a,d,f,m){for(let x=0;x<a.length;++x){let A=a[x];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return x}return-1}var jh="closure_lm_"+(Math.random()*1e6|0),Uh={};function c_(a,d,f,m,x){if(m&&m.once)return u_(a,d,f,m,x);if(Array.isArray(d)){for(let A=0;A<d.length;A++)c_(a,d[A],f,m,x);return null}return f=zh(f),a&&a[Ir]?a.J(d,f,c(m)?!!m.capture:!!m,x):l_(a,d,f,!1,m,x)}function l_(a,d,f,m,x,A){if(!d)throw Error("Invalid event type");let H=c(x)?!!x.capture:!!x,pe=$h(a);if(pe||(a[jh]=pe=new Fc(a)),f=pe.add(d,f,m,H,A),f.proxy)return f;if(m=Kx(),f.proxy=m,m.src=a,m.listener=f,a.addEventListener)M||(x=H),x===void 0&&(x=!1),a.addEventListener(d.toString(),m,x);else if(a.attachEvent)a.attachEvent(h_(d.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Kx(){function a(f){return d.call(a.src,a.listener,f)}let d=Qx;return a}function u_(a,d,f,m,x){if(Array.isArray(d)){for(let A=0;A<d.length;A++)u_(a,d[A],f,m,x);return null}return f=zh(f),a&&a[Ir]?a.K(d,f,c(m)?!!m.capture:!!m,x):l_(a,d,f,!0,m,x)}function d_(a,d,f,m,x){if(Array.isArray(d))for(var A=0;A<d.length;A++)d_(a,d[A],f,m,x);else m=c(m)?!!m.capture:!!m,f=zh(f),a&&a[Ir]?(a=a.i,A=String(d).toString(),A in a.g&&(d=a.g[A],f=Fh(d,f,m,x),f>-1&&(Vc(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[A],a.h--)))):a&&(a=$h(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Fh(d,f,m,x)),(f=a>-1?d[a]:null)&&Bh(f))}function Bh(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Ir])Lh(d.i,a);else{var f=a.type,m=a.proxy;d.removeEventListener?d.removeEventListener(f,m,a.capture):d.detachEvent?d.detachEvent(h_(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=$h(d))?(Lh(f,a),f.h==0&&(f.src=null,d[jh]=null)):Vc(a)}}}function h_(a){return a in Uh?Uh[a]:Uh[a]="on"+a}function Qx(a,d){if(a.da)a=!0;else{d=new Ot(d,this);let f=a.listener,m=a.ha||a.src;a.fa&&Bh(a),a=f.call(m,d)}return a}function $h(a){return a=a[jh],a instanceof Fc?a:null}var Hh="__closure_events_fn_"+(Math.random()*1e9>>>0);function zh(a){return typeof a=="function"?a:(a[Hh]||(a[Hh]=function(d){return a.handleEvent(d)}),a[Hh])}function bt(){S.call(this),this.i=new Fc(this),this.M=this,this.G=null}p(bt,S),bt.prototype[Ir]=!0,bt.prototype.removeEventListener=function(a,d,f,m){d_(this,a,d,f,m)};function At(a,d){var f,m=a.G;if(m)for(f=[];m;m=m.G)f.push(m);if(a=a.M,m=d.type||d,typeof d=="string")d=new I(d,a);else if(d instanceof I)d.target=d.target||a;else{var x=d;d=new I(m,a),a_(d,x)}x=!0;let A,H;if(f)for(H=f.length-1;H>=0;H--)A=d.g=f[H],x=jc(A,m,!0,d)&&x;if(A=d.g=a,x=jc(A,m,!0,d)&&x,x=jc(A,m,!1,d)&&x,f)for(H=0;H<f.length;H++)A=d.g=f[H],x=jc(A,m,!1,d)&&x}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let f=a.g[d];for(let m=0;m<f.length;m++)Vc(f[m]);delete a.g[d],a.h--}}this.G=null},bt.prototype.J=function(a,d,f,m){return this.i.add(String(a),d,!1,f,m)},bt.prototype.K=function(a,d,f,m){return this.i.add(String(a),d,!0,f,m)};function jc(a,d,f,m){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let x=!0;for(let A=0;A<d.length;++A){let H=d[A];if(H&&!H.da&&H.capture==f){let pe=H.listener,ot=H.ha||H.src;H.fa&&Lh(a.i,H),x=pe.call(ot,m)!==!1&&x}}return x&&!m.defaultPrevented}function Yx(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function f_(a){a.g=Yx(()=>{a.g=null,a.i&&(a.i=!1,f_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class Zx extends S{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:f_(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(a){S.call(this),this.h=a,this.g={}}p(Rs,S);var p_=[];function m_(a){Lc(a.g,function(d,f){this.g.hasOwnProperty(f)&&Bh(d)},a),a.g={}}Rs.prototype.N=function(){Rs.Z.N.call(this),m_(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qh=s.JSON.stringify,Jx=s.JSON.parse,Xx=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function g_(){}function y_(){}var Ps={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gh(){I.call(this,"d")}p(Gh,I);function Wh(){I.call(this,"c")}p(Wh,I);var Zr={},v_=null;function Uc(){return v_=v_||new bt}Zr.Ia="serverreachability";function __(a){I.call(this,Zr.Ia,a)}p(__,I);function Ns(a){let d=Uc();At(d,new __(d))}Zr.STAT_EVENT="statevent";function w_(a,d){I.call(this,Zr.STAT_EVENT,a),this.stat=d}p(w_,I);function Rt(a){let d=Uc();At(d,new w_(d,a))}Zr.Ja="timingevent";function b_(a,d){I.call(this,Zr.Ja,a),this.size=d}p(b_,I);function Os(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function ks(){this.g=!0}ks.prototype.ua=function(){this.g=!1};function eD(a,d,f,m,x,A){a.info(function(){if(a.g)if(A){var H="",pe=A.split("&");for(let Ve=0;Ve<pe.length;Ve++){var ot=pe[Ve].split("=");if(ot.length>1){let ut=ot[0];ot=ot[1];let xn=ut.split("_");H=xn.length>=2&&xn[1]=="type"?H+(ut+"="+ot+"&"):H+(ut+"=redacted&")}}}else H=null;else H=A;return"XMLHTTP REQ ("+m+") [attempt "+x+"]: "+d+`
`+f+`
`+H})}function tD(a,d,f,m,x,A,H){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+x+"]: "+d+`
`+f+`
`+A+" "+H})}function Ki(a,d,f,m){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+rD(a,f)+(m?" "+m:"")})}function nD(a,d){a.info(function(){return"TIMEOUT: "+d})}ks.prototype.info=function(){};function rD(a,d){if(!a.g)return d;if(!d)return null;try{let A=JSON.parse(d);if(A){for(a=0;a<A.length;a++)if(Array.isArray(A[a])){var f=A[a];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var x=m[0];if(x!="noop"&&x!="stop"&&x!="close")for(let H=1;H<m.length;H++)m[H]=""}}}}return qh(A)}catch{return d}}var Bc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},C_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},E_;function Kh(){}p(Kh,g_),Kh.prototype.g=function(){return new XMLHttpRequest},E_=new Kh;function Vs(a){return encodeURIComponent(String(a))}function iD(a){var d=1;a=a.split(":");let f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function Tr(a,d,f,m){this.j=a,this.i=d,this.l=f,this.S=m||1,this.V=new Rs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new I_}function I_(){this.i=null,this.g="",this.h=!1}var T_={},Qh={};function Yh(a,d,f){a.M=1,a.A=Hc(Sn(d)),a.u=f,a.R=!0,S_(a,null)}function S_(a,d){a.F=Date.now(),$c(a),a.B=Sn(a.A);var f=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),j_(f.i,"t",m),a.C=0,f=a.j.L,a.h=new I_,a.g=rw(a.j,f?d:null,!a.u),a.P>0&&(a.O=new Zx(u(a.Y,a,a.g),a.P)),d=a.V,f=a.g,m=a.ba;var x="readystatechange";Array.isArray(x)||(x&&(p_[0]=x.toString()),x=p_);for(let A=0;A<x.length;A++){let H=c_(f,x[A],m||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=a.J?o_(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Ns(),eD(a.i,a.v,a.B,a.l,a.S,a.u)}Tr.prototype.ba=function(a){a=a.target;let d=this.O;d&&Dr(a)==3?d.j():this.Y(a)},Tr.prototype.Y=function(a){try{if(a==this.g)e:{let pe=Dr(this.g),ot=this.g.ya(),Ve=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||G_(this.g)))){this.K||pe!=4||ot==7||(ot==8||Ve<=0?Ns(3):Ns(2)),Zh(this);var d=this.g.ca();this.X=d;var f=oD(this);if(this.o=d==200,tD(this.i,this.v,this.B,this.l,this.S,pe,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,x=this.g;if((m=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(m)){var A=m;break t}}A=null}if(a=A)Ki(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Jh(this,a);else{this.o=!1,this.m=3,Rt(12),Jr(this),Ls(this);break e}}if(this.R){a=!0;let ut;for(;!this.K&&this.C<f.length;)if(ut=sD(this,f),ut==Qh){pe==4&&(this.m=4,Rt(14),a=!1),Ki(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==T_){this.m=4,Rt(15),Ki(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else Ki(this.i,this.l,ut,null),Jh(this,ut);if(x_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||f.length!=0||this.h.h||(this.m=1,Rt(16),a=!1),this.o=this.o&&a,!a)Ki(this.i,this.l,f,"[Invalid Chunked Response]"),Jr(this),Ls(this);else if(f.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),sf(H),H.P=!0,Rt(11))}}else Ki(this.i,this.l,f,null),Jh(this,f);pe==4&&Jr(this),this.o&&!this.K&&(pe==4?X_(this.j,this):(this.o=!1,$c(this)))}else wD(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),Jr(this),Ls(this)}}}catch{}finally{}};function oD(a){if(!x_(a))return a.g.la();let d=G_(a.g);if(d==="")return"";let f="",m=d.length,x=Dr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Jr(a),Ls(a),"";a.h.i=new s.TextDecoder}for(let A=0;A<m;A++)a.h.h=!0,f+=a.h.i.decode(d[A],{stream:!(x&&A==m-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function x_(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function sD(a,d){var f=a.C,m=d.indexOf(`
`,f);return m==-1?Qh:(f=Number(d.substring(f,m)),isNaN(f)?T_:(m+=1,m+f>d.length?Qh:(d=d.slice(m,m+f),a.C=m+f,d)))}Tr.prototype.cancel=function(){this.K=!0,Jr(this)};function $c(a){a.T=Date.now()+a.H,D_(a,a.H)}function D_(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Os(u(a.aa,a),d)}function Zh(a){a.D&&(s.clearTimeout(a.D),a.D=null)}Tr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(nD(this.i,this.B),this.M!=2&&(Ns(),Rt(17)),Jr(this),this.m=2,Ls(this)):D_(this,this.T-a)};function Ls(a){a.j.I==0||a.K||X_(a.j,a)}function Jr(a){Zh(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,m_(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function Jh(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||Xh(f.h,a))){if(!a.L&&Xh(f.h,a)&&f.I==3){try{var m=f.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var x=m;if(x[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Qc(f),Wc(f);else break e;of(f),Rt(18)}}else f.xa=x[1],0<f.xa-f.K&&x[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Os(u(f.Va,f),6e3));R_(f.h)<=1&&f.ta&&(f.ta=void 0)}else ei(f,11)}else if((a.L||f.g==a)&&Qc(f),!b(d))for(x=f.Ba.g.parse(d),d=0;d<x.length;d++){let Ve=x[d],ut=Ve[0];if(!(ut<=f.K))if(f.K=ut,Ve=Ve[1],f.I==2)if(Ve[0]=="c"){f.M=Ve[1],f.ba=Ve[2];let xn=Ve[3];xn!=null&&(f.ka=xn,f.j.info("VER="+f.ka));let ti=Ve[4];ti!=null&&(f.za=ti,f.j.info("SVER="+f.za));let Mr=Ve[5];Mr!=null&&typeof Mr=="number"&&Mr>0&&(m=1.5*Mr,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Ar=a.g;if(Ar){let Zc=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zc){var A=m.h;A.g||Zc.indexOf("spdy")==-1&&Zc.indexOf("quic")==-1&&Zc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ef(A,A.h),A.h=null))}if(m.G){let af=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;af&&(m.wa=af,je(m.J,m.G,af))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var H=a;if(m.na=nw(m,m.L?m.ba:null,m.W),H.L){P_(m.h,H);var pe=H,ot=m.O;ot&&(pe.H=ot),pe.D&&(Zh(pe),$c(pe)),m.g=H}else Z_(m);f.i.length>0&&Kc(f)}else Ve[0]!="stop"&&Ve[0]!="close"||ei(f,7);else f.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?ei(f,7):rf(f):Ve[0]!="noop"&&f.l&&f.l.qa(Ve),f.A=0)}}Ns(4)}catch{}}var aD=class{constructor(a,d){this.g=a,this.map=d}};function M_(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function A_(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function R_(a){return a.h?1:a.g?a.g.size:0}function Xh(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function ef(a,d){a.g?a.g.add(d):a.h=d}function P_(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}M_.prototype.cancel=function(){if(this.i=N_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function N_(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.G);return d}return g(a.i)}var O_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cD(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){let m=a[f].indexOf("="),x,A=null;m>=0?(x=a[f].substring(0,m),A=a[f].substring(m+1)):x=a[f],d(x,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Sr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Sr?(this.l=a.l,Fs(this,a.j),this.o=a.o,this.g=a.g,js(this,a.u),this.h=a.h,tf(this,U_(a.i)),this.m=a.m):a&&(d=String(a).match(O_))?(this.l=!1,Fs(this,d[1]||"",!0),this.o=Us(d[2]||""),this.g=Us(d[3]||"",!0),js(this,d[4]),this.h=Us(d[5]||"",!0),tf(this,d[6]||"",!0),this.m=Us(d[7]||"")):(this.l=!1,this.i=new $s(null,this.l))}Sr.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(Bs(d,k_,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Bs(d,k_,!0),"@"),a.push(Vs(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Bs(f,f.charAt(0)=="/"?dD:uD,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Bs(f,fD)),a.join("")},Sr.prototype.resolve=function(a){let d=Sn(this),f=!!a.j;f?Fs(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var m=a.h;if(f)js(d,a.u);else if(f=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var x=d.h.lastIndexOf("/");x!=-1&&(m=d.h.slice(0,x+1)+m)}if(x=m,x==".."||x==".")m="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){m=x.lastIndexOf("/",0)==0,x=x.split("/");let A=[];for(let H=0;H<x.length;){let pe=x[H++];pe=="."?m&&H==x.length&&A.push(""):pe==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),m&&H==x.length&&A.push("")):(A.push(pe),m=!0)}m=A.join("/")}else m=x}return f?d.h=m:f=a.i.toString()!=="",f?tf(d,U_(a.i)):f=!!a.m,f&&(d.m=a.m),d};function Sn(a){return new Sr(a)}function Fs(a,d,f){a.j=f?Us(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function js(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function tf(a,d,f){d instanceof $s?(a.i=d,pD(a.i,a.l)):(f||(d=Bs(d,hD)),a.i=new $s(d,a.l))}function je(a,d,f){a.i.set(d,f)}function Hc(a){return je(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Us(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Bs(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,lD),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function lD(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var k_=/[#\/\?@]/g,uD=/[#\?:]/g,dD=/[#\?]/g,hD=/[#\?@]/g,fD=/#/g;function $s(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Xr(a){a.g||(a.g=new Map,a.h=0,a.i&&cD(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=$s.prototype,n.add=function(a,d){Xr(this),this.i=null,a=Qi(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function V_(a,d){Xr(a),d=Qi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function L_(a,d){return Xr(a),d=Qi(a,d),a.g.has(d)}n.forEach=function(a,d){Xr(this),this.g.forEach(function(f,m){f.forEach(function(x){a.call(d,x,m,this)},this)},this)};function F_(a,d){Xr(a);let f=[];if(typeof d=="string")L_(a,d)&&(f=f.concat(a.g.get(Qi(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}n.set=function(a,d){return Xr(this),this.i=null,a=Qi(this,a),L_(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=F_(this,a),a.length>0?String(a[0]):d):d};function j_(a,d,f){V_(a,d),f.length>0&&(a.i=null,a.g.set(Qi(a,d),g(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var f=d[m];let x=Vs(f);f=F_(this,f);for(let A=0;A<f.length;A++){let H=x;f[A]!==""&&(H+="="+Vs(f[A])),a.push(H)}}return this.i=a.join("&")};function U_(a){let d=new $s;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function Qi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function pD(a,d){d&&!a.j&&(Xr(a),a.i=null,a.g.forEach(function(f,m){let x=m.toLowerCase();m!=x&&(V_(this,m),j_(this,x,f))},a)),a.j=d}function mD(a,d){let f=new ks;if(s.Image){let m=new Image;m.onload=h(xr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=h(xr,f,"TestLoadImage: error",!1,d,m),m.onabort=h(xr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=h(xr,f,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else d(!1)}function gD(a,d){let f=new ks,m=new AbortController,x=setTimeout(()=>{m.abort(),xr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:m.signal}).then(A=>{clearTimeout(x),A.ok?xr(f,"TestPingServer: ok",!0,d):xr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(x),xr(f,"TestPingServer: error",!1,d)})}function xr(a,d,f,m,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),m(f)}catch{}}function yD(){this.g=new Xx}function zc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(zc,g_),zc.prototype.g=function(){return new qc(this.i,this.h)};function qc(a,d){bt.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(qc,bt),n=qc.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,zs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hs(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;B_(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function B_(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Hs(this):zs(this),this.readyState==3&&B_(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,Hs(this))},n.Na=function(a){this.g&&(this.response=a,Hs(this))},n.ga=function(){this.g&&Hs(this)};function Hs(a){a.readyState=4,a.l=null,a.j=null,a.B=null,zs(a)}n.setRequestHeader=function(a,d){this.A.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function zs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(qc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function $_(a){let d="";return Lc(a,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function nf(a,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=$_(f),typeof a=="string"?f!=null&&Vs(f):je(a,d,f))}function $e(a){bt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p($e,bt);var vD=/^https?$/i,_D=["POST","PUT"];n=$e.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():E_.g(),this.g.onreadystatechange=y(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){H_(this,A);return}if(a=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var x in m)f.set(x,m[x]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),x=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(_D,d,void 0)>=0)||m||x||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,H]of f)this.g.setRequestHeader(A,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(A){H_(this,A)}};function H_(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,z_(a),Gc(a)}function z_(a){a.A||(a.A=!0,At(a,"complete"),At(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,At(this,"complete"),At(this,"abort"),Gc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gc(this,!0)),$e.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?q_(this):this.Xa())},n.Xa=function(){q_(this)};function q_(a){if(a.h&&typeof o<"u"){if(a.v&&Dr(a)==4)setTimeout(a.Ca.bind(a),0);else if(At(a,"readystatechange"),Dr(a)==4){a.h=!1;try{let A=a.ca();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=A===0){let H=String(a.D).match(O_)[1]||null;!H&&s.self&&s.self.location&&(H=s.self.location.protocol.slice(0,-1)),m=!vD.test(H?H.toLowerCase():"")}f=m}if(f)At(a,"complete"),At(a,"success");else{a.o=6;try{var x=Dr(a)>2?a.g.statusText:""}catch{x=""}a.l=x+" ["+a.ca()+"]",z_(a)}}finally{Gc(a)}}}}function Gc(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let f=a.g;a.g=null,d||At(a,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Dr(a){return a.g?a.g.readyState:0}n.ca=function(){try{return Dr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Jx(d)}};function G_(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function wD(a){let d={};a=(a.g&&Dr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(b(a[m]))continue;var f=iD(a[m]);let x=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[x]||[];d[x]=A,A.push(f)}Wx(d,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function W_(a){this.za=0,this.i=[],this.j=new ks,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qs("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qs("baseRetryDelayMs",5e3,a),this.Za=qs("retryDelaySeedMs",1e4,a),this.Ta=qs("forwardChannelMaxRetries",2,a),this.va=qs("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new M_(a&&a.concurrentRequestLimit),this.Ba=new yD,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=W_.prototype,n.ka=8,n.I=1,n.connect=function(a,d,f,m){Rt(0),this.W=a,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=nw(this,null,this.W),Kc(this)};function rf(a){if(K_(a),a.I==3){var d=a.V++,f=Sn(a.J);if(je(f,"SID",a.M),je(f,"RID",d),je(f,"TYPE","terminate"),Gs(a,f),d=new Tr(a,a.j,d),d.M=2,d.A=Hc(Sn(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=rw(d.j,null),d.g.ea(d.A)),d.F=Date.now(),$c(d)}tw(a)}function Wc(a){a.g&&(sf(a),a.g.cancel(),a.g=null)}function K_(a){Wc(a),a.v&&(s.clearTimeout(a.v),a.v=null),Qc(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Kc(a){if(!A_(a.h)&&!a.m){a.m=!0;var d=a.Ea;dn||w(),mt||(dn(),mt=!0),T.add(d,a),a.D=0}}function bD(a,d){return R_(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Os(u(a.Ea,a,d),ew(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let x=new Tr(this,this.j,a),A=this.o;if(this.U&&(A?(A=o_(A),a_(A,this.U)):A=this.U),this.u!==null||this.R||(x.J=A,A=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Y_(this,x,d),f=Sn(this.J),je(f,"RID",a),je(f,"CVER",22),this.G&&je(f,"X-HTTP-Session-Id",this.G),Gs(this,f),A&&(this.R?d="headers="+Vs($_(A))+"&"+d:this.u&&nf(f,this.u,A)),ef(this.h,x),this.Ra&&je(f,"TYPE","init"),this.S?(je(f,"$req",d),je(f,"SID","null"),x.U=!0,Yh(x,f,null)):Yh(x,f,d),this.I=2}}else this.I==3&&(a?Q_(this,a):this.i.length==0||A_(this.h)||Q_(this))};function Q_(a,d){var f;d?f=d.l:f=a.V++;let m=Sn(a.J);je(m,"SID",a.M),je(m,"RID",f),je(m,"AID",a.K),Gs(a,m),a.u&&a.o&&nf(m,a.u,a.o),f=new Tr(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Y_(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ef(a.h,f),Yh(f,m,d)}function Gs(a,d){a.H&&Lc(a.H,function(f,m){je(d,m,f)}),a.l&&Lc({},function(f,m){je(d,m,f)})}function Y_(a,d,f){f=Math.min(a.i.length,f);let m=a.l?u(a.l.Ka,a.l,a):null;e:{var x=a.i;let pe=-1;for(;;){let ot=["count="+f];pe==-1?f>0?(pe=x[0].g,ot.push("ofs="+pe)):pe=0:ot.push("ofs="+pe);let Ve=!0;for(let ut=0;ut<f;ut++){var A=x[ut].g;let xn=x[ut].map;if(A-=pe,A<0)pe=Math.max(0,x[ut].g-100),Ve=!1;else try{A="req"+A+"_"||"";try{var H=xn instanceof Map?xn:Object.entries(xn);for(let[ti,Mr]of H){let Ar=Mr;c(Mr)&&(Ar=qh(Mr)),ot.push(A+ti+"="+encodeURIComponent(Ar))}}catch(ti){throw ot.push(A+"type="+encodeURIComponent("_badmap")),ti}}catch{m&&m(xn)}}if(Ve){H=ot.join("&");break e}}H=void 0}return a=a.i.splice(0,f),d.G=a,H}function Z_(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;dn||w(),mt||(dn(),mt=!0),T.add(d,a),a.A=0}}function of(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Os(u(a.Da,a),ew(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,J_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Os(u(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Wc(this),J_(this))};function sf(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function J_(a){a.g=new Tr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=Sn(a.na);je(d,"RID","rpc"),je(d,"SID",a.M),je(d,"AID",a.K),je(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&je(d,"TO",a.ia),je(d,"TYPE","xmlhttp"),Gs(a,d),a.u&&a.o&&nf(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Hc(Sn(d)),f.u=null,f.R=!0,S_(f,a)}n.Va=function(){this.C!=null&&(this.C=null,Wc(this),of(this),Rt(19))};function Qc(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function X_(a,d){var f=null;if(a.g==d){Qc(a),sf(a),a.g=null;var m=2}else if(Xh(a.h,d))f=d.G,P_(a.h,d),m=1;else return;if(a.I!=0){if(d.o)if(m==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var x=a.D;m=Uc(),At(m,new b_(m,f)),Kc(a)}else Z_(a);else if(x=d.m,x==3||x==0&&d.X>0||!(m==1&&bD(a,d)||m==2&&of(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),x){case 1:ei(a,5);break;case 4:ei(a,10);break;case 3:ei(a,6);break;default:ei(a,2)}}}function ew(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function ei(a,d){if(a.j.info("Error code "+d),d==2){var f=u(a.bb,a),m=a.Ua;let x=!m;m=new Sr(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Fs(m,"https"),Hc(m),x?mD(m.toString(),f):gD(m.toString(),f)}else Rt(2);a.I=0,a.l&&a.l.pa(d),tw(a),K_(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function tw(a){if(a.I=0,a.ja=[],a.l){let d=N_(a.h);(d.length!=0||a.i.length!=0)&&(D(a.ja,d),D(a.ja,a.i),a.h.i.length=0,g(a.i),a.i.length=0),a.l.oa()}}function nw(a,d,f){var m=f instanceof Sr?Sn(f):new Sr(f);if(m.g!="")d&&(m.g=d+"."+m.g),js(m,m.u);else{var x=s.location;m=x.protocol,d=d?d+"."+x.hostname:x.hostname,x=+x.port;let A=new Sr(null);m&&Fs(A,m),d&&(A.g=d),x&&js(A,x),f&&(A.h=f),m=A}return f=a.G,d=a.wa,f&&d&&je(m,f,d),je(m,"VER",a.ka),Gs(a,m),m}function rw(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new $e(new zc({ab:f})):new $e(a.ma),d.Fa(a.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function iw(){}n=iw.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Yc(){}Yc.prototype.g=function(a,d){return new qt(a,d)};function qt(a,d){bt.call(this),this.g=new W_(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!b(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Yi(this)}p(qt,bt),qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){rf(this.g)},qt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=qh(a),a=f);d.i.push(new aD(d.Ya++,a)),d.I==3&&Kc(d)},qt.prototype.N=function(){this.g.l=null,delete this.j,rf(this.g),delete this.g,qt.Z.N.call(this)};function ow(a){Gh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(ow,Gh);function sw(){Wh.call(this),this.status=1}p(sw,Wh);function Yi(a){this.g=a}p(Yi,iw),Yi.prototype.ra=function(){At(this.g,"a")},Yi.prototype.qa=function(a){At(this.g,new ow(a))},Yi.prototype.pa=function(a){At(this.g,new sw)},Yi.prototype.oa=function(){At(this.g,"b")},Yc.prototype.createWebChannel=Yc.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,qg=fr.createWebChannelTransport=function(){return new Yc},zg=fr.getStatEventTarget=function(){return Uc()},Hg=fr.Event=Zr,ud=fr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bc.NO_ERROR=0,Bc.TIMEOUT=8,Bc.HTTP_ERROR=6,nc=fr.ErrorCode=Bc,C_.COMPLETE="complete",$g=fr.EventType=C_,y_.EventType=Ps,Ps.OPEN="a",Ps.CLOSE="b",Ps.ERROR="c",Ps.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Jo=fr.WebChannel=y_,KV=fr.FetchXmlHttpFactory=zc,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,Bg=fr.XhrIo=$e}).apply(typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{});var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var vs="12.8.0";function DT(n){vs=n}var Oi=new Zo("@firebase/firestore");function Xo(){return Oi.logLevel}function q(n,...e){if(Oi.logLevel<=Ee.DEBUG){let t=e.map(Cv);Oi.debug(`Firestore (${vs}): ${n}`,...t)}}function mr(n,...e){if(Oi.logLevel<=Ee.ERROR){let t=e.map(Cv);Oi.error(`Firestore (${vs}): ${n}`,...t)}}function qr(n,...e){if(Oi.logLevel<=Ee.WARN){let t=e.map(Cv);Oi.warn(`Firestore (${vs}): ${n}`,...t)}}function Cv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function X(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,MT(n,r,t)}function MT(n,e,t){let r=`FIRESTORE (${vs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw mr(r),new Error(r)}function ke(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||MT(e,i,r)}function oe(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Hn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var yd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},vd=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ht.UNAUTHENTICATED))}shutdown(){}},Zg=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},_d=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Hn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>L(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Hn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new yd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new ht(e)}},Jg=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},Xg=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Jg(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},bd=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,LI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0,3512);let r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wd(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function QV(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ki=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=QV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function we(n,e){return n<e?-1:n>e?1:0}function ey(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return Gg(i)===Gg(o)?we(i,o):Gg(i)?1:-1}return we(n.length,e.length)}var YV=55296,ZV=57343;function Gg(n){let e=n.charCodeAt(0);return e>=YV&&e<=ZV}function ss(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var zI="__name__",Cd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&X(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return we(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):ey(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}},He=class n extends Cd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},JV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bt=class n extends Cd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return JV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zI}static keyField(){return new n([zI])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new G(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new G(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Z=class n{constructor(e){this.path=e}static fromPath(e){return new n(He.fromString(e))}static fromName(e){return new n(He.fromString(e).popFirst(5))}static empty(){return new n(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new He(e.slice()))}};function XV(n,e,t){if(!t)throw new G(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AT(n,e,t,r){if(e===!0&&r===!0)throw new G(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qI(n){if(!Z.isDocumentKey(n))throw new G(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X(12329,{type:typeof n})}function Yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Jd(n);throw new G(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ke(n,e){let t={typeString:n};return e&&(t.value=e),t}function _s(n,e){if(!RT(n))throw new G(V.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new G(V.INVALID_ARGUMENT,t);return!0}var GI=-62135596800,WI=1e6,Qe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*WI);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<GI)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WI}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_s(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-GI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Ke("string",Qe._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};var ae=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Qe(0,0))}static max(){return new n(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var cc=-1,Ed=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ed.UNKNOWN_ID=-1;function eL(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Vi(i,Z.empty(),e)}function tL(n){return new Vi(n.readTime,n.key,cc)}var Vi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),Z.empty(),cc)}static max(){return new n(ae.max(),Z.empty(),cc)}};function nL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:we(n.largestBatchId,e.largestBatchId))}var rL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ty=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ws(n){return L(this,null,function*(){if(n.code!==V.FAILED_PRECONDITION||n.message!==rL)throw n;q("LocalStore","Unexpectedly lost primary lease")})}var j=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(h=>{s[u]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function iL(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function bs(n){return n.name==="IndexedDbTransactionError"}var Ev=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),Iv=-1;function Xd(n){return n==null}function lc(n){return n===0&&1/n==-1/0}function oL(n){return typeof n=="number"&&Number.isInteger(n)&&!lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var PT="";function sL(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KI(e)),e=aL(n.get(t),e);return KI(e)}function aL(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case PT:t+="";break;default:t+=o}}return t}function KI(n){return n+PT+""}var cL="remoteDocuments",NT="owner";var OT="mutationQueues";var kT="mutations";var VT="documentMutations",lL="remoteDocumentsV14";var LT="remoteDocumentGlobal";var FT="targets";var jT="targetDocuments";var UT="targetGlobal",BT="collectionParents";var $T="clientMetadata";var HT="bundles";var zT="namedQueries";var uL="indexConfiguration";var dL="indexState";var hL="indexEntries";var qT="documentOverlays";var fL="globals";var pL=[OT,kT,VT,cL,FT,NT,UT,jT,$T,LT,BT,HT,zT],Z5=[...pL,qT],mL=[OT,kT,VT,lL,FT,NT,UT,jT,$T,LT,BT,HT,zT,qT],gL=mL,yL=[...gL,uL,dL,hL];var J5=[...yL,fL];function QI(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ze=class n{constructor(e,t){this.comparator=e,this.root=t||zn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rs(this.root,e,this.comparator,!1)}getReverseIterator(){return new rs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rs(this.root,e,this.comparator,!0)}},rs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},zn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}};zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new zn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ft=class n{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Id(this.data.getIterator())}getIteratorFrom(e){return new Id(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Id=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $n=class n{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new n([])}unionWith(e){let t=new ft(Bt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ss(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Td=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var wt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Td("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};wt.EMPTY_BYTE_STRING=new wt("");var vL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(n){if(ke(!!n,39018),typeof n=="string"){let e=0,t=vL.exec(n);if(ke(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(n.seconds),nanos:Ue(n.nanos)}}function Ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yr(n){return typeof n=="string"?wt.fromBase64String(n):wt.fromUint8Array(n)}var WT="server_timestamp",KT="__type__",QT="__previous_value__",YT="__local_write_time__";function eh(n){return(n?.mapValue?.fields||{})[KT]?.stringValue===WT}function th(n){let e=n.mapValue.fields[QT];return eh(e)?th(e):e}function uc(n){let e=gr(n.mapValue.fields[YT].timestampValue);return new Qe(e.seconds,e.nanos)}var ny=class{constructor(e,t,r,i,o,s,c,l,u,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h,this.apiKey=p}},Sd="(default)",dc=class n{constructor(e,t){this.projectId=e,this.database=t||Sd}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Sd}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function ZT(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new G(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dc(n.options.projectId,e)}var Tv="__type__",JT="__max__",dd={mapValue:{fields:{__type__:{stringValue:JT}}}},Sv="__vector__",as="value";function Gr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eh(n)?4:eS(n)?9007199254740991:XT(n)?10:11:X(28295,{value:n})}function Qn(n,e){if(n===e)return!0;let t=Gr(n);if(t!==Gr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uc(n).isEqual(uc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gr(i.timestampValue),c=gr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yr(i.bytesValue).isEqual(yr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ue(i.geoPointValue.latitude)===Ue(o.geoPointValue.latitude)&&Ue(i.geoPointValue.longitude)===Ue(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ue(i.integerValue)===Ue(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ue(i.doubleValue),c=Ue(o.doubleValue);return s===c?lc(s)===lc(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return ss(n.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(QI(s)!==QI(c))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(c[l]===void 0||!Qn(s[l],c[l])))return!1;return!0}(n,e);default:return X(52216,{left:n})}}function hc(n,e){return(n.values||[]).find(t=>Qn(t,e))!==void 0}function cs(n,e){if(n===e)return 0;let t=Gr(n),r=Gr(e);if(t!==r)return we(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Ue(o.integerValue||o.doubleValue),l=Ue(s.integerValue||s.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return YI(n.timestampValue,e.timestampValue);case 4:return YI(uc(n),uc(e));case 5:return ey(n.stringValue,e.stringValue);case 6:return function(o,s){let c=yr(o),l=yr(s);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),l=s.split("/");for(let u=0;u<c.length&&u<l.length;u++){let h=we(c[u],l[u]);if(h!==0)return h}return we(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=we(Ue(o.latitude),Ue(s.latitude));return c!==0?c:we(Ue(o.longitude),Ue(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ZI(n.arrayValue,e.arrayValue);case 10:return function(o,s){let c=o.fields||{},l=s.fields||{},u=c[as]?.arrayValue,h=l[as]?.arrayValue,p=we(u?.values?.length||0,h?.values?.length||0);return p!==0?p:ZI(u,h)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===dd.mapValue&&s===dd.mapValue)return 0;if(o===dd.mapValue)return 1;if(s===dd.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let y=ey(l[p],h[p]);if(y!==0)return y;let g=cs(c[l[p]],u[h[p]]);if(g!==0)return g}return we(l.length,h.length)}(n.mapValue,e.mapValue);default:throw X(23264,{he:t})}}function YI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return we(n,e);let t=gr(n),r=gr(e),i=we(t.seconds,r.seconds);return i!==0?i:we(t.nanos,r.nanos)}function ZI(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=cs(t[i],r[i]);if(o)return o}return we(t.length,r.length)}function ls(n){return ry(n)}function ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=ry(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ry(t.fields[s])}`;return i+"}"}(n.mapValue):X(61005,{value:n})}function pd(n){switch(Gr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=th(n);return e?16+pd(e):16;case 5:return 2*n.stringValue.length;case 6:return yr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+pd(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return zi(r.fields,(o,s)=>{i+=o.length+pd(s)}),i}(n.mapValue);default:throw X(13486,{value:n})}}function iy(n){return!!n&&"integerValue"in n}function xv(n){return!!n&&"arrayValue"in n}function JI(n){return!!n&&"nullValue"in n}function XI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function md(n){return!!n&&"mapValue"in n}function XT(n){return(n?.mapValue?.fields||{})[Tv]?.stringValue===Sv}function oc(n){if(n.geoPointValue)return{geoPointValue:N({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:N({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return zi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=oc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oc(n.arrayValue.values[t]);return e}return N({},n)}function eS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JT}var eq={mapValue:{fields:{[Tv]:{stringValue:Sv},[as]:{arrayValue:{}}}}};var ln=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!md(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(t)}setAll(e){let t=Bt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=oc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());md(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];md(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(oc(this.value))}};function tS(n){let e=[];return zi(n.fields,(t,r)=>{let i=new Bt([t]);if(md(r)){let o=tS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new $n(e)}var In=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),ln.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Li=class{constructor(e,t){this.position=e,this.inclusive=t}};function eT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Z.comparator(Z.fromName(s.referenceValue),t.key):r=cs(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function tT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qn(n.position[t],e.position[t]))return!1;return!0}var Fi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function _L(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var xd=class{},it=class n extends xd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sy(e,t,r):t==="array-contains"?new ly(e,r):t==="in"?new uy(e,r):t==="not-in"?new dy(e,r):t==="array-contains-any"?new hy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ay(e,r):new cy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cs(t,this.value)):t!==null&&Gr(this.value)===Gr(t)&&this.matchesComparison(cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Tn=class n extends xd{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return nS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function nS(n){return n.op==="and"}function rS(n){return wL(n)&&nS(n)}function wL(n){for(let e of n.filters)if(e instanceof Tn)return!1;return!0}function oy(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+ls(n.value);if(rS(n))return n.filters.map(e=>oy(e)).join(",");{let e=n.filters.map(t=>oy(t)).join(",");return`${n.op}(${e})`}}function iS(n,e){return n instanceof it?function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&Qn(r.value,i.value)}(n,e):n instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&iS(s,i.filters[c]),!0):!1}(n,e):void X(19439)}function oS(n){return n instanceof it?function(t){return`${t.field.canonicalString()} ${t.op} ${ls(t.value)}`}(n):n instanceof Tn?function(t){return t.op.toString()+" {"+t.getFilters().map(oS).join(" ,")+"}"}(n):"Filter"}var sy=class extends it{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}},ay=class extends it{constructor(e,t){super(e,"in",t),this.keys=sS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},cy=class extends it{constructor(e,t){super(e,"not-in",t),this.keys=sS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function sS(n,e){return(e.arrayValue?.values||[]).map(t=>Z.fromName(t.referenceValue))}var ly=class extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return xv(t)&&hc(t.arrayValue,this.value)}},uy=class extends it{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&hc(this.value.arrayValue,t)}},dy=class extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hc(this.value.arrayValue,t)}},hy=class extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!xv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hc(this.value.arrayValue,r))}};var fy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function nT(n,e=null,t=[],r=[],i=null,o=null,s=null){return new fy(n,e,t,r,i,o,s)}function Dv(n){let e=oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>oy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ls(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ls(r)).join(",")),e.Te=t}return e.Te}function Mv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_L(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tT(n.startAt,e.startAt)&&tT(n.endAt,e.endAt)}function py(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var us=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function bL(n,e,t,r,i,o,s,c){return new us(n,e,t,r,i,o,s,c)}function Ec(n){return new us(n)}function rT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CL(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function aS(n){return n.collectionGroup!==null}function is(n){let e=oe(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new ft(Bt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Fi(o,r))}),t.has(Bt.keyField().canonicalString())||e.Ie.push(new Fi(Bt.keyField(),r))}return e.Ie}function qn(n){let e=oe(n);return e.Ee||(e.Ee=EL(e,is(n))),e.Ee}function EL(n,e){if(n.limitType==="F")return nT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Fi(i.field,o)});let t=n.endAt?new Li(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Li(n.startAt.position,n.startAt.inclusive):null;return nT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Dd(n,e,t){return new us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nh(n,e){return Mv(qn(n),qn(e))&&n.limitType===e.limitType}function cS(n){return`${Dv(qn(n))}|lt:${n.limitType}`}function es(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>oS(i)).join(", ")}]`),Xd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ls(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ls(i)).join(",")),`Target(${r})`}(qn(n))}; limitType=${n.limitType})`}function rh(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of is(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,l){let u=eT(s,c,l);return s.inclusive?u<=0:u<0}(r.startAt,is(r),i)||r.endAt&&!function(s,c,l){let u=eT(s,c,l);return s.inclusive?u>=0:u>0}(r.endAt,is(r),i))}(n,e)}function IL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lS(n){return(e,t)=>{let r=!1;for(let i of is(n)){let o=TL(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function TL(n,e,t){let r=n.field.isKeyField()?Z.comparator(e.key,t.key):function(o,s,c){let l=s.data.field(o),u=c.data.field(o);return l!==null&&u!==null?cs(l,u):X(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:n.dir})}}var vr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return GT(this.inner)}size(){return this.innerSize}};var SL=new ze(Z.comparator);function _r(){return SL}var uS=new ze(Z.comparator);function ic(...n){let e=uS;for(let t of n)e=e.insert(t.key,t);return e}function dS(n){let e=uS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Pi(){return sc()}function hS(){return sc()}function sc(){return new vr(n=>n.toString(),(n,e)=>n.isEqual(e))}var xL=new ze(Z.comparator),DL=new ft(Z.comparator);function ve(...n){let e=DL;for(let t of n)e=e.add(t);return e}var ML=new ft(we);function AL(){return ML}function Av(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function fS(n){return{integerValue:""+n}}function RL(n,e){return oL(e)?fS(e):Av(n,e)}var ds=class{constructor(){this._=void 0}};function PL(n,e,t){return n instanceof hs?function(i,o){let s={fields:{[KT]:{stringValue:WT},[YT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&eh(o)&&(o=th(o)),o&&(s.fields[QT]=o),{mapValue:s}}(t,e):n instanceof ji?mS(n,e):n instanceof Ui?gS(n,e):function(i,o){let s=pS(i,o),c=iT(s)+iT(i.Ae);return iy(s)&&iy(i.Ae)?fS(c):Av(i.serializer,c)}(n,e)}function NL(n,e,t){return n instanceof ji?mS(n,e):n instanceof Ui?gS(n,e):t}function pS(n,e){return n instanceof fs?function(r){return iy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var hs=class extends ds{},ji=class extends ds{constructor(e){super(),this.elements=e}};function mS(n,e){let t=yS(e);for(let r of n.elements)t.some(i=>Qn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ui=class extends ds{constructor(e){super(),this.elements=e}};function gS(n,e){let t=yS(e);for(let r of n.elements)t=t.filter(i=>!Qn(i,r));return{arrayValue:{values:t}}}var fs=class extends ds{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function iT(n){return Ue(n.integerValue||n.doubleValue)}function yS(n){return xv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function OL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ji&&i instanceof ji||r instanceof Ui&&i instanceof Ui?ss(r.elements,i.elements,Qn):r instanceof fs&&i instanceof fs?Qn(r.Ae,i.Ae):r instanceof hs&&i instanceof hs}(n.transform,e.transform)}var my=class{constructor(e,t){this.version=e,this.transformResults=t}},zr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function gd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ps=class{};function vS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fc(n.key,zr.none()):new Bi(n.key,n.data,zr.none());{let t=n.data,r=ln.empty(),i=new ft(Bt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new wr(n.key,r,new $n(i.toArray()),zr.none())}}function kL(n,e,t){n instanceof Bi?function(i,o,s){let c=i.value.clone(),l=sT(i.fieldTransforms,o,s.transformResults);c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof wr?function(i,o,s){if(!gd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=sT(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(_S(i)),l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ac(n,e,t,r){return n instanceof Bi?function(o,s,c,l){if(!gd(o.precondition,s))return c;let u=o.value.clone(),h=aT(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof wr?function(o,s,c,l){if(!gd(o.precondition,s))return c;let u=aT(o.fieldTransforms,l,s),h=s.data;return h.setAll(_S(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,c){return gd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function VL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=pS(r.transform,i||null);o!=null&&(t===null&&(t=ln.empty()),t.set(r.field,o))}return t||null}function oT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ss(r,i,(o,s)=>OL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bi=class extends ps{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},wr=class extends ps{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function _S(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function sT(n,e,t){let r=new Map;ke(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,NL(s,c,t[i]))}return r}function aT(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,PL(o,s,e))}return r}var fc=class extends ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},gy=class extends ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yy=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&kL(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=hS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let l=vS(s,c);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&ss(this.mutations,e.mutations,(t,r)=>oT(t,r))&&ss(this.baseMutations,e.baseMutations,(t,r)=>oT(t,r))}},vy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return xL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var _y=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var nt,Ie;function LL(n){switch(n){case V.OK:return X(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return X(15467,{code:n})}}function wS(n){if(n===void 0)return mr("GRPC error has no .code"),V.UNKNOWN;switch(n){case nt.OK:return V.OK;case nt.CANCELLED:return V.CANCELLED;case nt.UNKNOWN:return V.UNKNOWN;case nt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case nt.INTERNAL:return V.INTERNAL;case nt.UNAVAILABLE:return V.UNAVAILABLE;case nt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case nt.NOT_FOUND:return V.NOT_FOUND;case nt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case nt.ABORTED:return V.ABORTED;case nt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case nt.DATA_LOSS:return V.DATA_LOSS;default:return X(39323,{code:n})}}(Ie=nt||(nt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var FL=null;function jL(){return new TextEncoder}var UL=new hr([4294967295,4294967295],0);function cT(n){let e=jL().encode(n),t=new Ug;return t.update(e),new Uint8Array(t.digest())}function lT(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hr([t,r],0),new hr([i,o],0)]}var by=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ni(`Invalid padding: ${t}`);if(r<0)throw new Ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(hr.fromNumber(r)));return i.compare(UL)===1&&(i=new hr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=cT(e),[r,i]=lT(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=cT(e),[r,i]=lT(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.be(s)}}be(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ni=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Md=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new ze(we),_r(),ve())}},pc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var os=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}},Ad=class{constructor(e,t){this.targetId=e,this.Ce=t}},Rd=class{constructor(e,t,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Pd=class{constructor(){this.ve=0,this.Fe=uT(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ve(),t=ve(),r=ve();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:o})}}),new pc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=uT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},Cy=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=_r(),this.He=hd(),this.Je=hd(),this.Ze=new ze(we)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(py(o))if(r===0){let s=new Z(o.path);this.et(t,s,In.newNoDocument(s,ae.min()))}else ke(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),l=c?this.ct(c,e,s):1;if(l!==0){this.it(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}FL?.lt(function(h,p,y,g,D){let O={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},F=p.unchangedNames;return F&&(O.bloomFilter={applied:D===0,hashCount:F?.hashCount??0,bitmapLength:F?.bits?.bitmap?.length??0,padding:F?.bits?.padding??0,mightContain:z=>g?.mightContain(z)??!1}),O}(s,e.Ce,this.Ge.ht(),c,l))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=yr(r).toUint8Array()}catch(l){if(l instanceof Td)return qr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new by(s,i,o)}catch(l){return qr(l instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&py(c.target)){let l=new Z(c.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,In.newNoDocument(l,e))}o.Be&&(t.set(s,o.ke()),o.Ke())}});let r=ve();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(l=>{let u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Md(e,t,this.Ze,this.je,r);return this.je=_r(),this.He=hd(),this.Je=hd(),this.Ze=new ze(we),i}Ye(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Pd,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ft(we),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ft(we),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pd),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function hd(){return new ze(Z.comparator)}function uT(){return new ze(Z.comparator)}var BL={asc:"ASCENDING",desc:"DESCENDING"},$L={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HL={and:"AND",or:"OR"},Ey=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Iy(n,e){return n.useProto3Json||Xd(e)?e:{value:e}}function Nd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zL(n,e){return Nd(n,e.toTimestamp())}function Gn(n){return ke(!!n,49232),ae.fromTimestamp(function(t){let r=gr(t);return new Qe(r.seconds,r.nanos)}(n))}function Rv(n,e){return Ty(n,e).canonicalString()}function Ty(n,e){let t=function(i){return new He(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function CS(n){let e=He.fromString(n);return ke(xS(e),10190,{key:e.toString()}),e}function Sy(n,e){return Rv(n.databaseId,e.path)}function Wg(n,e){let t=CS(e);if(t.get(1)!==n.databaseId.projectId)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(IS(t))}function ES(n,e){return Rv(n.databaseId,e)}function qL(n){let e=CS(n);return e.length===4?He.emptyPath():IS(e)}function xy(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IS(n){return ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dT(n,e,t){return{name:Sy(n,e),fields:t.value.mapValue.fields}}function GL(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(ke(h===void 0||typeof h=="string",58123),wt.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),wt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(u){let h=u.code===void 0?V.UNKNOWN:wS(u.code);return new G(h,u.message||"")}(s);t=new Rd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Wg(n,r.document.name),o=Gn(r.document.updateTime),s=r.document.createTime?Gn(r.document.createTime):ae.min(),c=new ln({mapValue:{fields:r.document.fields}}),l=In.newFoundDocument(i,o,s,c),u=r.targetIds||[],h=r.removedTargetIds||[];t=new os(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Wg(n,r.document),o=r.readTime?Gn(r.readTime):ae.min(),s=In.newNoDocument(i,o),c=r.removedTargetIds||[];t=new os([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Wg(n,r.document),o=r.removedTargetIds||[];t=new os([],o,i,null)}else{if(!("filter"in e))return X(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new wy(i,o),c=r.targetId;t=new Ad(c,s)}}return t}function WL(n,e){let t;if(e instanceof Bi)t={update:dT(n,e.key,e.value)};else if(e instanceof fc)t={delete:Sy(n,e.key)};else if(e instanceof wr)t={update:dT(n,e.key,e.data),updateMask:nF(e.fieldMask)};else{if(!(e instanceof gy))return X(16599,{dt:e.type});t={verify:Sy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof hs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ji)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ui)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof fs)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw X(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:zL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X(27497)}(n,e.precondition)),t}function KL(n,e){return n&&n.length>0?(ke(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Gn(i.updateTime):Gn(o);return s.isEqual(ae.min())&&(s=Gn(o)),new my(s,i.transformResults||[])}(t,e))):[]}function QL(n,e){return{documents:[ES(n,e.path)]}}function YL(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ES(n,i);let o=function(u){if(u.length!==0)return SS(Tn.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(y){return{field:ts(y.field),direction:XL(y.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Iy(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function ZL(n){let e=qL(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ke(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let y=TS(p);return y instanceof Tn&&rS(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(y=>function(D){return new Fi(ns(D.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(y))}(t.orderBy));let c=null;t.limit&&(c=function(p){let y;return y=typeof p=="object"?p.value:p,Xd(y)?null:y}(t.limit));let l=null;t.startAt&&(l=function(p){let y=!!p.before,g=p.values||[];return new Li(g,y)}(t.startAt));let u=null;return t.endAt&&(u=function(p){let y=!p.before,g=p.values||[];return new Li(g,y)}(t.endAt)),bL(e,i,s,o,c,"F",l,u)}function JL(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ns(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ns(t.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ns(t.unaryFilter.field);return it.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ns(t.unaryFilter.field);return it.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(n):n.fieldFilter!==void 0?function(t){return it.create(ns(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Tn.create(t.compositeFilter.filters.map(r=>TS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(t.compositeFilter.op))}(n):X(30097,{filter:n})}function XL(n){return BL[n]}function eF(n){return $L[n]}function tF(n){return HL[n]}function ts(n){return{fieldPath:n.canonicalString()}}function ns(n){return Bt.fromServerFormat(n.fieldPath)}function SS(n){return n instanceof it?function(t){if(t.op==="=="){if(XI(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NAN"}};if(JI(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(XI(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NOT_NAN"}};if(JI(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ts(t.field),op:eF(t.op),value:t.value}}}(n):n instanceof Tn?function(t){let r=t.getFilters().map(i=>SS(i));return r.length===1?r[0]:{compositeFilter:{op:tF(t.op),filters:r}}}(n):X(54877,{filter:n})}function nF(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function DS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}var mc=class n{constructor(e,t,r,i,o=ae.min(),s=ae.min(),c=wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Dy=class{constructor(e){this.yt=e}};function MS(n){let e=ZL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Dd(e,e.limit,"L"):e}var Od=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ue(e.integerValue));else if("doubleValue"in e){let r=Ue(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),lc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=gr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(yr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?eS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):XT(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):X(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=as,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ue(o)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Z.fromName(e).path.forEach(r=>{this.Ft(t,60),this.$t(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Od.Wt=new Od;var My=class{constructor(){this.Sn=new Ay}addToCollectionParentIndex(e,t){return this.Sn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Vi.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}},Ay=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ft(He.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(He.comparator)).toArray()}};var tq=new Uint8Array(0);var hT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AS=41943040,cn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(AS,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);var gc=class n{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new n(0)}static ar(){return new n(-1)}};var fT="LruGarbageCollector",rF=1048576;function pT([n,e],[t,r]){let i=we(n,t);return i===0?we(e,r):i}var Ry=class{constructor(e){this.Pr=e,this.buffer=new ft(pT),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();pT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Py=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){q(fT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>L(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){bs(t)?q(fT,"Ignoring IndexedDB error during garbage collection: ",t):yield ws(t)}yield this.Ar(3e5)}))}},Ny=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Ev.ce);let r=new Ry(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(hT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hT):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,o,s,c,l,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Xo()<=Ee.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function iF(n,e){return new Ny(n,e)}var Oy=class{constructor(){this.changes=new vr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ky=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Vy=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ac(r.mutation,i,$n.empty(),Qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=Pi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ic();return o.forEach((c,l)=>{s=s.insert(c,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Pi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=_r(),s=sc(),c=function(){return sc()}();return t.forEach((l,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof wr)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),ac(h.mutation,u,h.mutation.getFieldMask(),Qe.now())):s.set(u.key,$n.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>c.set(u,new ky(h,s.get(u)??null))),c))}recalculateAndSaveOverlays(e,t){let r=sc(),i=new ze((s,c)=>s-c),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let h=r.get(l)||$n.empty();h=c.applyToLocalView(u,h),r.set(l,h);let p=(i.get(c.batchId)||ve()).add(l);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,h=l.value,p=hS();h.forEach(y=>{if(!o.has(y)){let g=vS(t.get(y),r.get(y));g!==null&&p.set(y,g),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return j.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return CL(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):j.resolve(Pi()),c=cc,l=o;return s.next(u=>j.forEach(u,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{l=l.insert(h,y)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,ve())).next(h=>({batchId:c,changes:dS(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(r=>{let i=ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ic();return this.indexManager.getCollectionParents(e,o).next(c=>j.forEach(c,l=>{let u=function(p,y){return new us(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,In.newInvalidDocument(h)))});let c=ic();return s.forEach((l,u)=>{let h=o.get(l);h!==void 0&&ac(h.mutation,u,$n.empty(),Qe.now()),rh(t,u)&&(c=c.insert(l,u))}),c})}};var Ly=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return j.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Gn(i.createTime)}}(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(i){return{name:i.name,query:MS(i.bundledQuery),readTime:Gn(i.readTime)}}(t)),j.resolve()}};var Fy=class{constructor(){this.overlays=new ze(Z.comparator),this.Lr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Pi();return j.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.bt(e,t,o)}),j.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){let i=Pi(),o=t.length+1,s=new Z(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ze((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Pi(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let c=Pi(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>c.set(u,h)),!(c.size()>=i)););return j.resolve(c)}bt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new _y(t,r));let o=this.Lr.get(t);o===void 0&&(o=ve(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}};var jy=class{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}};var yc=class{constructor(){this.kr=new ft(rt.Kr),this.qr=new ft(rt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new rt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new rt(e,t))}Qr(e,t){e.forEach(r=>this.removeReference(r,t))}Gr(e){let t=new Z(new He([])),r=new rt(t,e),i=new rt(t,e+1),o=[];return this.qr.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new Z(new He([])),r=new rt(t,e),i=new rt(t,e+1),o=ve();return this.qr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new rt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},rt=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Z.comparator(e.key,t.key)||we(e.Hr,t.Hr)}static Ur(e,t){return we(e.Hr,t.Hr)||Z.comparator(e.key,t.key)}};var Uy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ft(rt.Kr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new yy(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Jr=this.Jr.add(new rt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return j.resolve(s)}lookupMutationBatch(e,t){return j.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Iv:this.Yn-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new rt(t,0),i=new rt(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(we);return t.forEach(i=>{let o=new rt(i,0),s=new rt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),j.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Z.isDocumentKey(o)||(o=o.child(""));let s=new rt(new Z(o),0),c=new ft(we);return this.Jr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(c=c.add(l.Hr)),!0)},s),j.resolve(this.Yr(c))}Yr(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ke(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return j.forEach(t.mutations,i=>{let o=new rt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new rt(t,0),i=this.Jr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var By=class{constructor(e){this.ti=e,this.docs=function(){return new ze(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=_r();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():In.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=_r(),s=t.path,c=new Z(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||nL(tL(h),r)<=0||(i.has(h.key)||rh(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(e,t,r,i){X(9500)}ni(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $y(this)}getSize(e){return j.resolve(this.size)}},$y=class extends Oy{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}};var Hy=class{constructor(e){this.persistence=e,this.ri=new vr(t=>Dv(t),Mv),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.ii=0,this.si=new yc,this.targetCount=0,this.oi=gc._r()}forEachTarget(e,t){return this.ri.forEach((r,i)=>t(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),j.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new gc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.lr(t),j.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ri.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),j.waitFor(o).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),j.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),j.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.si.containsKey(t))}};var kd=class{constructor(e,t){this._i={},this.overlays={},this.ai=new Ev(0),this.ui=!1,this.ui=!0,this.ci=new jy,this.referenceDelegate=e(this),this.li=new Hy(this),this.indexManager=new My,this.remoteDocumentCache=function(i){return new By(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Dy(t),this.Pi=new Ly(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new Uy(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);let i=new zy(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return j.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}},zy=class extends ty{constructor(e){super(),this.currentSequenceNumber=e}},qy=class n{constructor(e){this.persistence=e,this.Ri=new yc,this.Ai=null}static Vi(e){return new n(e)}get di(){if(this.Ai)return this.Ai;throw X(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.di,r=>{let i=Z.fromPath(r);return this.mi(e,i).next(o=>{o||t.removeEntry(i,ae.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Vd=class n{constructor(e,t){this.persistence=e,this.fi=new vr(r=>sL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=iF(this,t)}static Vi(e,t){return new n(e,t)}Ti(){}Ii(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}pr(e){let t=0;return this.mr(e,r=>{t++}).next(()=>t)}mr(e,t){return j.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?j.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,t).next(c=>{c||(r++,o.removeEntry(s,ae.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pd(e.data.value)),t}wr(e,t,r){return j.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.fi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Gy=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=ve(),i=ve();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Wy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ky=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return CI()?8:iL(bI())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.gs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ps(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Wy;return this.ys(e,t,s).next(c=>{if(o.result=c,this.As)return this.ws(e,t,s,c.size)})}).next(()=>o.result)}ws(e,t,r,i){return r.documentReadCount<this.Vs?(Xo()<=Ee.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",es(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(Xo()<=Ee.DEBUG&&q("QueryEngine","Query:",es(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Xo()<=Ee.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",es(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(t))):j.resolve())}gs(e,t){if(rT(t))return j.resolve(null);let r=qn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Dd(t,null,"F"),r=qn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.fs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.bs(t,c);return this.Ss(t,u,s,l.readTime)?this.gs(e,Dd(t,null,"F")):this.Ds(e,u,t,l)}))})))}ps(e,t,r,i){return rT(t)||i.isEqual(ae.min())?j.resolve(null):this.fs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ss(t,s,r,i)?j.resolve(null):(Xo()<=Ee.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),es(t)),this.Ds(e,s,t,eL(i,cc)).next(c=>c))})}bs(e,t){let r=new ft(lS(e));return t.forEach((i,o)=>{rh(e,o)&&(r=r.add(o))}),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,r){return Xo()<=Ee.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",es(t)),this.fs.getDocumentsMatchingQuery(e,t,Vi.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Pv="LocalStore",oF=3e8,Qy=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new ze(we),this.Fs=new vr(o=>Dv(o),Mv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vy(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}};function sF(n,e,t,r){return new Qy(n,e,t,r)}function RS(n,e){return L(this,null,function*(){let t=oe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],l=ve();for(let u of i){s.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of o){c.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ns:u,removedBatchIds:s,addedBatchIds:c}))})})})}function aF(n,e){let t=oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return function(c,l,u,h){let p=u.batch,y=p.keys(),g=j.resolve();return y.forEach(D=>{g=g.next(()=>h.getEntry(l,D)).next(O=>{let F=u.docVersions.get(D);ke(F!==null,48541),O.version.compareTo(F)<0&&(p.applyToRemoteDocument(O,u),O.isValidDocument()&&(O.setReadTime(u.commitVersion),h.addEntry(O)))})}),g.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=ve();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function PS(n){let e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function cF(n,e){let t=oe(n),r=e.snapshotVersion,i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;let c=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;c.push(t.li.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.li.addMatchingKeys(o,h.addedDocuments,p)));let g=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(wt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(p,g),function(O,F,z){return O.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=oF?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(y,g,h)&&c.push(t.li.updateTargetData(o,g))});let l=_r(),u=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(lF(o,s,e.documentUpdates).next(h=>{l=h.Bs,u=h.Ls})),!r.isEqual(ae.min())){let h=t.li.getLastRemoteSnapshotVersion(o).next(p=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return j.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.vs=i,o))}function lF(n,e,t){let r=ve(),i=ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=_r();return t.forEach((c,l)=>{let u=o.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(c,l.readTime),s=s.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(c,l)):q(Pv,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{Bs:s,Ls:i}})}function uF(n,e){let t=oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Iv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dF(n,e){let t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.li.getTargetData(r,e).next(o=>o?(i=o,j.resolve(i)):t.li.allocateTargetId(r).next(s=>(i=new mc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r})}function Yy(n,e,t){return L(this,null,function*(){let r=oe(n),i=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!bs(s))throw s;q(Pv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)})}function mT(n,e,t){let r=oe(n),i=ae.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,h){let p=oe(l),y=p.Fs.get(h);return y!==void 0?j.resolve(p.vs.get(y)):p.li.getTargetData(u,h)}(r,s,qn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,c.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ae.min(),t?o:ve())).next(c=>(hF(r,IL(e),c),{documents:c,ks:o})))}function hF(n,e,t){let r=n.Ms.get(e)||ae.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Ms.set(e,r)}var Ld=class{constructor(){this.activeTargetIds=AL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Zy=class{constructor(){this.vo=new Ld,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ld,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Jy=class{Mo(e){}shutdown(){}};var gT="ConnectivityMonitor",Fd=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){q(gT,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){q(gT,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var fd=null;function Xy(){return fd===null?fd=function(){return 268435456+Math.round(2147483648*Math.random())}():fd++,"0x"+fd.toString(16)}var Kg="RestConnection",fF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},ev=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Sd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=Xy(),c=this.Qo(e,t.toUriEncodedString());q(Kg,`Sending RPC '${e}' ${s}:`,c,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(l,i,o);let{host:u}=new URL(c),h=od(u);return this.zo(e,c,l,r,h).then(p=>(q(Kg,`Received RPC '${e}' ${s}: `,p),p),p=>{throw qr(Kg,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}Go(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,t){let r=fF[e],i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var tv=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Dt="WebChannelConnection",rc=(n,e,t)=>{n.listen(e,r=>{try{t(r)}catch(i){setTimeout(()=>{throw i},0)}})},jd=class n extends ev{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!n.c_){let e=zg();rc(e,Hg.STAT_EVENT,t=>{t.stat===ud.PROXY?q(Dt,"STAT_EVENT: detected buffering proxy"):t.stat===ud.NOPROXY&&q(Dt,"STAT_EVENT: detected no buffering proxy")}),n.c_=!0}}zo(e,t,r,i,o){let s=Xy();return new Promise((c,l)=>{let u=new Bg;u.setWithCredentials(!0),u.listenOnce($g.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nc.NO_ERROR:let p=u.getResponseJson();q(Dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case nc.TIMEOUT:q(Dt,`RPC '${e}' ${s} timed out`),l(new G(V.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:let y=u.getStatus();if(q(Dt,`RPC '${e}' ${s} failed with status:`,y,"response text:",u.getResponseText()),y>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let D=g?.error;if(D&&D.status&&D.message){let O=function(z){let te=z.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(te)>=0?te:V.UNKNOWN}(D.status);l(new G(O,D.message))}else l(new G(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(V.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(Dt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);q(Dt,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}T_(e,t,r){let i=Xy(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");q(Dt,`Creating RPC '${e}' stream ${i}: ${u}`,c);let h=s.createWebChannel(u,c);this.I_(h);let p=!1,y=!1,g=new tv({Ho:D=>{y?q(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(p||(q(Dt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),q(Dt,`RPC '${e}' stream ${i} sending:`,D),h.send(D))},Jo:()=>h.close()});return rc(h,Jo.EventType.OPEN,()=>{y||(q(Dt,`RPC '${e}' stream ${i} transport opened.`),g.i_())}),rc(h,Jo.EventType.CLOSE,()=>{y||(y=!0,q(Dt,`RPC '${e}' stream ${i} transport closed`),g.o_(),this.E_(h))}),rc(h,Jo.EventType.ERROR,D=>{y||(y=!0,qr(Dt,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),g.o_(new G(V.UNAVAILABLE,"The operation could not be completed")))}),rc(h,Jo.EventType.MESSAGE,D=>{if(!y){let O=D.data[0];ke(!!O,16349);let F=O,z=F?.error||F[0]?.error;if(z){q(Dt,`RPC '${e}' stream ${i} received error:`,z);let te=z.status,Me=function(mt){let T=nt[mt];if(T!==void 0)return wS(T)}(te),zt=z.message;Me===void 0&&(Me=V.INTERNAL,zt="Unknown error status: "+te+" with message "+z.message),y=!0,g.o_(new G(Me,zt)),h.close()}else q(Dt,`RPC '${e}' stream ${i} received:`,O),g.__(O)}}),n.u_(),setTimeout(()=>{g.s_()},0),g}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return qg()}};function pF(n){return new jd(n)}function Qg(){return typeof document<"u"?document:null}function Ic(n){return new Ey(n,!0)}jd.c_=!1;var Ud=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var yT="PersistentStream",Bd=class{constructor(e,t,r,i,o,s,c,l){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ud(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return L(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}k_(){return L(this,null,function*(){if(this.O_())return this.close(0)})}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return L(this,null,function*(){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.t_(t)})}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new G(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>L(this,null,function*(){this.state=0,this.start()}))}z_(e){return q(yT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(q(yT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nv=class extends Bd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=GL(this.serializer,e),r=function(o){if(!("targetChange"in o))return ae.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?Gn(s.readTime):ae.min()}(e);return this.listener.J_(t,r)}Z_(e){let t={};t.database=xy(this.serializer),t.addTarget=function(o,s){let c,l=s.target;if(c=py(l)?{documents:QL(o,l)}:{query:YL(o,l).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=bS(o,s.resumeToken);let u=Iy(o,s.expectedCount);u!==null&&(c.expectedCount=u)}else if(s.snapshotVersion.compareTo(ae.min())>0){c.readTime=Nd(o,s.snapshotVersion.toTimestamp());let u=Iy(o,s.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);let r=JL(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){let t={};t.database=xy(this.serializer),t.removeTarget=e,this.K_(t)}},rv=class extends Bd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=KL(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=xy(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>WL(this.serializer,r))};this.K_(t)}};var iv=class{},ov=class extends iv{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Ty(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(V.UNKNOWN,o.toString())})}jo(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.jo(e,Ty(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(V.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function mF(n,e,t,r){return new ov(n,e,t,r)}var sv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mr(t),this.aa=!1):q("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var $i="RemoteStore",av=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(s=>{r.enqueueAndForget(()=>L(this,null,function*(){qi(this)&&(q($i,"Restarting streams for network reachability change."),yield function(l){return L(this,null,function*(){let u=oe(l);u.Ea.add(4),yield Tc(u),u.Va.set("Unknown"),u.Ea.delete(4),yield ih(u)})}(this))}))}),this.Va=new sv(r,i)}};function ih(n){return L(this,null,function*(){if(qi(n))for(let e of n.Ra)yield e(!0)})}function Tc(n){return L(this,null,function*(){for(let e of n.Ra)yield e(!1)})}function NS(n,e){let t=oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vv(t)?kv(t):Cs(t).O_()&&Ov(t,e))}function Nv(n,e){let t=oe(n),r=Cs(t);t.Ia.delete(e),r.O_()&&OS(t,e),t.Ia.size===0&&(r.O_()?r.L_():qi(t)&&t.Va.set("Unknown"))}function Ov(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cs(n).Z_(e)}function OS(n,e){n.da.$e(e),Cs(n).X_(e)}function kv(n){n.da=new Cy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Cs(n).start(),n.Va.ua()}function Vv(n){return qi(n)&&!Cs(n).x_()&&n.Ia.size>0}function qi(n){return oe(n).Ea.size===0}function kS(n){n.da=void 0}function gF(n){return L(this,null,function*(){n.Va.set("Online")})}function yF(n){return L(this,null,function*(){n.Ia.forEach((e,t)=>{Ov(n,e)})})}function vF(n,e){return L(this,null,function*(){kS(n),Vv(n)?(n.Va.ha(e),kv(n)):n.Va.set("Unknown")})}function _F(n,e,t){return L(this,null,function*(){if(n.Va.set("Online"),e instanceof Rd&&e.state===2&&e.cause)try{yield function(i,o){return L(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.da.removeTarget(c))})}(n,e)}catch(r){q($i,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $d(n,r)}else if(e instanceof os?n.da.Xe(e):e instanceof Ad?n.da.st(e):n.da.tt(e),!t.isEqual(ae.min()))try{let r=yield PS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.da.Tt(s);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=o.Ia.get(u);h&&o.Ia.set(u,h.withResumeToken(l.resumeToken,s))}}),c.targetMismatches.forEach((l,u)=>{let h=o.Ia.get(l);if(!h)return;o.Ia.set(l,h.withResumeToken(wt.EMPTY_BYTE_STRING,h.snapshotVersion)),OS(o,l);let p=new mc(h.target,l,u,h.sequenceNumber);Ov(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){q($i,"Failed to raise snapshot:",r),yield $d(n,r)}})}function $d(n,e,t){return L(this,null,function*(){if(!bs(e))throw e;n.Ea.add(1),yield Tc(n),n.Va.set("Offline"),t||(t=()=>PS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>L(null,null,function*(){q($i,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield ih(n)}))})}function VS(n,e){return e().catch(t=>$d(n,t,e))}function oh(n){return L(this,null,function*(){let e=oe(n),t=Wr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Iv;for(;wF(e);)try{let i=yield uF(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,bF(e,i)}catch(i){yield $d(e,i)}LS(e)&&FS(e)})}function wF(n){return qi(n)&&n.Ta.length<10}function bF(n,e){n.Ta.push(e);let t=Wr(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function LS(n){return qi(n)&&!Wr(n).x_()&&n.Ta.length>0}function FS(n){Wr(n).start()}function CF(n){return L(this,null,function*(){Wr(n).ra()})}function EF(n){return L(this,null,function*(){let e=Wr(n);for(let t of n.Ta)e.ea(t.mutations)})}function IF(n,e,t){return L(this,null,function*(){let r=n.Ta.shift(),i=vy.from(r,e,t);yield VS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield oh(n)})}function TF(n,e){return L(this,null,function*(){e&&Wr(n).Y_&&(yield function(r,i){return L(this,null,function*(){if(function(s){return LL(s)&&s!==V.ABORTED}(i.code)){let o=r.Ta.shift();Wr(r).B_(),yield VS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield oh(r)}})}(n,e)),LS(n)&&FS(n)})}function vT(n,e){return L(this,null,function*(){let t=oe(n);t.asyncQueue.verifyOperationInProgress(),q($i,"RemoteStore received new credentials");let r=qi(t);t.Ea.add(3),yield Tc(t),r&&t.Va.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield ih(t)})}function SF(n,e){return L(this,null,function*(){let t=oe(n);e?(t.Ea.delete(2),yield ih(t)):e||(t.Ea.add(2),yield Tc(t),t.Va.set("Unknown"))})}function Cs(n){return n.ma||(n.ma=function(t,r,i){let o=oe(t);return o.sa(),new nv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:gF.bind(null,n),Yo:yF.bind(null,n),t_:vF.bind(null,n),J_:_F.bind(null,n)}),n.Ra.push(e=>L(null,null,function*(){e?(n.ma.B_(),Vv(n)?kv(n):n.Va.set("Unknown")):(yield n.ma.stop(),kS(n))}))),n.ma}function Wr(n){return n.fa||(n.fa=function(t,r,i){let o=oe(t);return o.sa(),new rv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:CF.bind(null,n),t_:TF.bind(null,n),ta:EF.bind(null,n),na:IF.bind(null,n)}),n.Ra.push(e=>L(null,null,function*(){e?(n.fa.B_(),yield oh(n)):(yield n.fa.stop(),n.Ta.length>0&&(q($i,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var cv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Lv(n,e){if(mr("AsyncQueue",`${e}: ${n}`),bs(n))return new G(V.UNAVAILABLE,`${e}: ${n}`);throw n}var vc=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Z.comparator(t.key,r.key):(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=ic(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Hd=class{constructor(){this.ga=new ze(Z.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):X(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Hi=class n{constructor(e,t,r,i,o,s,c,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,vc.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var lv=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},uv=class{constructor(){this.queries=_T(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=oe(t),o=i.queries;i.queries=_T(),o.forEach((s,c)=>{for(let l of c.ba)l.onError(r)})})(this,new G(V.ABORTED,"Firestore shutting down"))}};function _T(){return new vr(n=>cS(n),nh)}function jS(n,e){return L(this,null,function*(){let t=oe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new lv,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=Lv(s,`Initialization of query '${es(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Fv(t)})}function US(n,e){return L(this,null,function*(){let t=oe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function xF(n,e){let t=oe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.ba)c.Fa(i)&&(r=!0);s.wa=i}}r&&Fv(t)}function DF(n,e,t){let r=oe(n),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(t);r.queries.delete(e)}function Fv(n){n.Ca.forEach(e=>{e.next()})}var dv,wT;(wT=dv||(dv={})).Ma="default",wT.Cache="cache";var zd=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Hi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Hi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dv.Cache}};var qd=class{constructor(e){this.key=e}},Gd=class{constructor(e){this.key=e}},hv=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ve(),this.mutatedKeys=ve(),this.eu=lS(e),this.tu=new vc(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new Hd,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),g=rh(this.query,p)?p:null,D=!!y&&this.mutatedKeys.has(y.key),O=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),F=!1;y&&g?y.data.isEqual(g.data)?D!==O&&(r.track({type:3,doc:g}),F=!0):this.su(y,g)||(r.track({type:2,doc:g}),F=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(c=!0)):!y&&g?(r.track({type:0,doc:g}),F=!0):y&&!g&&(r.track({type:1,doc:y}),F=!0,(l||u)&&(c=!0)),F&&(g?(s=s.add(g),o=O?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Ss:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>function(g,D){let O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Vt:F})}};return O(g)-O(D)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],l=this.Ya.size===0&&this.current&&!i?1:0,u=l!==this.Xa;return this.Xa=l,s.length!==0||u?{snapshot:new Hi(this.query,e.tu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hd,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Za=this.Za.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Za=this.Za.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=ve(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Gd(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new qd(r))}),t}cu(e){this.Za=e.ks,this.Ya=ve();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Hi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},jv="SyncEngine",fv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},pv=class{constructor(e){this.key=e,this.hu=!1}},mv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new vr(c=>cS(c),nh),this.Iu=new Map,this.Eu=new Set,this.Ru=new ze(Z.comparator),this.Au=new Map,this.Vu=new yc,this.du={},this.mu=new Map,this.fu=gc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function MF(n,e,t=!0){return L(this,null,function*(){let r=GS(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield BS(r,e,t,!0),i})}function AF(n,e){return L(this,null,function*(){let t=GS(n);yield BS(t,e,!0,!1)})}function BS(n,e,t,r){return L(this,null,function*(){let i=yield dF(n.localStore,qn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield RF(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&NS(n.remoteStore,i),c})}function RF(n,e,t,r,i){return L(this,null,function*(){n.pu=(p,y,g)=>function(O,F,z,te){return L(this,null,function*(){let Me=F.view.ru(z);Me.Ss&&(Me=yield mT(O.localStore,F.query,!1).then(({documents:T})=>F.view.ru(T,Me)));let zt=te&&te.targetChanges.get(F.targetId),dn=te&&te.targetMismatches.get(F.targetId)!=null,mt=F.view.applyChanges(Me,O.isPrimaryClient,zt,dn);return CT(O,F.targetId,mt.au),mt.snapshot})}(n,p,y,g);let o=yield mT(n.localStore,e,!0),s=new hv(e,o.ks),c=s.ru(o.documents),l=pc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(c,n.isPrimaryClient,l);CT(n,t,u.au);let h=new fv(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function PF(n,e,t){return L(this,null,function*(){let r=oe(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!nh(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Yy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Nv(r.remoteStore,i.targetId),gv(r,i.targetId)}).catch(ws))):(gv(r,i.targetId),yield Yy(r.localStore,i.targetId,!0))})}function NF(n,e){return L(this,null,function*(){let t=oe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Nv(t.remoteStore,r.targetId))})}function OF(n,e,t){return L(this,null,function*(){let r=BF(n);try{let i=yield function(s,c){let l=oe(s),u=Qe.now(),h=c.reduce((g,D)=>g.add(D.key),ve()),p,y;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let D=_r(),O=ve();return l.xs.getEntries(g,h).next(F=>{D=F,D.forEach((z,te)=>{te.isValidDocument()||(O=O.add(z))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,D)).next(F=>{p=F;let z=[];for(let te of c){let Me=VL(te,p.get(te.key).overlayedDocument);Me!=null&&z.push(new wr(te.key,Me,tS(Me.value.mapValue),zr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,z,c)}).next(F=>{y=F;let z=F.applyToLocalDocumentSet(p,O);return l.documentOverlayCache.saveOverlays(g,F.batchId,z)})}).then(()=>({batchId:y.batchId,changes:dS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,l){let u=s.du[s.currentUser.toKey()];u||(u=new ze(we)),u=u.insert(c,l),s.du[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Sc(r,i.changes),yield oh(r.remoteStore)}catch(i){let o=Lv(i,"Failed to persist write");t.reject(o)}})}function $S(n,e){return L(this,null,function*(){let t=oe(n);try{let r=yield cF(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ke(s.hu,14607):i.removedDocuments.size>0&&(ke(s.hu,42227),s.hu=!1))}),yield Sc(t,r,e)}catch(r){yield ws(r)}})}function bT(n,e,t){let r=oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let l=oe(s);l.onlineState=c;let u=!1;l.queries.forEach((h,p)=>{for(let y of p.ba)y.va(c)&&(u=!0)}),u&&Fv(l)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kF(n,e,t){return L(this,null,function*(){let r=oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new ze(Z.comparator);s=s.insert(o,In.newNoDocument(o,ae.min()));let c=ve().add(o),l=new Md(ae.min(),new Map,new ze(we),s,c);yield $S(r,l),r.Ru=r.Ru.remove(o),r.Au.delete(e),Uv(r)}else yield Yy(r.localStore,e,!1).then(()=>gv(r,e,t)).catch(ws)})}function VF(n,e){return L(this,null,function*(){let t=oe(n),r=e.batch.batchId;try{let i=yield aF(t.localStore,e);zS(t,r,null),HS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Sc(t,i)}catch(i){yield ws(i)}})}function LF(n,e,t){return L(this,null,function*(){let r=oe(n);try{let i=yield function(s,c){let l=oe(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,c).next(p=>(ke(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);zS(r,e,t),HS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Sc(r,i)}catch(i){yield ws(i)}})}function HS(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function zS(n,e,t){let r=oe(n),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function gv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(r=>{n.Vu.containsKey(r)||qS(n,r)})}function qS(n,e){n.Eu.delete(e.path.canonicalString());let t=n.Ru.get(e);t!==null&&(Nv(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Uv(n))}function CT(n,e,t){for(let r of t)r instanceof qd?(n.Vu.addReference(r.key,e),FF(n,r)):r instanceof Gd?(q(jv,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||qS(n,r.key)):X(19791,{wu:r})}function FF(n,e){let t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(q(jv,"New document in limbo: "+t),n.Eu.add(r),Uv(n))}function Uv(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Z(He.fromString(e)),r=n.fu.next();n.Au.set(r,new pv(t)),n.Ru=n.Ru.insert(t,r),NS(n.remoteStore,new mc(qn(Ec(t.path)),r,"TargetPurposeLimboResolution",Ev.ce))}}function Sc(n,e,t){return L(this,null,function*(){let r=oe(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,l)=>{s.push(r.pu(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let h=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);let h=Gy.Es(l.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.Pu.J_(i),yield function(l,u){return L(this,null,function*(){let h=oe(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>j.forEach(u,y=>j.forEach(y.Ts,g=>h.persistence.referenceDelegate.addReference(p,y.targetId,g)).next(()=>j.forEach(y.Is,g=>h.persistence.referenceDelegate.removeReference(p,y.targetId,g)))))}catch(p){if(!bs(p))throw p;q(Pv,"Failed to update sequence numbers: "+p)}for(let p of u){let y=p.targetId;if(!p.fromCache){let g=h.vs.get(y),D=g.snapshotVersion,O=g.withLastLimboFreeSnapshotVersion(D);h.vs=h.vs.insert(y,O)}}})}(r.localStore,o))})}function jF(n,e){return L(this,null,function*(){let t=oe(n);if(!t.currentUser.isEqual(e)){q(jv,"User change. New user:",e.toKey());let r=yield RS(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(c=>{c.forEach(l=>{l.reject(new G(V.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Sc(t,r.Ns)}})}function UF(n,e){let t=oe(n),r=t.Au.get(e);if(r&&r.hu)return ve().add(r.key);{let i=ve(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function GS(n){let e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kF.bind(null,e),e.Pu.J_=xF.bind(null,e.eventManager),e.Pu.yu=DF.bind(null,e.eventManager),e}function BF(n){let e=oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LF.bind(null,e),e}var Bv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return L(this,null,function*(){this.serializer=Ic(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return sF(this.persistence,new Ky,t.initialUser,this.serializer)}Cu(t){return new kd(qy.Vi,this.serializer)}Du(t){return new Zy}terminate(){return L(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Wd=class extends Bv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ke(this.persistence.referenceDelegate instanceof Vd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Py(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new kd(r=>Vd.Vi(r,t),this.serializer)}};var WS=(()=>{class n{initialize(t,r){return L(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jF.bind(null,this.syncEngine),yield SF(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new uv}()}createDatastore(t){let r=Ic(t.databaseInfo.databaseId),i=pF(t.databaseInfo);return mF(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,l){return new av(i,o,s,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>bT(this.syncEngine,r,0),function(){return Fd.v()?new Fd:new Jy}())}createSyncEngine(t,r){return function(o,s,c,l,u,h,p){let y=new mv(o,s,c,l,u,h);return p&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return L(this,null,function*(){yield function(r){return L(this,null,function*(){let i=oe(r);q($i,"RemoteStore shutting down."),i.Ea.add(5),yield Tc(i),i.Aa.shutdown(),i.Va.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var Kd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Kr="FirestoreClient",yv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=ki.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>L(this,null,function*(){q(Kr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(q(Kr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>L(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Lv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Yg(n,e){return L(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),q(Kr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>L(null,null,function*(){r.isEqual(i)||(yield RS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ET(n,e){return L(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield $F(n);q(Kr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>vT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>vT(e.remoteStore,i)),n._onlineComponents=e})}function $F(n){return L(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q(Kr,"Using user provided OfflineComponentProvider");try{yield Yg(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;qr("Error using user provided cache. Falling back to memory cache: "+t),yield Yg(n,new Bv)}}else q(Kr,"Using default OfflineComponentProvider"),yield Yg(n,new Wd(void 0));return n._offlineComponents})}function KS(n){return L(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(q(Kr,"Using user provided OnlineComponentProvider"),yield ET(n,n._uninitializedComponentsProvider._online)):(q(Kr,"Using default OnlineComponentProvider"),yield ET(n,new WS))),n._onlineComponents})}function HF(n){return KS(n).then(e=>e.syncEngine)}function vv(n){return L(this,null,function*(){let e=yield KS(n),t=e.eventManager;return t.onListen=MF.bind(null,e.syncEngine),t.onUnlisten=PF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=AF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NF.bind(null,e.syncEngine),t})}function QS(n,e,t,r){let i=new Kd(r),o=new zd(e,i,t);return n.asyncQueue.enqueueAndForget(()=>L(null,null,function*(){return jS(yield vv(n),o)})),()=>{i.Nu(),n.asyncQueue.enqueueAndForget(()=>L(null,null,function*(){return US(yield vv(n),o)}))}}function YS(n,e,t={}){let r=new Hn;return n.asyncQueue.enqueueAndForget(()=>L(null,null,function*(){return function(o,s,c,l,u){let h=new Kd({next:y=>{h.Nu(),s.enqueueAndForget(()=>US(o,p));let g=y.docs.has(c);!g&&y.fromCache?u.reject(new G(V.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&y.fromCache&&l&&l.source==="server"?u.reject(new G(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),p=new zd(Ec(c.path),h,{includeMetadataChanges:!0,Ka:!0});return jS(o,p)}(yield vv(n),n.asyncQueue,e,t,r)})),r.promise}function ZS(n,e){let t=new Hn;return n.asyncQueue.enqueueAndForget(()=>L(null,null,function*(){return OF(yield HF(n),e,t)})),t.promise}function JS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var zF="ComponentProvider",IT=new Map;function qF(n,e,t,r,i){return new ny(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,JS(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var XS="firestore.googleapis.com",TT=!0,Qd=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XS,this.ssl=TT}else this.host=e.host,this.ssl=e.ssl??TT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rF)throw new G(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JS(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_c=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vd;switch(r.type){case"firstParty":return new Xg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return L(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=IT.get(t);r&&(q(zF,"Removing Datastore"),IT.delete(t),r.terminate())}(this),Promise.resolve()}};function ex(n,e,t,r={}){n=Yn(n,_c);let i=od(e),o=n._getSettings(),s=W(N({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(vI(`https://${c}`),wI("Firestore",!0)),o.host!==XS&&o.host!==c&&qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=W(N({},o),{host:c,ssl:i,emulatorOptions:r});if(!Mi(l,s)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=ht.MOCK_USER;else{u=_I(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new G(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ht(p)}n._authCredentials=new Zg(new yd(u,h))}}var ms=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},pt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(_s(t,n._jsonSchema))return new n(e,r||null,new Z(He.fromString(t.referencePath)))}};pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:Ke("string",pt._jsonSchemaVersion),referencePath:Ke("string")};var gs=class n extends ms{constructor(e,t,r){super(e,t,Ec(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new Z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Es(n,e,...t){if(n=Ai(n),arguments.length===1&&(e=ki.newId()),XV("doc","path",e),n instanceof _c){let r=He.fromString(e,...t);return qI(r),new pt(n,null,new Z(r))}{if(!(n instanceof pt||n instanceof gs))throw new G(V.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(He.fromString(e,...t));return qI(r),new pt(n.firestore,n instanceof gs?n.converter:null,new Z(r))}}var ST="AsyncQueue",Yd=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ud(this,"async_queue_retry"),this._c=()=>{let r=Qg();r&&q(ST,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Qg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Qg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Hn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}lc(){return L(this,null,function*(){if(this.Yu.length!==0){try{yield this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!bs(e))throw e;q(ST,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mr("INTERNAL UNHANDLED ERROR: ",xT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=cv.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&X(47125,{Pc:xT(this.nc)})}verifyOperationInProgress(){}Tc(){return L(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function xT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var br=class extends _c{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Yd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return L(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Yd(e),this._firestoreClient=void 0,yield e}})}};function $v(n,e){let t=typeof n=="object"?n:jI(),r=typeof n=="string"?n:e||Sd,i=VI(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=yI("firestore");o&&ex(i,...o)}return i}function xc(n){if(n._terminated)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||GF(n),n._firestoreClient}function GF(n){let e=n._freezeSettings(),t=qF(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new yv(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Wn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(wt.fromBase64String(e))}catch(t){throw new G(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_s(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Ke("string",Wn._jsonSchemaVersion),bytes:Ke("string")};var ys=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wc=class{constructor(e){this._methodName=e}};var pr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(_s(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:Ke("string",pr._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};var Kn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_s(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new G(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Kn._jsonSchemaVersion="firestore/vectorValue/1.0",Kn._jsonSchema={type:Ke("string",Kn._jsonSchemaVersion),vectorValues:Ke("object")};var WF=/^__.*__$/,_v=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bi(e,this.data,t,this.fieldTransforms)}};function tx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{dataSource:n})}}var wv=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n(N(N({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Zd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(tx(this.dataSource)&&WF.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},bv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ic(e)}createContext(e,t,r,i=!1){return new wv({dataSource:e,methodName:t,targetDoc:r,path:Bt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function nx(n){let e=n._freezeSettings(),t=Ic(n._databaseId);return new bv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rx(n,e,t,r,i,o={}){let s=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);ax("Data must be an object, but it was:",s,r);let c=ox(r,s),l,u;if(o.merge)l=new $n(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=sh(e,p,t);if(!s.contains(y))throw new G(V.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);QF(h,y)||h.push(y)}l=new $n(h),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new _v(new ln(c),l,u)}function ix(n,e){if(sx(n=Ai(n)))return ax("Unsupported field value:",e,n),ox(n,e);if(n instanceof wc)return function(r,i){if(!tx(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let l=ix(c,i.childContextForArray(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ai(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qe.fromDate(r);return{timestampValue:Nd(i.serializer,o)}}if(r instanceof Qe){let o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nd(i.serializer,o)}}if(r instanceof pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wn)return{bytesValue:bS(i.serializer,r._byteString)};if(r instanceof pt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Rv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kn)return function(s,c){let l=s instanceof Kn?s.toArray():s;return{mapValue:{fields:{[Tv]:{stringValue:Sv},[as]:{arrayValue:{values:l.map(h=>{if(typeof h!="number")throw c.createError("VectorValues must only contain numeric values.");return Av(c.serializer,h)})}}}}}}(r,i);if(DS(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Jd(r)}`)}(n,e)}function ox(n,e){let t={};return GT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(n,(r,i)=>{let o=ix(i,e.childContextForField(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function sx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof pr||n instanceof Wn||n instanceof pt||n instanceof wc||n instanceof Kn||DS(n))}function ax(n,e,t){if(!sx(t)||!RT(t)){let r=Jd(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function sh(n,e,t){if((e=Ai(e))instanceof ys)return e._internalPath;if(typeof e=="string")return cx(n,e);throw Zd("Field path arguments must be of type string or ",n,!1,void 0,t)}var KF=new RegExp("[~\\*/\\[\\]]");function cx(n,e,t){if(e.search(KF)>=0)throw Zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ys(...e.split("."))._internalPath}catch{throw Zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new G(V.INVALID_ARGUMENT,c+n+l)}function QF(n,e){return n.some(t=>t.isEqual(e))}var bc=class{convertValue(e,t="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return zi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[as].arrayValue?.values?.map(r=>Ue(r.doubleValue));return new Kn(t)}convertGeoPoint(e){return new pr(Ue(e.latitude),Ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=th(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uc(e));default:return null}}convertTimestamp(e){let t=gr(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=He.fromString(e);ke(xS(r),9688,{name:e});let i=new dc(r.get(1),r.get(3)),o=new Z(r.popFirst(5));return i.isEqual(t)||mr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var Cc=class extends bc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}};var lx="@firebase/firestore",ux="4.10.0";function dx(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var ah=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Hv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(sh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Hv=class extends ah{data(){return super.data()}};function XF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function e2(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Gi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Wi=class n extends ah{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Is(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(sh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wi._jsonSchema={type:Ke("string",Wi._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var Is=class extends Wi{data(e={}){return super.data(e)}},Ts=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Gi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Is(this._firestore,this._userDataWriter,r.key,r,new Gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let l=new Is(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Gi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new Is(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Gi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return c.type!==0&&(u=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:t2(c.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ki.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function t2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:n})}}Ts._jsonSchemaVersion="firestore/querySnapshot/1.0",Ts._jsonSchema={type:Ke("string",Ts._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};function hx(n){n=Yn(n,pt);let e=Yn(n.firestore,br),t=xc(e);return YS(t,n._key).then(r=>mx(e,n,r))}function fx(n,e,t){n=Yn(n,pt);let r=Yn(n.firestore,br),i=e2(n.converter,e,t),o=nx(r);return n2(r,[rx(o,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,zr.none())])}function px(n,...e){n=Ai(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||dx(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(dx(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(n instanceof pt)s=Yn(n.firestore,br),c=Ec(n._key.path),o={next:u=>{e[r]&&e[r](mx(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=Yn(n,ms);s=Yn(u.firestore,br),c=u._query;let h=new Cc(s);o={next:p=>{e[r]&&e[r](new Ts(s,h,u,p))},error:e[r+1],complete:e[r+2]},XF(n._query)}let l=xc(s);return QS(l,c,i,o)}function n2(n,e){let t=xc(n);return ZS(t,e)}function mx(n,e,t){let r=t.docs.get(e._key),i=new Cc(n);return new Wi(n,i,e._key,r,new Gi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){DT(FI),ec(new ur("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new br(new _d(r.getProvider("auth-internal")),new bd(s,r.getProvider("app-check-internal")),ZT(s,i),s);return o=N({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Hr(lx,ux,e),Hr(lx,ux,"esm2020")})();var gx={apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT_ID.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT_ID.appspot.com",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"},ch=class n{constructor(){this.app=null;this.db=null;this.unsubscribe=null;this.isInitialized=!1}initialize(){if(!this.isInitialized)try{let e=this.getFirebaseConfig();if(!e||!e.projectId||e.projectId==="YOUR_PROJECT_ID"){console.warn("Firebase not configured. Using localStorage only.");return}this.app=jg(e),this.db=$v(this.app),this.isInitialized=!0}catch(e){console.error("Firebase initialization error:",e)}}getFirebaseConfig(){let e=localStorage.getItem("firebase-config");if(e)try{return JSON.parse(e)}catch{return gx}return gx}setFirebaseConfig(e){localStorage.setItem("firebase-config",JSON.stringify(e)),this.isInitialized=!1,this.initialize()}saveApartments(e,t){return L(this,null,function*(){if(!this.db||!this.isInitialized)throw new Error("Firebase not initialized");try{let r=Es(this.db,"users",t);yield fx(r,{apartments:e,lastUpdated:new Date().toISOString()})}catch(r){throw console.error("Error saving to Firebase:",r),r}})}loadApartments(e){return L(this,null,function*(){if(!this.db||!this.isInitialized)return null;try{let t=Es(this.db,"users",e),r=yield hx(t);return r.exists()&&r.data().apartments||null}catch(t){return console.error("Error loading from Firebase:",t),null}})}subscribeToApartments(e,t){if(!(!this.db||!this.isInitialized)){this.unsubscribe&&this.unsubscribe();try{let r=Es(this.db,"users",e);this.unsubscribe=px(r,i=>{if(i.exists()){let o=i.data();t(o.apartments||[])}})}catch(r){console.error("Error subscribing to Firebase:",r)}}}unsubscribeFromApartments(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}isConfigured(){return this.isInitialized&&this.db!==null}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};var yx="apartment-manager-user-id",zv="cloud-sync-enabled",lh=class n{constructor(e){this.firebase=e;this.syncEnabled=K(this.loadSyncEnabled());this.userId=this.getOrCreateUserId();this.isSyncing=!1;this.syncEnabled$=this.syncEnabled.asReadonly();this.firebase.initialize(),Ei(()=>{this.syncEnabled()?this.setupRealtimeSync():this.firebase.unsubscribeFromApartments()})}getOrCreateUserId(){let e=localStorage.getItem(yx);return e||(e=crypto.randomUUID(),localStorage.setItem(yx,e)),e}loadSyncEnabled(){return localStorage.getItem(zv)==="true"}enableSync(e){e&&this.firebase.setFirebaseConfig(e),this.syncEnabled.set(!0),localStorage.setItem(zv,"true")}disableSync(){this.syncEnabled.set(!1),localStorage.setItem(zv,"false"),this.firebase.unsubscribeFromApartments()}syncToCloud(e){return L(this,null,function*(){if(!(!this.syncEnabled()||this.isSyncing)&&this.firebase.isConfigured()){this.isSyncing=!0;try{yield this.firebase.saveApartments(e,this.userId)}catch(t){console.error("Cloud sync error:",t)}finally{this.isSyncing=!1}}})}syncFromCloud(){return L(this,null,function*(){if(!this.syncEnabled()||!this.firebase.isConfigured())return null;try{return yield this.firebase.loadApartments(this.userId)}catch(e){return console.error("Cloud load error:",e),null}})}setupRealtimeSync(){this.firebase.isConfigured()&&this.firebase.subscribeToApartments(this.userId,e=>{if(!this.isSyncing&&e.length>0){let t=new CustomEvent("cloud-sync-update",{detail:e});window.dispatchEvent(t)}})}getUserId(){return this.userId}static{this.\u0275fac=function(t){return new(t||n)(fe(ch))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};var Dc=aw("App",{web:()=>import("./chunk-OH4JYQ7P.js").then(n=>new n.AppWeb)});var vx="https://accounts.google.com/gsi/client",i2="https://accounts.google.com/o/oauth2/v2/auth",_x="https://www.googleapis.com/auth/drive.file",wx="part-manager.json",qv="gdrive-file-id",Gv="gdrive-client-id",Wv="gdrive_oauth_callback",Mc="gdrive_code_verifier",o2="https://oauth2.googleapis.com/token",s2="838239311300-ji616dlcecp6upb9417t6jf0agqh7mt0.apps.googleusercontent.com",Kv="gdrive-native-redirect-uri",bx="com.apartmentmanager.app",Qr=class n{constructor(){this.platformId=k(vi);this.accessToken=null;this.tokenClient=null;this.fileId=this.loadFileId();this.connectedSignal=K(!1);this.connected=this.connectedSignal.asReadonly();this.clientId=K(this.loadClientId());this.nativeRedirectUri=K(this.loadNativeRedirectUri());this.lastError=K(null);this.isSaving=K(!1);Bm(this.platformId)&&(this.handleOAuthCallback(),window.addEventListener("hashchange",()=>this.handleOAuthCallback()),ni.isNativePlatform()&&Dc.addListener("appUrlOpen",e=>this.handleOAuthFromUrl(e.url)))}get isNative(){return ni.isNativePlatform()}applyOAuthParams(e){let t=e.get("access_token"),r=e.get("error");return r?(this.lastError.set(r),!0):t?(this.accessToken=t,this.connectedSignal.set(!0),this.lastError.set(null),!0):!1}exchangeCodeForToken(e,t){return L(this,null,function*(){let r=new URLSearchParams({code:e,code_verifier:t,client_id:this.clientId(),redirect_uri:this.getRedirectUri(),grant_type:"authorization_code"}),i=yield fetch(o2,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!i.ok){let s=yield i.json().catch(()=>({}));return this.lastError.set(s.error||`Token exchange failed: ${i.status}`),null}return(yield i.json()).access_token||null})}handleOAuthFromUrl(e){try{let t=new URL(e),r=t.hash?.slice(1),i=t.search?.slice(1),o=r||i;if(!o)return;let s=new URLSearchParams(o),c=s.get("code"),l=s.get("error");if(l){this.lastError.set(l);return}if(c){let u=sessionStorage.getItem(Mc);sessionStorage.removeItem(Mc),u&&this.exchangeCodeForToken(c,u).then(h=>{h&&(this.accessToken=h,this.connectedSignal.set(!0),this.lastError.set(null))});return}if(this.applyOAuthParams(s))try{sessionStorage.removeItem(Wv)}catch{}}catch{}}handleOAuthCallback(){let e=null;try{let r=sessionStorage.getItem(Wv);r&&(e=new URLSearchParams(r),sessionStorage.removeItem(Wv))}catch{}if(!e){let r=window.location.hash?.slice(1),i=window.location.search?.slice(1),o=r&&(r.includes("access_token=")||r.includes("error=")||r.includes("code="))?r:i&&(i.includes("access_token=")||i.includes("error=")||i.includes("code="))?i:null;if(!o)return;e=new URLSearchParams(o)}if(!e)return;let t=e.get("code");if(t){let r=sessionStorage.getItem(Mc);sessionStorage.removeItem(Mc),r&&this.exchangeCodeForToken(t,r).then(i=>{i&&(this.accessToken=i,this.connectedSignal.set(!0),this.lastError.set(null)),typeof window<"u"&&window.history.replaceState(null,"",window.location.pathname||"/")});return}if(this.applyOAuthParams(e)&&typeof window<"u"){let r=(window.location.pathname||"/")+(window.location.search||"");window.history.replaceState(null,"",r)}}useRedirectFlow(){return ni.isNativePlatform()}randomString(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=new Uint8Array(e);return crypto.getRandomValues(r),Array.from(r,i=>t[i%t.length]).join("")}generateCodeChallenge(e){return L(this,null,function*(){let t=new TextEncoder().encode(e),r=yield crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode(...new Uint8Array(r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}loadFileId(){return localStorage.getItem(qv)}loadClientId(){return localStorage.getItem(Gv)??s2}setClientId(e){this.clientId.set(e),e?localStorage.setItem(Gv,e):localStorage.removeItem(Gv)}loadNativeRedirectUri(){return typeof localStorage<"u"?localStorage.getItem(Kv)??"":""}setNativeRedirectUri(e){let t=e?.trim()??"";this.nativeRedirectUri.set(t),t?localStorage.setItem(Kv,t):localStorage.removeItem(Kv)}getRedirectUri(){return typeof window>"u"?"":ni.isNativePlatform()?this.nativeRedirectUri()||"":window.location.origin}storeFileId(e){this.fileId=e,e?localStorage.setItem(qv,e):localStorage.removeItem(qv)}loadScript(){return L(this,null,function*(){if(!window.google?.accounts?.oauth2?.initTokenClient)return new Promise((e,t)=>{if(document.querySelector(`script[src="${vx}"]`)){window.google?.accounts?.oauth2?.initTokenClient?e():window.gapiLoad=()=>e();return}let i=document.createElement("script");i.src=vx,i.async=!0,i.onload=()=>{window.google?.accounts?.oauth2?.initTokenClient?e():window.gapiLoad=()=>e()},i.onerror=()=>t(new Error("Failed to load Google script")),document.head.appendChild(i)})})}initTokenClient(){let e=this.clientId();!e||this.tokenClient||(this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:e,scope:_x,callback:t=>{if(t.error){this.lastError.set(t.error),this.connectedSignal.set(!1);return}this.lastError.set(null),this.accessToken=t.access_token,this.connectedSignal.set(!0)}}))}connect(){return L(this,null,function*(){let e=this.clientId();if(!e.trim())return this.lastError.set("Enter your Google Client ID in settings"),!1;if(this.lastError.set(null),this.useRedirectFlow()){let t=this.getRedirectUri();if(!t||!t.startsWith("https://"))return this.lastError.set("Set Native redirect URL (https) in settings \u2014 your app URL + /oauth-redirect"),!1;let r=this.randomString(64),i=yield this.generateCodeChallenge(r);try{sessionStorage.setItem(Mc,r)}catch{return this.lastError.set("Storage unavailable"),!1}let o=new URLSearchParams({client_id:e,redirect_uri:this.getRedirectUri(),response_type:"code",scope:_x,code_challenge:i,code_challenge_method:"S256",access_type:"offline"});return window.location.href=`${i2}?${o.toString()}`,!0}try{return yield this.loadScript(),this.initTokenClient(),this.tokenClient.requestAccessToken(),!0}catch(t){return this.lastError.set(t instanceof Error?t.message:"Failed to connect"),!1}})}tryRestoreSession(){return L(this,null,function*(){if(this.clientId()?.trim())try{if(yield this.loadScript(),this.initTokenClient(),!this.tokenClient)return;this.tokenClient.requestAccessToken({prompt:"none"})}catch{}})}requestTokenSilent(){this.tokenClient?.requestAccessToken({prompt:"none"})}disconnect(){this.accessToken&&window.google?.accounts?.oauth2?.revoke(this.accessToken,()=>{}),this.accessToken=null,this.fileId=null,this.storeFileId(null),this.connectedSignal.set(!1),this.lastError.set(null)}saveToDrive(e){!this.connectedSignal()||!this.accessToken||(this.isSaving.set(!0),this.doSave(e).catch(()=>{}).finally(()=>this.isSaving.set(!1)))}doSave(e){return L(this,null,function*(){if(!this.accessToken)return;let t=this.accessToken;if(this.fileId){let h=yield fetch(`https://www.googleapis.com/upload/drive/v3/files/${this.fileId}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:e});if(h.status===401){this.connectedSignal.set(!1),this.accessToken=null;return}if(!h.ok){this.lastError.set(`Save failed: ${h.status}`);return}this.lastError.set(null);return}let r=yield fetch(`https://www.googleapis.com/drive/v3/files?q=name%3D'${encodeURIComponent(wx)}'%20and%20'root'%20in%20parents&fields=files(id)`,{headers:{Authorization:`Bearer ${t}`}});if(r.status===401){this.connectedSignal.set(!1),this.accessToken=null;return}if(!r.ok){this.lastError.set(`List failed: ${r.status}`);return}let i=yield r.json();if(i.files?.length>0){this.fileId=i.files[0].id,this.storeFileId(this.fileId),yield this.doSave(e);return}let o="part-manager-boundary-"+Date.now(),s=JSON.stringify({name:wx,parents:["root"]}),c=`--${o}\r
Content-Type: application/json; charset=UTF-8\r
\r
${s}\r
--${o}\r
Content-Type: application/json\r
\r
${e}\r
--${o}--`,l=yield fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":`multipart/related; boundary=${o}`},body:c});if(l.status===401){this.connectedSignal.set(!1),this.accessToken=null;return}if(!l.ok){this.lastError.set(`Create failed: ${l.status}`);return}let u=yield l.json();this.fileId=u.id,this.storeFileId(this.fileId),this.lastError.set(null)})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};var uh="apartment-manager-data",Qv="current-apartment-id",Mt=class n{constructor(){this.cloudSync=k(lh);this.googleDrive=k(Qr);this.apartmentsSignal=K(this.loadFromStorage());this.currentApartmentIdSignal=K(this.loadCurrentApartmentId());this.apartments=this.apartmentsSignal.asReadonly();this.currentApartmentId=this.currentApartmentIdSignal.asReadonly();this.currentApartment=Qt(()=>{let e=this.currentApartmentIdSignal();return e&&this.apartmentsSignal().find(t=>t.id===e)||null});this.isSyncingToCloud=!1;this.initializeCloudSync(),Ei(()=>{let e=this.apartmentsSignal();this.isSyncingToCloud||this.cloudSync.syncToCloud(e)})}initializeCloudSync(){return L(this,null,function*(){window.addEventListener("cloud-sync-update",t=>{let r=t.detail;if(r&&r.length>=0){this.isSyncingToCloud=!0;let i=this.currentApartmentIdSignal();this.apartmentsSignal.set(r),localStorage.setItem(uh,JSON.stringify(r)),i&&this.setCurrentApartment(i),setTimeout(()=>{this.isSyncingToCloud=!1},100)}});let e=yield this.cloudSync.syncFromCloud();if(e&&e.length>0){let t=this.apartmentsSignal();(t.length===0||this.isCloudDataNewer(e,t))&&(this.isSyncingToCloud=!0,this.apartmentsSignal.set(e),localStorage.setItem(uh,JSON.stringify(e)),setTimeout(()=>{this.isSyncingToCloud=!1},100))}})}isCloudDataNewer(e,t){return e.length>t.length}loadFromStorage(){let e=localStorage.getItem(uh);return(e?JSON.parse(e):[]).map(r=>W(N({},r),{tenants:r.tenants||[]}))}loadCurrentApartmentId(){return localStorage.getItem(Qv)}saveToStorage(){let e=JSON.stringify(this.apartmentsSignal());localStorage.setItem(uh,e),this.googleDrive.connected()&&this.googleDrive.saveToDrive(this.exportData())}saveCurrentApartmentId(e){e?localStorage.setItem(Qv,e):localStorage.removeItem(Qv)}generateId(){return crypto.randomUUID()}getCurrentApartment(){return this.currentApartment()}setCurrentApartment(e){this.currentApartmentIdSignal.set(e),this.saveCurrentApartmentId(e)}addApartment(e){let t={id:this.generateId(),name:e,rooms:[],expenses:[],tenants:[]};this.apartmentsSignal.update(r=>[...r,t]),this.saveToStorage(),this.currentApartmentIdSignal()||this.setCurrentApartment(t.id)}removeApartment(e){if(this.apartmentsSignal.update(t=>t.filter(r=>r.id!==e)),this.saveToStorage(),this.currentApartmentIdSignal()===e){let t=this.apartmentsSignal();this.setCurrentApartment(t.length>0?t[0].id:null)}}updateApartmentName(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?W(N({},i),{name:t}):i)),this.saveToStorage()}addRoom(e,t){let r=W(N({},t),{id:this.generateId()});this.apartmentsSignal.update(i=>i.map(o=>o.id===e?W(N({},o),{rooms:[...o.rooms,r]}):o)),this.saveToStorage()}updateRoom(e,t,r){this.apartmentsSignal.update(i=>i.map(o=>o.id===e?W(N({},o),{rooms:o.rooms.map(s=>s.id===t?N(N({},s),r):s)}):o)),this.saveToStorage()}removeRoom(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?W(N({},i),{rooms:i.rooms.filter(o=>o.id!==t)}):i)),this.saveToStorage()}addExpense(e,t){let r=W(N({},t),{id:this.generateId()});this.apartmentsSignal.update(i=>i.map(o=>o.id===e?W(N({},o),{expenses:[...o.expenses,r]}):o)),this.saveToStorage()}updateExpense(e,t,r){this.apartmentsSignal.update(i=>i.map(o=>o.id===e?W(N({},o),{expenses:o.expenses.map(s=>s.id===t?N(N({},s),r):s)}):o)),this.saveToStorage()}removeExpense(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?W(N({},i),{expenses:i.expenses.filter(o=>o.id!==t)}):i)),this.saveToStorage()}calculateMetrics(e){let t=e.rooms.filter(z=>z.isTaken),r=t.reduce((z,te)=>z+(te.rentMin+te.rentMax)/2,0),i=t.reduce((z,te)=>z+te.rentMin,0),o=t.reduce((z,te)=>z+te.rentMax,0),s=e.expenses.reduce((z,te)=>z+(te.cadence==="monthly"?te.amount:te.amount/12),0),c=r*12,l=s*12,u=r-s,h=c-l,p=i*12,y=o*12,g=i-s,D=o-s,O=p-l,F=y-l;return{monthlyRevenue:r,yearlyRevenue:c,monthlyCosts:s,yearlyCosts:l,monthlyProfit:u,yearlyProfit:h,minMonthlyRevenue:i,maxMonthlyRevenue:o,minYearlyRevenue:p,maxYearlyRevenue:y,minMonthlyProfit:g,maxMonthlyProfit:D,minYearlyProfit:O,maxYearlyProfit:F}}exportData(){return JSON.stringify(this.apartmentsSignal(),null,2)}importData(e){this.apartmentsSignal.set(e),this.saveToStorage()}addTenant(e,t){let r=W(N({},t),{id:this.generateId()});this.apartmentsSignal.update(i=>i.map(o=>o.id===e?W(N({},o),{tenants:[...o.tenants,r]}):o)),this.saveToStorage()}updateTenant(e,t,r){this.apartmentsSignal.update(i=>i.map(o=>o.id===e?W(N({},o),{tenants:o.tenants.map(s=>s.id===t?N(N({},s),r):s)}):o)),this.saveToStorage()}removeTenant(e,t){this.apartmentsSignal.update(r=>r.map(i=>i.id===e?W(N({},i),{tenants:i.tenants.filter(o=>o.id!==t)}):i)),this.saveToStorage()}toggleTenantOccupancyDate(e,t,r,i){this.apartmentsSignal.update(o=>o.map(s=>s.id===e?W(N({},s),{tenants:s.tenants.map(c=>{if(c.id!==t)return c;let l=c.disabledDates||[],u;return i?u=l.includes(r)?l:[...l,r]:u=l.filter(h=>h!==r),W(N({},c),{disabledDates:u.length>0?u:void 0})})}):s)),this.saveToStorage()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};var a2=(n,e)=>e.id;function c2(n,e){n&1&&(v(0,"option",3),E(1,"Select an apartment"),_())}function l2(n,e){if(n&1&&(v(0,"option",4),E(1),_()),n&2){let t=e.$implicit;ie("value",t.id),R(),Ae(t.name)}}var dh=class n{constructor(){this.apartmentService=k(Mt);this.apartments=this.apartmentService.apartments;this.currentApartmentId=this.apartmentService.currentApartmentId}onApartmentChange(e){let t=e.target;this.apartmentService.setCurrentApartment(t.value||null)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-apartment-selector"]],decls:7,vars:2,consts:[[1,"apartment-selector"],[1,"selector-label"],[1,"apartment-select",3,"change","value"],["value",""],[3,"value"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"label",1),E(2,"Apartment:"),_(),v(3,"select",2),$("change",function(o){return r.onApartmentChange(o)}),ue(4,c2,2,0,"option",3),It(5,l2,2,2,"option",4,a2),_()()),t&2&&(R(3),ie("value",r.currentApartmentId()||""),R(),ee(r.currentApartmentId()?-1:4),R(),Tt(r.apartments()))},styles:[".apartment-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm)}.selector-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--color-text-secondary)}.apartment-select[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);min-height:44px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease;min-width:180px}@media (max-width: 768px){.apartment-selector[_ngcontent-%COMP%]{width:100%}.apartment-select[_ngcontent-%COMP%]{flex:1;min-width:0}}.apartment-select[_ngcontent-%COMP%]:hover{border-color:var(--color-primary-light)}.apartment-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}"],changeDetection:0})}};var Yr=class n{constructor(){this.mobileMenuOpen=K(!1);this.showGoogleDriveModal=K(!1)}toggleMobileMenu(){this.mobileMenuOpen.update(e=>!e)}closeMobileMenu(){this.mobileMenuOpen.set(!1)}openGoogleDriveModal(){this.showGoogleDriveModal.set(!0)}closeGoogleDriveModal(){this.showGoogleDriveModal.set(!1)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}};var hh=class n{constructor(){this.layout=k(Yr)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-header"]],decls:9,vars:0,consts:[[1,"app-header"],[1,"header-left"],["type","button","aria-label","Open menu",1,"menu-btn",3,"click"],[1,"menu-icon"],[1,"header-right"]],template:function(t,r){t&1&&(v(0,"header",0)(1,"div",1)(2,"button",2),$("click",function(){return r.layout.toggleMobileMenu()}),We(3,"span",3)(4,"span",3)(5,"span",3),_(),We(6,"app-logo"),_(),v(7,"div",4),We(8,"app-apartment-selector"),_()())},dependencies:[rd,dh],styles:[".app-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg) var(--spacing-xl);padding-left:max(var(--spacing-lg),env(safe-area-inset-left));padding-right:max(var(--spacing-xl),env(safe-area-inset-right));background:var(--color-card-bg);border-bottom:1px solid var(--color-border);box-shadow:var(--shadow-sm)}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;min-width:0;justify-content:flex-end}.menu-btn[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:center;gap:5px;width:44px;height:44px;padding:0;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-primary);cursor:pointer;transition:background .2s ease}.menu-btn[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.menu-icon[_ngcontent-%COMP%]{display:block;width:20px;height:2px;background:currentColor;border-radius:1px}@media (max-width: 768px){.menu-btn[_ngcontent-%COMP%]{display:flex}.app-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-md)}.header-right[_ngcontent-%COMP%]{width:100%;order:3}}@media (min-width: 769px){.menu-btn[_ngcontent-%COMP%]{display:none}}"],changeDetection:0})}};var Rx=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Te(Lr),Te(rn))};static \u0275dir=tt({type:n})}return n})(),yh=(()=>{class n extends Rx{static \u0275fac=(()=>{let t;return function(i){return(t||(t=bn(n)))(i||n)}})();static \u0275dir=tt({type:n,features:[sn]})}return n})(),kc=new J("");var u2={provide:kc,useExisting:vn(()=>$t),multi:!0};function d2(){let n=an()?an().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var h2=new J(""),$t=(()=>{class n extends Rx{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!d2())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Te(Lr),Te(rn),Te(h2,8))};static \u0275dir=tt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[sr([u2]),sn]})}return n})();function f2(n){return n==null||p2(n)===0}function p2(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var vh=new J(""),m2=new J("");function g2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function y2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function v2(n){return f2(n.value)?{required:!0}:null}function Cx(n){return null}function Px(n){return n!=null}function Nx(n){return Oo(n)?Be(n):n}function Ox(n){let e={};return n.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function kx(n,e){return e.map(t=>t(n))}function _2(n){return!n.validate}function Vx(n){return n.map(e=>_2(e)?e:t=>e.validate(t))}function w2(n){if(!n)return null;let e=n.filter(Px);return e.length==0?null:function(t){return Ox(kx(t,e))}}function Lx(n){return n!=null?w2(Vx(n)):null}function b2(n){if(!n)return null;let e=n.filter(Px);return e.length==0?null:function(t){let r=kx(t,e).map(Nx);return Nf(r).pipe(be(Ox))}}function Fx(n){return n!=null?b2(Vx(n)):null}function Ex(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function C2(n){return n._rawValidators}function E2(n){return n._rawAsyncValidators}function Yv(n){return n?Array.isArray(n)?n:[n]:[]}function ph(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ix(n,e){let t=Yv(e);return Yv(n).forEach(i=>{ph(t,i)||t.push(i)}),t}function Tx(n,e){return Yv(e).filter(t=>!ph(n,t))}var mh=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Lx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Fx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Zv=class extends mh{name;get formDirective(){return null}get path(){return null}},Oc=class extends mh{_parent=null;name=null;valueAccessor=null},Jv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},I2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_G=W(N({},I2),{"[class.ng-submitted]":"isSubmitted"}),un=(()=>{class n extends Jv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Te(Oc,2))};static \u0275dir=tt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Kt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[sn]})}return n})();var Ac="VALID",fh="INVALID",Ss="PENDING",Rc="DISABLED",Ds=class{},gh=class extends Ds{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Pc=class extends Ds{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Nc=class extends Ds{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},xs=class extends Ds{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function T2(n){return(_h(n)?n.validators:n)||null}function S2(n){return Array.isArray(n)?Lx(n):n||null}function x2(n,e){return(_h(e)?e.asyncValidators:n)||null}function D2(n){return Array.isArray(n)?Fx(n):n||null}function _h(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Xv=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ci(this.statusReactive)}set status(e){Ci(()=>this.statusReactive.set(e))}_status=Qt(()=>this.statusReactive());statusReactive=K(void 0);get valid(){return this.status===Ac}get invalid(){return this.status===fh}get pending(){return this.status==Ss}get disabled(){return this.status===Rc}get enabled(){return this.status!==Rc}errors;get pristine(){return Ci(this.pristineReactive)}set pristine(e){Ci(()=>this.pristineReactive.set(e))}_pristine=Qt(()=>this.pristineReactive());pristineReactive=K(!0);get dirty(){return!this.pristine}get touched(){return Ci(this.touchedReactive)}set touched(e){Ci(()=>this.touchedReactive.set(e))}_touched=Qt(()=>this.touchedReactive());touchedReactive=K(!1);get untouched(){return!this.touched}_events=new qe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ix(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ix(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Tx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Tx(e,this._rawAsyncValidators))}hasValidator(e){return ph(this._rawValidators,e)}hasAsyncValidator(e){return ph(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(W(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Nc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Nc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(W(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Pc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Pc(!0,r))}markAsPending(e={}){this.status=Ss;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new xs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(W(N({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rc,this.errors=null,this._forEachChild(i=>{i.disable(W(N({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gh(this.value,r)),this._events.next(new xs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(W(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ac,this._forEachChild(r=>{r.enable(W(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(W(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ac||this.status===Ss)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gh(this.value,t)),this._events.next(new xs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(W(N({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rc:Ac}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ss,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Nx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new xs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?Rc:this.errors?fh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ss)?Ss:this._anyControlsHaveStatus(fh)?fh:Ac}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Pc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Nc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_h(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=S2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=D2(this._rawAsyncValidators)}};var jx=new J("",{providedIn:"root",factory:()=>e_}),e_="always";function M2(n,e){return[...e.path,n]}function A2(n,e,t=e_){P2(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),N2(n,e),k2(n,e),O2(n,e),R2(n,e)}function Sx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function R2(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function P2(n,e){let t=C2(n);e.validator!==null?n.setValidators(Ex(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=E2(n);e.asyncValidator!==null?n.setAsyncValidators(Ex(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Sx(e._rawValidators,i),Sx(e._rawAsyncValidators,i)}function N2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Ux(n,e)})}function O2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Ux(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Ux(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function k2(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function V2(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function L2(n){return Object.getPrototypeOf(n.constructor)===yh}function F2(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===$t?t=o:L2(o)?r=o:i=o}),i||r||t||null}function xx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Dx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var j2=class extends Xv{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(T2(t),x2(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_h(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Dx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Dx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var U2={provide:Oc,useExisting:vn(()=>Jt)},Mx=Promise.resolve(),Jt=(()=>{class n extends Oc{_changeDetectorRef;callSetDisabledState;control=new j2;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new at;constructor(t,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=F2(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),V2(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){A2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Mx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&bi(r);Mx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?M2(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Te(Zv,9),Te(vh,10),Te(m2,10),Te(kc,10),Te(Vo,8),Te(jx,8))};static \u0275dir=tt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[sr([U2]),sn,Vr]})}return n})();var B2={provide:kc,useExisting:vn(()=>Cr),multi:!0},Cr=(()=>{class n extends yh{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bn(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[sr([B2]),sn]})}return n})();var $2={provide:kc,useExisting:vn(()=>Ms),multi:!0};function Bx(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function H2(n){return n.split(":")[0]}var Ms=(()=>{class n extends yh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=Bx(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=H2(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bn(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[sr([$2]),sn]})}return n})(),wh=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Bx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Te(rn),Te(Lr),Te(Ms,9))};static \u0275dir=tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),z2={provide:kc,useExisting:vn(()=>$x),multi:!0};function Ax(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function q2(n){return n.split(":")[0]}var $x=(()=>{class n extends yh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=q2(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bn(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[sr([z2]),sn]})}return n})(),bh=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Ax(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Ax(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Te(rn),Te(Lr),Te($x,9))};static \u0275dir=tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function Hx(n){return typeof n=="number"?n:parseFloat(n)}var t_=(()=>{class n{_validator=Cx;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Cx,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,features:[Vr]})}return n})(),G2={provide:vh,useExisting:vn(()=>n_),multi:!0},n_=(()=>{class n extends t_{max;inputName="max";normalizeInput=t=>Hx(t);createValidator=t=>y2(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=bn(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_i("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[sr([G2]),sn]})}return n})(),W2={provide:vh,useExisting:vn(()=>Er),multi:!0},Er=(()=>{class n extends t_{min;inputName="min";normalizeInput=t=>Hx(t);createValidator=t=>g2(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=bn(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_i("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[sr([W2]),sn]})}return n})(),K2={provide:vh,useExisting:vn(()=>r_),multi:!0};var r_=(()=>{class n extends t_{required;inputName="required";normalizeInput=bi;createValidator=t=>v2;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bn(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&_i("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[sr([K2]),sn]})}return n})();var Q2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=No({type:n});static \u0275inj=Io({})}return n})();var Ht=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jx,useValue:t.callSetDisabledState??e_}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=No({type:n});static \u0275inj=Io({imports:[Q2]})}return n})();var Y2=()=>({exact:!0});function Z2(n,e){n&1&&We(0,"span",21)}var Ch=class n{constructor(){this.apartmentService=k(Mt);this.googleDrive=k(Qr);this.layout=k(Yr);this.newApartmentName=K("");this.showGoogleDrive=K(!1);this.gdriveConnected=this.googleDrive.connected}addApartment(){let e=this.newApartmentName().trim();e&&(this.apartmentService.addApartment(e),this.newApartmentName.set(""))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-sidebar"]],decls:49,vars:7,consts:[[1,"sidebar"],[1,"sidebar-nav"],[1,"nav-section-title"],[1,"nav-list"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link",3,"click","routerLinkActiveOptions"],[1,"nav-icon"],["routerLink","/expenses","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/rooms","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/tenants","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/bill-calculator","routerLinkActive","active",1,"nav-link",3,"click"],[1,"sidebar-forms"],[1,"form-section"],[1,"form-section-title"],[1,"input-group"],["type","text","placeholder","Apartment name...",3,"ngModelChange","keydown.enter","ngModel"],[1,"btn-primary",3,"click","disabled"],[1,"icon"],[1,"form-section","settings-section"],[1,"settings-actions"],[1,"btn-settings",3,"click"],[1,"sync-indicator"]],template:function(t,r){t&1&&(v(0,"aside",0)(1,"nav",1)(2,"h3",2),E(3,"Navigation"),_(),v(4,"ul",3)(5,"li",4)(6,"a",5),$("click",function(){return r.layout.closeMobileMenu()}),v(7,"span",6),E(8,"\u{1F4CA}"),_(),E(9," Dashboard "),_()(),v(10,"li",4)(11,"a",7),$("click",function(){return r.layout.closeMobileMenu()}),v(12,"span",6),E(13,"\u{1F4BC}"),_(),E(14," Expenses "),_()(),v(15,"li",4)(16,"a",8),$("click",function(){return r.layout.closeMobileMenu()}),v(17,"span",6),E(18,"\u{1F6AA}"),_(),E(19," Rooms "),_()(),v(20,"li",4)(21,"a",9),$("click",function(){return r.layout.closeMobileMenu()}),v(22,"span",6),E(23,"\u{1F465}"),_(),E(24," Tenants "),_()(),v(25,"li",4)(26,"a",10),$("click",function(){return r.layout.closeMobileMenu()}),v(27,"span",6),E(28,"\u{1F4B0}"),_(),E(29," Bill Calculator "),_()()()(),v(30,"div",11)(31,"section",12)(32,"h3",13),E(33,"Add Apartment"),_(),v(34,"div",14)(35,"input",15),De("ngModelChange",function(o){return Re(r.newApartmentName,o)||(r.newApartmentName=o),o}),$("keydown.enter",function(){return r.addApartment()}),_(),v(36,"button",16),$("click",function(){return r.addApartment()}),v(37,"span",17),E(38,"+"),_(),E(39," Add "),_()()(),v(40,"section",18)(41,"h3",13),E(42,"Data"),_(),v(43,"div",19)(44,"button",20),$("click",function(){return r.layout.openGoogleDriveModal()}),v(45,"span",17),E(46,"\u{1F4C1}"),_(),E(47," Save to Drive "),ue(48,Z2,1,0,"span",21),_()()()()()),t&2&&(R(6),ie("routerLinkActiveOptions",JE(6,Y2)),R(29),xe("ngModel",r.newApartmentName),R(),ie("disabled",!r.newApartmentName().trim()),R(8),Kt("active",r.gdriveConnected()),R(4),ee(r.gdriveConnected()?48:-1))},dependencies:[Ht,$t,un,Jt,Yo,_g],styles:[".sidebar[_ngcontent-%COMP%]{width:280px;max-width:85vw;background:var(--color-card-bg);border-right:1px solid var(--color-border);display:flex;flex-direction:column;height:100%;overflow-y:auto;flex-shrink:0}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;z-index:1001;transform:translate(-100%);transition:transform .2s ease;box-shadow:var(--shadow-xl);padding-top:env(safe-area-inset-top)}.sidebar-open[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%], .sidebar-open   [_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{transform:translate(0)}}.sidebar-nav[_ngcontent-%COMP%]{padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.nav-section-title[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:var(--color-text-secondary);text-transform:uppercase;letter-spacing:.05em;margin:0 0 var(--spacing-md) 0}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.nav-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xs)}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);min-height:44px;color:var(--color-text-secondary);text-decoration:none;border-radius:var(--border-radius-md);transition:all .2s ease;font-size:.9rem}.nav-link[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff}.nav-icon[_ngcontent-%COMP%]{font-size:1.1rem}.sidebar-forms[_ngcontent-%COMP%]{padding:var(--spacing-lg);flex:1}.form-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.form-section-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-md) 0}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);min-height:44px;border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.9rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-dark);transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.icon[_ngcontent-%COMP%]{font-size:1rem}.settings-section[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);padding-top:var(--spacing-lg);margin-top:var(--spacing-lg)}.settings-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.btn-settings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);min-height:44px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.875rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease;text-align:left}.btn-settings[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary-light)}.btn-settings.active[_ngcontent-%COMP%]{background:#10b9811a;border-color:var(--color-success)}.sync-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:var(--color-success);margin-left:auto}.empty-state[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:center;color:var(--color-text-tertiary);font-size:.9rem}"],changeDetection:0})}};function J2(n,e){if(n&1){let t=Se();v(0,"div",6)(1,"label"),E(2,"Native redirect URL (https)"),_(),v(3,"input",11),$("ngModelChange",function(i){U(t);let o=P();return B(o.gdrive.setNativeRedirectUri(i))}),_(),v(4,"p",12),E(5,"Your app URL + "),v(6,"code"),E(7,"/oauth-redirect"),_(),E(8,". Add this to Authorized redirect URIs. After auth, Google opens this URL and the page redirects back to the app."),_()()}if(n&2){let t=P();R(3),ie("ngModel",t.gdrive.nativeRedirectUri())}}function X2(n,e){if(n&1&&(v(0,"p",8),E(1," Add this to "),v(2,"strong"),E(3,"Authorized redirect URIs"),_(),E(4,": "),v(5,"code",13),E(6),_()()),n&2){let t=P();R(6),Ae(t.redirectUri)}}function ej(n,e){if(n&1&&(v(0,"p",8),E(1," Add this to "),v(2,"strong"),E(3,"Authorized redirect URIs"),_(),E(4,": "),v(5,"code",13),E(6),_()()),n&2){let t=P();R(6),Ae(t.gdrive.nativeRedirectUri())}}function tj(n,e){if(n&1&&(v(0,"p",9),E(1),_()),n&2){let t=P();R(),Ae(t.lastError())}}function nj(n,e){n&1&&(v(0,"span",16),E(1,"Saving\u2026"),_())}function rj(n,e){if(n&1){let t=Se();v(0,"div",14),We(1,"span",15),v(2,"span"),E(3,"Connected to Google Drive"),_(),ue(4,nj,2,0,"span",16),_(),v(5,"div",10)(6,"button",17),$("click",function(){U(t);let i=P();return B(i.disconnect())}),E(7,"Disconnect"),_(),v(8,"button",18),$("click",function(){U(t);let i=P();return B(i.close.emit())}),E(9,"Close"),_()()}if(n&2){let t=P();R(4),ee(t.isSaving()?4:-1)}}function ij(n,e){if(n&1){let t=Se();v(0,"div",10)(1,"button",19),$("click",function(){U(t);let i=P();return B(i.connect())}),E(2,"Connect Google Drive"),_(),v(3,"button",18),$("click",function(){U(t);let i=P();return B(i.close.emit())}),E(4,"Cancel"),_()()}}var Eh=class n{constructor(){this.gdrive=k(Qr);this.clientIdInput=K("");this.connected=this.gdrive.connected;this.lastError=this.gdrive.lastError;this.isSaving=this.gdrive.isSaving;this.close=et();Ei(()=>{let e=this.gdrive.clientId();this.clientIdInput.set(e)})}get redirectUri(){return this.gdrive.getRedirectUri()}ngOnInit(){this.gdrive.tryRestoreSession()}connect(){let e=this.clientIdInput().trim();e&&this.gdrive.setClientId(e),this.gdrive.connect()}disconnect(){this.gdrive.disconnect()}onBackdropClick(e){e.target===e.currentTarget&&this.close.emit()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-google-drive-settings"]],outputs:{close:"close"},decls:20,vars:6,consts:[[1,"gdrive-modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"help-text"],[1,"form-group"],["type","text","placeholder","xxx.apps.googleusercontent.com",3,"ngModelChange","ngModel"],[1,"redirect-uri-help"],[1,"error-text"],[1,"form-actions"],["type","url","placeholder","https://yourdomain.com/oauth-redirect",3,"ngModelChange","ngModel"],[1,"field-help"],[1,"redirect-uri-value"],[1,"status","connected"],[1,"status-dot"],[1,"saving"],["type","button",1,"btn-danger",3,"click"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"btn-primary",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0),$("click",function(o){return r.onBackdropClick(o)}),v(1,"div",1),$("click",function(o){return o.stopPropagation()}),v(2,"div",2)(3,"h2"),E(4,"Google Drive"),_(),v(5,"button",3),$("click",function(){return r.close.emit()}),E(6,"\u2715"),_()(),v(7,"div",4)(8,"p",5),E(9," Save part-manager.json to your Google Drive root. After connecting, every save will sync to Drive in the background. "),_(),v(10,"div",6)(11,"label"),E(12,"Google Client ID"),_(),v(13,"input",7),$("ngModelChange",function(o){return r.clientIdInput.set(o)}),_()(),ue(14,J2,9,1,"div",6)(15,X2,7,1,"p",8)(16,ej,7,1,"p",8)(17,tj,2,1,"p",9)(18,rj,10,1)(19,ij,5,0,"div",10),_()()()),t&2&&(R(13),ie("ngModel",r.clientIdInput()),R(),ee(r.gdrive.isNative?14:-1),R(),ee(r.gdrive.isNative?-1:15),R(),ee(r.gdrive.isNative&&r.gdrive.nativeRedirectUri()?16:-1),R(),ee(r.lastError()?17:-1),R(),ee(r.connected()?18:19))},dependencies:[Ht,$t,un,Jt],styles:[".gdrive-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1100;padding:var(--spacing-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--color-card-bg);border-radius:var(--border-radius-xl);box-shadow:var(--shadow-xl);max-width:480px;width:100%}@media (max-width: 768px){.gdrive-modal[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right));align-items:flex-start}.modal-content[_ngcontent-%COMP%]{max-height:calc(100vh - 2 * var(--spacing-md) - env(safe-area-inset-top) - env(safe-area-inset-bottom));overflow-y:auto}.btn-close[_ngcontent-%COMP%]{min-width:44px;min-height:44px}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:var(--color-text-primary)}.btn-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:1.2rem;cursor:pointer}.btn-close[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.help-text[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0 0 var(--spacing-lg) 0;font-size:.9rem;line-height:1.5}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);font-size:.875rem;font-weight:500;color:var(--color-text-primary)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.field-help[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);margin:var(--spacing-xs) 0 0 0;line-height:1.4}.field-help[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-size:.7rem}.redirect-uri-help[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-secondary);margin:0 0 var(--spacing-md) 0;line-height:1.5}.redirect-uri-value[_ngcontent-%COMP%]{display:inline-block;padding:var(--spacing-xs) var(--spacing-sm);background:var(--color-bg-secondary);border-radius:var(--border-radius-sm);font-family:JetBrains Mono,monospace;font-size:.75rem;word-break:break-all}.error-text[_ngcontent-%COMP%]{color:var(--color-error);font-size:.875rem;margin:0 0 var(--spacing-md) 0}.status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md);border-radius:var(--border-radius-md);background:var(--color-bg-secondary);margin-bottom:var(--spacing-lg)}.status.connected[_ngcontent-%COMP%]{background:#10b9811a}.status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:var(--color-text-tertiary)}.status.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:var(--color-success)}.saving[_ngcontent-%COMP%]{margin-left:auto;font-size:.85rem;color:var(--color-text-secondary)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);justify-content:flex-end}.btn-primary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.9rem;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark)}.btn-secondary[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.9rem;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.btn-danger[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--border-radius-md);background:var(--color-error);color:#fff;font-size:.9rem;font-weight:600;cursor:pointer}.btn-danger[_ngcontent-%COMP%]:hover{background:var(--color-error-dark)}"],changeDetection:0})}};function oj(n,e){if(n&1){let t=Se();v(0,"app-google-drive-settings",4),$("close",function(){U(t);let i=P();return B(i.layout.closeGoogleDriveModal())}),_()}}var Ih=class n{constructor(){this.layout=k(Yr)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-root"]],decls:8,vars:3,consts:[[1,"app-container"],[1,"backdrop",3,"click"],[1,"app-layout"],[1,"app-main"],[3,"close"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1),$("click",function(){return r.layout.closeMobileMenu()}),_(),We(2,"app-header"),v(3,"div",2),We(4,"app-sidebar"),v(5,"main",3),We(6,"router-outlet"),_()()(),ue(7,oj,1,0,"app-google-drive-settings")),t&2&&(Kt("sidebar-open",r.layout.mobileMenuOpen()),R(7),ee(r.layout.showGoogleDriveModal()?7:-1))},dependencies:[Wa,hh,Ch,Eh],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;min-height:100dvh;background:var(--color-bg-primary)}.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;height:100dvh;overflow:hidden}.backdrop[_ngcontent-%COMP%]{display:none;position:fixed;inset:0;z-index:1000;background:#00000080;opacity:0;pointer-events:none;transition:opacity .2s ease}@media (max-width: 768px){.app-container.sidebar-open[_ngcontent-%COMP%]   .backdrop[_ngcontent-%COMP%]{display:block;opacity:1;pointer-events:auto}}@media (min-width: 769px){.backdrop[_ngcontent-%COMP%]{display:none!important}}.app-layout[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.app-main[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;background:var(--color-bg-secondary)}@media (max-width: 768px){.app-main[_ngcontent-%COMP%]{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);padding-bottom:env(safe-area-inset-bottom)}}"],changeDetection:0})}};function sj(n,e){if(n&1&&(v(0,"span",3),E(1),_()),n&2){let t=P();R(),wi("",t.formatCurrency(t.minValue())," - ",t.formatCurrency(t.maxValue()),"")}}var Th=class n{constructor(){this.label=Ge.required();this.value=Ge.required();this.type=Ge("revenue");this.minValue=Ge(0);this.maxValue=Ge(0);this.showRange=Ge(!1);this.isNegative=Ge(!1)}formatCurrency(e){return new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-metrics-card"]],inputs:{label:[1,"label"],value:[1,"value"],type:[1,"type"],minValue:[1,"minValue"],maxValue:[1,"maxValue"],showRange:[1,"showRange"],isNegative:[1,"isNegative"]},decls:6,vars:7,consts:[[1,"metric-card"],[1,"metric-label"],[1,"metric-value"],[1,"metric-range"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"span",1),E(2),_(),v(3,"span",2),E(4),_(),ue(5,sj,2,2,"span",3),_()),t&2&&(FE(r.type()),Kt("negative",r.isNegative()),R(2),Ae(r.label()),R(2),Ae(r.formatCurrency(r.value())),R(),ee(r.showRange()&&r.minValue()!==r.maxValue()?5:-1))},styles:[".metric-card[_ngcontent-%COMP%]{padding:var(--spacing-md);border-radius:var(--border-radius-lg);display:flex;flex-direction:column;gap:var(--spacing-xs);border:1px solid var(--color-border);background:var(--color-card-bg);box-shadow:var(--shadow-sm);transition:all .2s ease}.metric-card[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);transform:translateY(-1px)}.metric-card.revenue[_ngcontent-%COMP%]{border-left:3px solid var(--color-success)}.metric-card.costs[_ngcontent-%COMP%]{border-left:3px solid var(--color-warning)}.metric-card.profit[_ngcontent-%COMP%]{border-left:3px solid var(--color-primary)}.metric-card.profit.negative[_ngcontent-%COMP%]{border-left-color:var(--color-error)}.metric-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary);text-transform:uppercase;letter-spacing:.05em;font-weight:600}.metric-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;font-family:JetBrains Mono,monospace;color:var(--color-text-primary)}.metric-card.revenue[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-success-dark)}.metric-card.costs[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-warning-dark)}.metric-card.profit[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-primary)}.metric-card.profit.negative[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{color:var(--color-error)}.metric-range[_ngcontent-%COMP%]{font-size:.7rem;color:var(--color-text-tertiary);font-family:JetBrains Mono,monospace}"],changeDetection:0})}};var aj=(n,e)=>e.id;function cj(n,e){n&1&&(v(0,"div",1)(1,"div",3),E(2,"\u{1F3E0}"),_(),v(3,"h3"),E(4,"No apartment selected"),_(),v(5,"p"),E(6,"Select an apartment from the dropdown above or add a new apartment from the sidebar"),_()())}function lj(n,e){n&1&&(v(0,"p",19),E(1,"No upcoming rent collections this month"),_())}function uj(n,e){if(n&1&&(v(0,"span",30),E(1),_()),n&2){let t=P().$implicit,r=P(3);R(),wi(" (",r.formatCurrency(t.amountMin)," - ",r.formatCurrency(t.amountMax),") ")}}function dj(n,e){if(n&1&&(v(0,"div",21)(1,"div",22)(2,"span",23),E(3),_(),v(4,"span",24),E(5),_()(),v(6,"div",25)(7,"div",26),E(8),_(),v(9,"div",27),E(10),_()(),v(11,"div",28)(12,"span",29),E(13),_(),ue(14,uj,2,2,"span",30),_()()),n&2){let t=e.$implicit,r=P(3);R(3),Ae(t.day),R(2),Ae(t.monthName),R(3),Ae(t.tenantName),R(2),St("Room: ",t.roomName,""),R(3),Ae(r.formatCurrency(t.amount)),R(),ee(t.amountMin!==t.amountMax?14:-1)}}function hj(n,e){if(n&1&&(v(0,"div",20),It(1,dj,15,6,"div",21,aj),_()),n&2){P();let t=YE(29);R(),Tt(t)}}function fj(n,e){if(n&1){let t=Se();v(0,"div",2)(1,"div",4)(2,"input",5),$("blur",function(i){U(t);let o=P();return B(o.onApartmentNameChange(i))})("keydown.enter",function(i){U(t);let o=P();return B(o.blurTarget(i))}),_()(),v(3,"section",6)(4,"h3",7),E(5,"Financial Summary"),_(),ko(6),v(7,"div",8)(8,"div",9)(9,"h4",10),E(10,"Revenue"),_(),v(11,"div",11),We(12,"app-metrics-card",12)(13,"app-metrics-card",13),_()(),v(14,"div",9)(15,"h4",10),E(16,"Costs"),_(),v(17,"div",11),We(18,"app-metrics-card",14)(19,"app-metrics-card",15),_()(),v(20,"div",9)(21,"h4",10),E(22,"Profit"),_(),v(23,"div",11),We(24,"app-metrics-card",16)(25,"app-metrics-card",17),_()()()(),v(26,"section",18)(27,"h3",7),E(28,"Upcoming Rent Collections"),_(),ko(29),ue(30,lj,2,0,"p",19)(31,hj,3,0,"div",20),_()()}if(n&2){let t=P();R(2),ie("value",t.currentApartment().name);let r=t.getMetrics();R(10),ie("value",r.monthlyRevenue)("minValue",r.minMonthlyRevenue)("maxValue",r.maxMonthlyRevenue)("showRange",!0),R(),ie("value",r.yearlyRevenue)("minValue",r.minYearlyRevenue)("maxValue",r.maxYearlyRevenue)("showRange",!0),R(5),ie("value",r.monthlyCosts),R(),ie("value",r.yearlyCosts),R(5),ie("value",r.monthlyProfit)("isNegative",r.monthlyProfit<0)("minValue",r.minMonthlyProfit)("maxValue",r.maxMonthlyProfit)("showRange",!0),R(),ie("value",r.yearlyProfit)("isNegative",r.yearlyProfit<0)("minValue",r.minYearlyProfit)("maxValue",r.maxYearlyProfit)("showRange",!0),R(4);let i=QE(t.getUpcomingRentCollections());R(),ee(i.length===0?30:31)}}var Sh=class n{constructor(){this.apartmentService=k(Mt);this.currentApartment=this.apartmentService.currentApartment}getMetrics(){let e=this.currentApartment();return e?this.apartmentService.calculateMetrics(e):{monthlyRevenue:0,yearlyRevenue:0,monthlyCosts:0,yearlyCosts:0,monthlyProfit:0,yearlyProfit:0,minMonthlyRevenue:0,maxMonthlyRevenue:0,minYearlyRevenue:0,maxYearlyRevenue:0,minMonthlyProfit:0,maxMonthlyProfit:0,minYearlyProfit:0,maxYearlyProfit:0}}getUpcomingRentCollections(){let e=this.currentApartment();if(!e)return[];let t=new Date,r=t.getMonth(),i=t.getFullYear(),o=new Date(i,r+1,0).getDate(),s=t.getDate(),c=[];for(let l of e.tenants){if(!l.rentCollectionDay)continue;let u=l.rentCollectionDay,h=e.rooms.find(p=>p.id===l.roomId);if(h&&u>=s&&u<=o){let y=new Date(i,r,u).toLocaleDateString("en-US",{month:"short"}),g=(h.rentMin+h.rentMax)/2;c.push({id:`${l.id}-${u}`,day:u,monthName:y,tenantName:l.name,roomName:h.name,amount:g,amountMin:h.rentMin,amountMax:h.rentMax})}}return c.sort((l,u)=>l.day-u.day)}formatCurrency(e){return new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}onApartmentNameChange(e){let t=this.currentApartment();if(!t)return;let r=e.target,i=r.value.trim();i&&i!==t.name?this.apartmentService.updateApartmentName(t.id,i):r.value=t.name}blurTarget(e){e.target.blur()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[[1,"dashboard-container"],[1,"empty-state"],[1,"dashboard-content"],[1,"empty-icon"],[1,"dashboard-header"],["type","text",1,"apartment-title-input",3,"blur","keydown.enter","value"],[1,"metrics-section"],[1,"section-title"],[1,"metrics-columns"],[1,"metrics-column"],[1,"column-title"],[1,"column-cards"],["label","Monthly Revenue","type","revenue",3,"value","minValue","maxValue","showRange"],["label","Yearly Revenue","type","revenue",3,"value","minValue","maxValue","showRange"],["label","Monthly Costs","type","costs",3,"value"],["label","Yearly Costs","type","costs",3,"value"],["label","Monthly Profit","type","profit",3,"value","isNegative","minValue","maxValue","showRange"],["label","Yearly Profit","type","profit",3,"value","isNegative","minValue","maxValue","showRange"],[1,"rent-collections-section"],[1,"no-collections"],[1,"collections-list"],[1,"collection-item"],[1,"collection-date"],[1,"date-day"],[1,"date-month"],[1,"collection-details"],[1,"collection-tenant"],[1,"collection-room"],[1,"collection-amount"],[1,"amount-value"],[1,"amount-range"]],template:function(t,r){t&1&&(v(0,"div",0),ue(1,cj,7,0,"div",1)(2,fj,32,23,"div",2),_()),t&2&&(R(),ee(r.currentApartment()?2:1))},dependencies:[Th,Ht],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.dashboard-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.apartment-title-input[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0;background:transparent;border:2px solid transparent;border-radius:var(--border-radius-md);padding:var(--spacing-xs) var(--spacing-sm);font-family:inherit;width:100%;max-width:600px;transition:all .2s ease}.apartment-title-input[_ngcontent-%COMP%]:hover{border-color:var(--color-border);background:var(--color-bg-secondary)}.apartment-title-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);background:var(--color-card-bg);box-shadow:0 0 0 3px #2563eb1a}.metrics-section[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-lg) 0}.metrics-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--spacing-xl)}.metrics-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);align-items:stretch}.column-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-secondary);margin:0 0 var(--spacing-xs) 0;padding-left:calc(3px + var(--spacing-md));text-transform:uppercase;letter-spacing:.05em}.column-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}@media (max-width: 1024px){.metrics-columns[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.apartment-title-input[_ngcontent-%COMP%]{font-size:1.5rem}.metrics-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}.collection-item[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-md)}.collection-amount[_ngcontent-%COMP%]{width:100%;align-items:flex-start}}.rent-collections-section[_ngcontent-%COMP%]{margin-top:var(--spacing-xl)}.no-collections[_ngcontent-%COMP%]{color:var(--color-text-secondary);text-align:center;padding:var(--spacing-lg);margin:0}.collections-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.collection-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-lg);padding:var(--spacing-md);background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);transition:all .2s ease}.collection-item[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary-light)}.collection-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:60px;padding:var(--spacing-sm);background:var(--color-primary);border-radius:var(--border-radius-md);color:#fff}.date-day[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;line-height:1}.date-month[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;text-transform:uppercase;opacity:.9}.collection-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--spacing-xs)}.collection-tenant[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-primary)}.collection-room[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-secondary)}.collection-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--spacing-xs)}.amount-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-primary)}.amount-range[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-secondary)}"],changeDetection:0})}};var pj=(n,e)=>e.id;function mj(n,e){if(n&1){let t=Se();v(0,"div",2)(1,"input",5),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newExpenseName,i)||(o.newExpenseName=i),B(i)}),_(),v(2,"div",6)(3,"input",7),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newExpenseAmount,i)||(o.newExpenseAmount=i),B(i)}),_(),v(4,"select",8),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newExpenseCadence,i)||(o.newExpenseCadence=i),B(i)}),v(5,"option",9),E(6,"Monthly"),_(),v(7,"option",10),E(8,"Yearly"),_()()(),v(9,"div",11)(10,"button",12),$("click",function(){U(t);let i=P();return B(i.handleAdd())}),E(11,"Add"),_(),v(12,"button",13),$("click",function(){U(t);let i=P();return B(i.showAddForm.set(!1))}),E(13,"Cancel"),_()()()}if(n&2){let t=P();R(),xe("ngModel",t.newExpenseName),R(2),xe("ngModel",t.newExpenseAmount),R(),xe("ngModel",t.newExpenseCadence)}}function gj(n,e){n&1&&(v(0,"p",3),E(1,"No expenses added yet"),_())}function yj(n,e){if(n&1){let t=Se();v(0,"div",14)(1,"div",15)(2,"input",16),$("blur",function(i){let o=U(t).$implicit,s=P(2);return B(s.onExpenseNameChange(o.id,i))})("keydown.enter",function(i){U(t);let o=P(2);return B(o.blurTarget(i))}),_(),v(3,"div",17)(4,"input",18),$("blur",function(i){let o=U(t).$implicit,s=P(2);return B(s.onAmountChange(o.id,i))})("keydown.enter",function(i){U(t);let o=P(2);return B(o.blurTarget(i))}),_(),v(5,"select",19),$("change",function(i){let o=U(t).$implicit,s=P(2);return B(s.onCadenceChange(o.id,i))}),v(6,"option",9),E(7,"Monthly"),_(),v(8,"option",10),E(9,"Yearly"),_()()()(),v(10,"button",20),$("click",function(){let i=U(t).$implicit,o=P(2);return B(o.onRemove(i.id))}),E(11,"\u2715"),_()()}if(n&2){let t=e.$implicit;R(2),ie("value",t.name),R(2),ie("value",t.amount),R(),ie("value",t.cadence)}}function vj(n,e){if(n&1&&(v(0,"div",4),It(1,yj,12,3,"div",14,pj),_()),n&2){let t=P();R(),Tt(t.expenses())}}var xh=class n{constructor(){this.expenses=Ge.required();this.expenseAdded=et();this.expenseUpdated=et();this.expenseRemoved=et();this.showAddForm=K(!1);this.newExpenseName=K("");this.newExpenseAmount=K(0);this.newExpenseCadence=K("monthly")}handleAdd(){let e=this.newExpenseName().trim();e&&(this.expenseAdded.emit({name:e,amount:this.newExpenseAmount(),cadence:this.newExpenseCadence()}),this.newExpenseName.set(""),this.newExpenseAmount.set(0),this.newExpenseCadence.set("monthly"),this.showAddForm.set(!1))}onExpenseNameChange(e,t){let r=t.target;this.expenseUpdated.emit({id:e,updates:{name:r.value}})}onAmountChange(e,t){let r=t.target;this.expenseUpdated.emit({id:e,updates:{amount:+r.value}})}onCadenceChange(e,t){let r=t.target;this.expenseUpdated.emit({id:e,updates:{cadence:r.value}})}onRemove(e){this.expenseRemoved.emit(e)}blurTarget(e){e.target.blur()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-expense-list"]],inputs:{expenses:[1,"expenses"]},outputs:{expenseAdded:"expenseAdded",expenseUpdated:"expenseUpdated",expenseRemoved:"expenseRemoved"},decls:8,vars:2,consts:[[1,"section-header"],[1,"btn-add-small",3,"click"],[1,"add-form"],[1,"empty-list"],[1,"expenses-list"],["type","text","placeholder","Expense name",3,"ngModelChange","ngModel"],[1,"expense-inputs"],["type","number","placeholder","Amount","min","0",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","monthly"],["value","yearly"],[1,"form-actions"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"],[1,"expense-item"],[1,"expense-info"],["type","text",1,"inline-edit",3,"blur","keydown.enter","value"],[1,"expense-amount"],["type","number","min","0",1,"inline-number",3,"blur","keydown.enter","value"],[3,"change","value"],[1,"btn-delete-small",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h3"),E(2,"Expenses"),_(),v(3,"button",1),$("click",function(){return r.showAddForm.set(!0)}),E(4,"+ Add Expense"),_()(),ue(5,mj,14,3,"div",2)(6,gj,2,0,"p",3)(7,vj,3,0,"div",4)),t&2&&(R(5),ee(r.showAddForm()?5:-1),R(),ee(r.expenses().length===0?6:7))},dependencies:[Ht,wh,bh,$t,Cr,Ms,un,Er,Jt],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-sm)}.expense-inputs[_ngcontent-%COMP%]{flex-wrap:wrap}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-height:44px}}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1rem;font-weight:600;margin:0}.btn-add-small[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:transparent;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-add-small[_ngcontent-%COMP%]:hover{background:var(--color-primary-lighter);background-opacity:.1;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-lg);padding:var(--spacing-md);margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.expense-inputs[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:center}.expense-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.expense-inputs[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:120px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn-confirm[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-md);margin:0}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.expense-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);transition:all .2s ease}.expense-item[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.expense-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);flex:1}.inline-edit[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--color-text-primary);font-size:.95rem;font-weight:500;font-family:inherit;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);width:100%;transition:all .2s ease}.inline-edit[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-edit[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary)}.expense-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);color:var(--color-text-secondary);font-size:.85rem}.inline-number[_ngcontent-%COMP%]{width:70px;background:transparent;border:none;color:var(--color-text-secondary);font-size:.85rem;font-family:JetBrains Mono,monospace;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);transition:all .2s ease}.inline-number[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-number[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary);color:var(--color-text-primary)}.inline-number[_ngcontent-%COMP%]::-webkit-inner-spin-button, .inline-number[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.expense-amount[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-sm);background:var(--color-card-bg);color:var(--color-text-secondary);font-size:.8rem;font-family:inherit;cursor:pointer}.expense-amount[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.btn-delete-small[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:.8rem;cursor:pointer;transition:all .2s ease}.btn-delete-small[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}"],changeDetection:0})}};function _j(n,e){n&1&&(v(0,"div",3)(1,"div",5),E(2,"\u{1F4BC}"),_(),v(3,"h3"),E(4,"No apartment selected"),_(),v(5,"p"),E(6,"Select an apartment from the dropdown above to manage expenses"),_()())}function wj(n,e){if(n&1){let t=Se();v(0,"div",4)(1,"app-expense-list",6),$("expenseAdded",function(i){U(t);let o=P();return B(o.onExpenseAdded(i))})("expenseUpdated",function(i){U(t);let o=P();return B(o.onExpenseUpdated(i))})("expenseRemoved",function(i){U(t);let o=P();return B(o.onExpenseRemoved(i))}),_()()}if(n&2){let t=P();R(),ie("expenses",t.currentApartment().expenses)}}var Dh=class n{constructor(){this.apartmentService=k(Mt);this.currentApartment=this.apartmentService.currentApartment}onExpenseAdded(e){let t=this.currentApartment();t&&this.apartmentService.addExpense(t.id,e)}onExpenseUpdated(e){let t=this.currentApartment();t&&this.apartmentService.updateExpense(t.id,e.id,e.updates)}onExpenseRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removeExpense(t.id,e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-expenses"]],decls:8,vars:2,consts:[[1,"expenses-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"expenses-content"],[1,"empty-icon"],[3,"expenseAdded","expenseUpdated","expenseRemoved","expenses"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),E(3,"Expenses"),_(),v(4,"p",2),E(5),_()(),ue(6,_j,7,0,"div",3)(7,wj,2,1,"div",4),_()),t&2){let i;R(5),St("Manage expenses for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),R(),ee(r.currentApartment()?7:6)}},dependencies:[xh],styles:[".expenses-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.expenses-content[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.expenses-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var bj=(n,e)=>e.id;function Cj(n,e){if(n&1){let t=Se();v(0,"div",2)(1,"input",5),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newRoomName,i)||(o.newRoomName=i),B(i)}),_(),v(2,"div",6)(3,"input",7),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newRoomRentMin,i)||(o.newRoomRentMin=i),B(i)}),_(),v(4,"span",8),E(5,"-"),_(),v(6,"input",9),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newRoomRentMax,i)||(o.newRoomRentMax=i),B(i)}),_()(),v(7,"div",10)(8,"button",11),$("click",function(){U(t);let i=P();return B(i.handleAdd())}),E(9,"Add"),_(),v(10,"button",12),$("click",function(){U(t);let i=P();return B(i.showAddForm.set(!1))}),E(11,"Cancel"),_()()()}if(n&2){let t=P();R(),xe("ngModel",t.newRoomName),R(2),xe("ngModel",t.newRoomRentMin),R(3),xe("ngModel",t.newRoomRentMax)}}function Ej(n,e){n&1&&(v(0,"p",3),E(1,"No rooms added yet"),_())}function Ij(n,e){if(n&1){let t=Se();v(0,"div",14)(1,"div",15)(2,"input",16),$("blur",function(i){let o=U(t).$implicit,s=P(2);return B(s.onRoomNameChange(o.id,i))})("keydown.enter",function(i){U(t);let o=P(2);return B(o.blurTarget(i))}),_(),v(3,"div",17)(4,"input",18),$("blur",function(i){let o=U(t).$implicit,s=P(2);return B(s.onRentMinChange(o.id,i))})("keydown.enter",function(i){U(t);let o=P(2);return B(o.blurTarget(i))}),_(),v(5,"span"),E(6,"-"),_(),v(7,"input",18),$("blur",function(i){let o=U(t).$implicit,s=P(2);return B(s.onRentMaxChange(o.id,i))})("keydown.enter",function(i){U(t);let o=P(2);return B(o.blurTarget(i))}),_(),v(8,"span",19),E(9,"AED/mo"),_()()(),v(10,"div",20)(11,"label",21)(12,"input",22),$("change",function(){let i=U(t).$implicit,o=P(2);return B(o.onTakenChange(i.id,i.isTaken))}),_(),v(13,"span",23),E(14,"Taken"),_()(),v(15,"button",24),$("click",function(){let i=U(t).$implicit,o=P(2);return B(o.onRemove(i.id))}),E(16,"\u2715"),_()()()}if(n&2){let t=e.$implicit;Kt("taken",t.isTaken),R(2),ie("value",t.name),R(2),ie("value",t.rentMin),R(3),ie("value",t.rentMax),R(5),ie("checked",t.isTaken)}}function Tj(n,e){if(n&1&&(v(0,"div",4),It(1,Ij,17,6,"div",13,bj),_()),n&2){let t=P();R(),Tt(t.rooms())}}var Mh=class n{constructor(){this.rooms=Ge.required();this.roomAdded=et();this.roomUpdated=et();this.roomRemoved=et();this.showAddForm=K(!1);this.newRoomName=K("");this.newRoomRentMin=K(0);this.newRoomRentMax=K(0)}handleAdd(){let e=this.newRoomName().trim();e&&(this.roomAdded.emit({name:e,rentMin:this.newRoomRentMin(),rentMax:this.newRoomRentMax()}),this.newRoomName.set(""),this.newRoomRentMin.set(0),this.newRoomRentMax.set(0),this.showAddForm.set(!1))}onRoomNameChange(e,t){let r=t.target;this.roomUpdated.emit({id:e,updates:{name:r.value}})}onRentMinChange(e,t){let r=t.target;this.roomUpdated.emit({id:e,updates:{rentMin:+r.value}})}onRentMaxChange(e,t){let r=t.target;this.roomUpdated.emit({id:e,updates:{rentMax:+r.value}})}onTakenChange(e,t){this.roomUpdated.emit({id:e,updates:{isTaken:!t}})}onRemove(e){this.roomRemoved.emit(e)}blurTarget(e){e.target.blur()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-room-list"]],inputs:{rooms:[1,"rooms"]},outputs:{roomAdded:"roomAdded",roomUpdated:"roomUpdated",roomRemoved:"roomRemoved"},decls:8,vars:2,consts:[[1,"section-header"],[1,"btn-add-small",3,"click"],[1,"add-form"],[1,"empty-list"],[1,"rooms-list"],["type","text","placeholder","Room name",3,"ngModelChange","ngModel"],[1,"rent-inputs"],["type","number","placeholder","Min rent","min","0",3,"ngModelChange","ngModel"],[1,"separator"],["type","number","placeholder","Max rent","min","0",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"],[1,"room-item",3,"taken"],[1,"room-item"],[1,"room-info"],["type","text",1,"inline-edit",3,"blur","keydown.enter","value"],[1,"rent-display"],["type","number","min","0",1,"inline-number",3,"blur","keydown.enter","value"],[1,"currency"],[1,"room-actions"],[1,"checkbox-label"],["type","checkbox",3,"change","checked"],[1,"checkbox-text"],[1,"btn-delete-small",3,"click"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h3"),E(2,"Rooms"),_(),v(3,"button",1),$("click",function(){return r.showAddForm.set(!0)}),E(4,"+ Add Room"),_()(),ue(5,Cj,12,3,"div",2)(6,Ej,2,0,"p",3)(7,Tj,3,0,"div",4)),t&2&&(R(5),ee(r.showAddForm()?5:-1),R(),ee(r.rooms().length===0?6:7))},dependencies:[Ht,$t,Cr,un,Er,Jt],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-sm)}.room-item[_ngcontent-%COMP%]{flex-wrap:wrap}.room-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-height:44px}}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1rem;font-weight:600;margin:0}.btn-add-small[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:transparent;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-add-small[_ngcontent-%COMP%]:hover{background:var(--color-primary-lighter);background-opacity:.1;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-lg);padding:var(--spacing-md);margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.rent-inputs[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);align-items:center}.rent-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.separator[_ngcontent-%COMP%]{color:var(--color-text-tertiary)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn-confirm[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-md);margin:0}.rooms-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.room-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);transition:all .2s ease}.room-item[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.room-item.taken[_ngcontent-%COMP%]{background:#10b9810d;border-color:var(--color-success)}.room-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);flex:1}.inline-edit[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--color-text-primary);font-size:.95rem;font-weight:500;font-family:inherit;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);width:100%;transition:all .2s ease}.inline-edit[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-edit[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary)}.rent-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);color:var(--color-text-secondary);font-size:.85rem}.inline-number[_ngcontent-%COMP%]{width:70px;background:transparent;border:none;color:var(--color-text-secondary);font-size:.85rem;font-family:JetBrains Mono,monospace;padding:var(--spacing-xs);border-radius:var(--border-radius-sm);transition:all .2s ease}.inline-number[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.inline-number[_ngcontent-%COMP%]:focus{outline:none;background:var(--color-bg-secondary);color:var(--color-text-primary)}.inline-number[_ngcontent-%COMP%]::-webkit-inner-spin-button, .inline-number[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.currency[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.75rem}.room-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:var(--color-success);cursor:pointer}.checkbox-text[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:.85rem}.btn-delete-small[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:.8rem;cursor:pointer;transition:all .2s ease}.btn-delete-small[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}"],changeDetection:0})}};function Sj(n,e){n&1&&(v(0,"div",3)(1,"div",5),E(2,"\u{1F6AA}"),_(),v(3,"h3"),E(4,"No apartment selected"),_(),v(5,"p"),E(6,"Select an apartment from the dropdown above to manage rooms"),_()())}function xj(n,e){if(n&1){let t=Se();v(0,"div",4)(1,"app-room-list",6),$("roomAdded",function(i){U(t);let o=P();return B(o.onRoomAdded(i))})("roomUpdated",function(i){U(t);let o=P();return B(o.onRoomUpdated(i))})("roomRemoved",function(i){U(t);let o=P();return B(o.onRoomRemoved(i))}),_()()}if(n&2){let t=P();R(),ie("rooms",t.currentApartment().rooms)}}var Ah=class n{constructor(){this.apartmentService=k(Mt);this.currentApartment=this.apartmentService.currentApartment}onRoomAdded(e){let t=this.currentApartment();t&&this.apartmentService.addRoom(t.id,{name:e.name,rentMin:e.rentMin,rentMax:e.rentMax,isTaken:!1})}onRoomUpdated(e){let t=this.currentApartment();t&&this.apartmentService.updateRoom(t.id,e.id,e.updates)}onRoomRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removeRoom(t.id,e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-rooms"]],decls:8,vars:2,consts:[[1,"rooms-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"rooms-content"],[1,"empty-icon"],[3,"roomAdded","roomUpdated","roomRemoved","rooms"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),E(3,"Rooms"),_(),v(4,"p",2),E(5),_()(),ue(6,Sj,7,0,"div",3)(7,xj,2,1,"div",4),_()),t&2){let i;R(5),St("Manage rooms for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),R(),ee(r.currentApartment()?7:6)}},dependencies:[Mh],styles:[".rooms-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.rooms-content[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.rooms-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var Dj=(n,e)=>e.date||e.day;function Mj(n,e){if(n&1){let t=Se();v(0,"div",8),$("click",function(){U(t);let i=P().$implicit,o=P();return B(o.toggleDate(i.date))}),v(1,"span",9),E(2),_()()}if(n&2){let t=P().$implicit,r=P();Kt("outside-range",!r.isInRange(t.date))("disabled",r.isDisabled(t.date))("today",r.isToday(t.date)),ie("title",r.getDayTitle(t.date)),R(2),Ae(t.day)}}function Aj(n,e){n&1&&We(0,"div",7)}function Rj(n,e){if(n&1&&ue(0,Mj,3,8,"div",6)(1,Aj,1,0,"div",7),n&2){let t=e.$implicit;ee(t.isCurrentMonth?0:1)}}var Rh=class n{constructor(){this.tenant=Ge.required();this.dateToggled=et();this.currentDate=new Date;this.currentYear=K(this.currentDate.getFullYear());this.currentMonth=K(this.currentDate.getMonth());this.monthYear=Qt(()=>new Date(this.currentYear(),this.currentMonth()).toLocaleDateString("en-US",{month:"long",year:"numeric"}));this.calendarDays=Qt(()=>{let e=this.currentYear(),t=this.currentMonth(),r=new Date(e,t,1),i=new Date(e,t+1,0),o=r.getDay(),s=i.getDate(),c=[];for(let p=0;p<o;p++)c.push({day:0,date:"",isCurrentMonth:!1});let l=new Date(r);for(;l<=i;){let p=this.formatDate(l);c.push({day:l.getDate(),date:p,isCurrentMonth:!0}),l.setDate(l.getDate()+1)}let h=(7-c.length%7)%7;for(let p=0;p<h;p++)c.push({day:0,date:"",isCurrentMonth:!1});return c})}isInRange(e){let t=this.tenant(),r=this.parseDate(e);if(t.startDate){let i=new Date(t.startDate);if(i.setHours(0,0,0,0),r<i)return!1}if(t.endDate){let i=new Date(t.endDate);if(i.setHours(23,59,59,999),r>i)return!1}return!0}isDisabled(e){return this.isInRange(e)&&this.tenant().disabledDates?.includes(e)||!1}isToday(e){let t=this.formatDate(new Date);return e===t}toggleDate(e){if(!this.isInRange(e))return;let t=this.isDisabled(e);this.dateToggled.emit({date:e,disabled:!t})}previousMonth(){this.currentMonth()===0?(this.currentMonth.set(11),this.currentYear.update(t=>t-1)):this.currentMonth.update(t=>t-1)}nextMonth(){this.currentMonth()===11?(this.currentMonth.set(0),this.currentYear.update(t=>t+1)):this.currentMonth.update(t=>t+1)}getDayTitle(e){let r=this.parseDate(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return this.isInRange(e)?this.isDisabled(e)?`${r} - Not occupied`:`${r} - Occupied`:`${r} - Outside contract period`}formatDate(e){return e.toISOString().split("T")[0]}parseDate(e){return new Date(e+"T00:00:00")}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-tenant-calendar"]],inputs:{tenant:[1,"tenant"]},outputs:{dateToggled:"dateToggled"},decls:25,vars:1,consts:[[1,"tenant-calendar"],[1,"calendar-header"],[1,"btn-nav",3,"click"],[1,"month-year"],[1,"calendar-grid"],[1,"day-header"],[1,"calendar-day",3,"outside-range","disabled","today","title"],[1,"calendar-day","empty-day"],[1,"calendar-day",3,"click","title"],[1,"day-number"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"button",2),$("click",function(){return r.previousMonth()}),E(3,"\u2039"),_(),v(4,"h3",3),E(5),_(),v(6,"button",2),$("click",function(){return r.nextMonth()}),E(7,"\u203A"),_()(),v(8,"div",4)(9,"div",5),E(10,"Sun"),_(),v(11,"div",5),E(12,"Mon"),_(),v(13,"div",5),E(14,"Tue"),_(),v(15,"div",5),E(16,"Wed"),_(),v(17,"div",5),E(18,"Thu"),_(),v(19,"div",5),E(20,"Fri"),_(),v(21,"div",5),E(22,"Sat"),_(),It(23,Rj,2,1,null,null,Dj),_()()),t&2&&(R(5),Ae(r.monthYear()),R(18),Tt(r.calendarDays()))},styles:[".tenant-calendar[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg)}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.btn-nav[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:1.2rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.btn-nav[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);border-color:var(--color-primary)}.month-year[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600;color:var(--color-text-primary)}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:var(--spacing-xs)}.day-header[_ngcontent-%COMP%]{text-align:center;font-size:.75rem;font-weight:600;color:var(--color-text-secondary);text-transform:uppercase;padding:var(--spacing-sm)}.calendar-day[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border:1px solid var(--color-border);border-radius:var(--border-radius-sm);background:var(--color-primary);cursor:pointer;transition:all .2s ease;position:relative}.calendar-day[_ngcontent-%COMP%]:hover:not(.outside-range){transform:scale(1.05);border-color:var(--color-primary-dark)}.calendar-day.outside-range[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border-color:transparent;cursor:not-allowed;opacity:.3}.calendar-day.disabled[_ngcontent-%COMP%]{background:#fff;border-color:var(--color-border)}.calendar-day.today[_ngcontent-%COMP%]{border:2px solid var(--color-primary)}.day-number[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#fff}.calendar-day.outside-range[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--color-text-secondary)}.calendar-day.disabled[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--color-text-primary)}.calendar-day.empty-day[_ngcontent-%COMP%]{background:transparent;border:none;cursor:default;pointer-events:none}"],changeDetection:0})}};function Pj(n,e){if(n&1){let t=Se();v(0,"app-tenant-calendar",6),$("dateToggled",function(i){U(t);let o=P();return B(o.onDateToggled(i))}),_()}if(n&2){let t=P();ie("tenant",t.tenant())}}var Ph=class n{constructor(){this.tenant=Ge(null);this.close=et();this.dateToggled=et()}onBackdropClick(e){e.target===e.currentTarget&&this.close.emit()}onDateToggled(e){this.dateToggled.emit(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-tenant-calendar-modal"]],inputs:{tenant:[1,"tenant"]},outputs:{close:"close",dateToggled:"dateToggled"},decls:9,vars:2,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[3,"tenant"],[3,"dateToggled","tenant"]],template:function(t,r){if(t&1&&(v(0,"div",0),$("click",function(o){return r.onBackdropClick(o)}),v(1,"div",1),$("click",function(o){return o.stopPropagation()}),v(2,"div",2)(3,"h2"),E(4),_(),v(5,"button",3),$("click",function(){return r.close.emit()}),E(6,"\u2715"),_()(),v(7,"div",4),ue(8,Pj,1,1,"app-tenant-calendar",5),_()()()),t&2){let i;R(4),St("Presence Calendar - ",(i=r.tenant())==null?null:i.name,""),R(4),ee(r.tenant()?8:-1)}},dependencies:[Rh],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--spacing-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--color-card-bg);border-radius:var(--border-radius-lg);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:600px;width:100%;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.btn-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:1.2rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.btn-close[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}@media (max-width: 768px){.modal-backdrop[_ngcontent-%COMP%]{padding:max(var(--spacing-md),env(safe-area-inset-top)) max(var(--spacing-md),env(safe-area-inset-right)) max(var(--spacing-md),env(safe-area-inset-bottom)) max(var(--spacing-md),env(safe-area-inset-left));align-items:flex-start}.modal-content[_ngcontent-%COMP%]{max-height:90dvh}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}}"],changeDetection:0})}};var i_=(n,e)=>e.id;function Nj(n,e){if(n&1&&(v(0,"option",12),E(1),_()),n&2){let t=e.$implicit;ie("value",t.id),R(),Ae(t.name)}}function Oj(n,e){if(n&1){let t=Se();v(0,"div",2)(1,"input",7),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newTenantName,i)||(o.newTenantName=i),B(i)}),_(),v(2,"input",8),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newTenantEmail,i)||(o.newTenantEmail=i),B(i)}),_(),v(3,"input",9),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newTenantPhone,i)||(o.newTenantPhone=i),B(i)}),_(),v(4,"select",10),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newTenantRoomId,i)||(o.newTenantRoomId=i),B(i)}),v(5,"option",11),E(6,"Select a room"),_(),It(7,Nj,2,2,"option",12,i_),_(),v(9,"div",13)(10,"input",14),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newTenantStartDate,i)||(o.newTenantStartDate=i),B(i)}),_(),v(11,"input",15),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newTenantEndDate,i)||(o.newTenantEndDate=i),B(i)}),_()(),v(12,"input",16),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newTenantRentCollectionDay,i)||(o.newTenantRentCollectionDay=i),B(i)}),_(),v(13,"textarea",17),De("ngModelChange",function(i){U(t);let o=P();return Re(o.newTenantNotes,i)||(o.newTenantNotes=i),B(i)}),_(),v(14,"div",18)(15,"button",19),$("click",function(){U(t);let i=P();return B(i.handleAdd())}),E(16,"Add"),_(),v(17,"button",20),$("click",function(){U(t);let i=P();return B(i.showAddForm.set(!1))}),E(18,"Cancel"),_()()()}if(n&2){let t=P();R(),xe("ngModel",t.newTenantName),R(),xe("ngModel",t.newTenantEmail),R(),xe("ngModel",t.newTenantPhone),R(),xe("ngModel",t.newTenantRoomId),R(3),Tt(t.rooms()),R(3),xe("ngModel",t.newTenantStartDate),R(),xe("ngModel",t.newTenantEndDate),R(),xe("ngModel",t.newTenantRentCollectionDay),R(),xe("ngModel",t.newTenantNotes)}}function kj(n,e){n&1&&(v(0,"p",3),E(1,"No tenants added yet"),_())}function Vj(n,e){if(n&1&&(v(0,"span",24),E(1),_()),n&2){let t=P().$implicit;R(),Ae(t.email)}}function Lj(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),_())}function Fj(n,e){if(n&1){let t=Se();v(0,"a",33),$("click",function(i){return U(t),B(i.stopPropagation())}),E(1),_()}if(n&2){let t=P().$implicit,r=P(2);ie("href",r.getWhatsAppUrl(t.phone),bm),R(),St(" ",t.phone," ")}}function jj(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),_())}function Uj(n,e){if(n&1&&(v(0,"span",27),E(1),_()),n&2){let t=P().$implicit,r=P(2);R(),Ae(r.formatDate(t.startDate))}}function Bj(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),_())}function $j(n,e){if(n&1&&(v(0,"span",27),E(1),_()),n&2){let t=P().$implicit,r=P(2);R(),Ae(r.formatDate(t.endDate))}}function Hj(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),_())}function zj(n,e){if(n&1&&(v(0,"span",28),E(1),_()),n&2){let t=P().$implicit;ie("title",t.notes),R(),Ae(t.notes.length>30?t.notes.substring(0,30)+"...":t.notes)}}function qj(n,e){n&1&&(v(0,"span",25),E(1,"\u2014"),_())}function Gj(n,e){if(n&1){let t=Se();v(0,"button",34),$("click",function(){U(t);let i=P().$implicit,o=P(2);return B(o.openCalendar(i))}),E(1," \u{1F4C5} "),_()}}function Wj(n,e){if(n&1){let t=Se();v(0,"tr")(1,"td")(2,"input",22),$("blur",function(i){let o=U(t).$implicit,s=P(2);return B(s.onTenantNameChange(o.id,i))})("keydown.enter",function(i){U(t);let o=P(2);return B(o.blurTarget(i))}),_()(),v(3,"td"),ko(4),v(5,"span",23),E(6),_()(),v(7,"td"),ue(8,Vj,2,1,"span",24)(9,Lj,2,0,"span",25),_(),v(10,"td"),ue(11,Fj,2,2,"a",26)(12,jj,2,0,"span",25),_(),v(13,"td"),ue(14,Uj,2,1,"span",27)(15,Bj,2,0,"span",25),_(),v(16,"td"),ue(17,$j,2,1,"span",27)(18,Hj,2,0,"span",25),_(),v(19,"td"),ue(20,zj,2,2,"span",28)(21,qj,2,0,"span",25),_(),v(22,"td")(23,"div",29)(24,"button",30),$("click",function(){let i=U(t).$implicit,o=P(2);return B(o.openEditModal(i))}),E(25,"\u270F\uFE0F"),_(),ue(26,Gj,2,0,"button",31),v(27,"button",32),$("click",function(){let i=U(t).$implicit,o=P(2);return B(o.onRemove(i.id))}),E(28,"\u2715"),_()()()()}if(n&2){let t=e.$implicit;R(2),ie("value",t.name);let r=P(2).getRoomName(t.roomId);R(4),Ae(r||"Unknown"),R(2),ee(t.email?8:9),R(3),ee(t.phone?11:12),R(3),ee(t.startDate?14:15),R(3),ee(t.endDate?17:18),R(3),ee(t.notes?20:21),R(6),ee(t.startDate?26:-1)}}function Kj(n,e){if(n&1&&(v(0,"div",4)(1,"table",21)(2,"thead")(3,"tr")(4,"th"),E(5,"Name"),_(),v(6,"th"),E(7,"Room"),_(),v(8,"th"),E(9,"Email"),_(),v(10,"th"),E(11,"Phone"),_(),v(12,"th"),E(13,"Start Date"),_(),v(14,"th"),E(15,"End Date"),_(),v(16,"th"),E(17,"Notes"),_(),v(18,"th"),E(19,"Actions"),_()()(),v(20,"tbody"),It(21,Wj,29,8,"tr",null,i_),_()()()),n&2){let t=P();R(21),Tt(t.tenants())}}function Qj(n,e){if(n&1){let t=Se();v(0,"app-tenant-calendar-modal",35),$("close",function(){U(t);let i=P();return B(i.closeCalendar())})("dateToggled",function(i){U(t);let o=P();return B(o.onOccupancyToggle(o.selectedTenantForCalendar().id,i))}),_()}if(n&2){let t=P();ie("tenant",t.selectedTenantForCalendar())}}function Yj(n,e){if(n&1&&(v(0,"option",12),E(1),_()),n&2){let t=e.$implicit;ie("value",t.id),R(),Ae(t.name)}}function Zj(n,e){if(n&1){let t=Se();v(0,"div",36),$("click",function(){U(t);let i=P();return B(i.closeEditModal())}),v(1,"div",37),$("click",function(i){return U(t),B(i.stopPropagation())}),v(2,"div",38)(3,"h2"),E(4,"Edit Tenant"),_(),v(5,"button",39),$("click",function(){U(t);let i=P();return B(i.closeEditModal())}),E(6,"\u2715"),_()(),v(7,"div",40)(8,"div",41)(9,"div",42)(10,"label"),E(11,"Name *"),_(),v(12,"input",7),De("ngModelChange",function(i){U(t);let o=P();return Re(o.editTenantName,i)||(o.editTenantName=i),B(i)}),_()(),v(13,"div",42)(14,"label"),E(15,"Room *"),_(),v(16,"select",10),De("ngModelChange",function(i){U(t);let o=P();return Re(o.editTenantRoomId,i)||(o.editTenantRoomId=i),B(i)}),v(17,"option",11),E(18,"Select a room"),_(),It(19,Yj,2,2,"option",12,i_),_()(),v(21,"div",42)(22,"label"),E(23,"Email"),_(),v(24,"input",8),De("ngModelChange",function(i){U(t);let o=P();return Re(o.editTenantEmail,i)||(o.editTenantEmail=i),B(i)}),_()(),v(25,"div",42)(26,"label"),E(27,"Phone"),_(),v(28,"input",9),De("ngModelChange",function(i){U(t);let o=P();return Re(o.editTenantPhone,i)||(o.editTenantPhone=i),B(i)}),_()(),v(29,"div",43)(30,"div",42)(31,"label"),E(32,"Start Date"),_(),v(33,"input",44),De("ngModelChange",function(i){U(t);let o=P();return Re(o.editTenantStartDate,i)||(o.editTenantStartDate=i),B(i)}),_()(),v(34,"div",42)(35,"label"),E(36,"End Date"),_(),v(37,"input",44),De("ngModelChange",function(i){U(t);let o=P();return Re(o.editTenantEndDate,i)||(o.editTenantEndDate=i),B(i)}),_()()(),v(38,"div",42)(39,"label"),E(40,"Rent Collection Day"),_(),v(41,"input",45),De("ngModelChange",function(i){U(t);let o=P();return Re(o.editTenantRentCollectionDay,i)||(o.editTenantRentCollectionDay=i),B(i)}),_()(),v(42,"div",42)(43,"label"),E(44,"Notes"),_(),v(45,"textarea",17),De("ngModelChange",function(i){U(t);let o=P();return Re(o.editTenantNotes,i)||(o.editTenantNotes=i),B(i)}),_()(),v(46,"div",18)(47,"button",19),$("click",function(){U(t);let i=P();return B(i.saveEdit())}),E(48,"Save"),_(),v(49,"button",20),$("click",function(){U(t);let i=P();return B(i.closeEditModal())}),E(50,"Cancel"),_()()()()()()}if(n&2){let t=P();R(12),xe("ngModel",t.editTenantName),R(4),xe("ngModel",t.editTenantRoomId),R(3),Tt(t.rooms()),R(5),xe("ngModel",t.editTenantEmail),R(4),xe("ngModel",t.editTenantPhone),R(5),xe("ngModel",t.editTenantStartDate),R(4),xe("ngModel",t.editTenantEndDate),R(4),xe("ngModel",t.editTenantRentCollectionDay),R(4),xe("ngModel",t.editTenantNotes)}}var Nh=class n{constructor(){this.tenants=Ge.required();this.rooms=Ge.required();this.tenantAdded=et();this.tenantUpdated=et();this.tenantRemoved=et();this.tenantOccupancyToggled=et();this.showAddForm=K(!1);this.newTenantName=K("");this.newTenantEmail=K("");this.newTenantPhone=K("");this.newTenantRoomId=K("");this.newTenantStartDate=K("");this.newTenantEndDate=K("");this.newTenantRentCollectionDay=K(void 0);this.newTenantNotes=K("");this.selectedTenantForCalendar=K(null);this.selectedTenantForEdit=K(null);this.editTenantName=K("");this.editTenantEmail=K("");this.editTenantPhone=K("");this.editTenantRoomId=K("");this.editTenantStartDate=K("");this.editTenantEndDate=K("");this.editTenantRentCollectionDay=K(void 0);this.editTenantNotes=K("")}getRoomName(e){return this.rooms().find(t=>t.id===e)?.name||""}handleAdd(){let e=this.newTenantName().trim(),t=this.newTenantRoomId();if(e&&t){let r=this.newTenantRentCollectionDay();this.tenantAdded.emit({name:e,email:this.newTenantEmail().trim()||void 0,phone:this.newTenantPhone().trim()||void 0,roomId:t,startDate:this.newTenantStartDate()||void 0,endDate:this.newTenantEndDate()||void 0,rentCollectionDay:r&&r>=1&&r<=31?r:void 0,notes:this.newTenantNotes().trim()||void 0}),this.newTenantName.set(""),this.newTenantEmail.set(""),this.newTenantPhone.set(""),this.newTenantRoomId.set(""),this.newTenantStartDate.set(""),this.newTenantEndDate.set(""),this.newTenantRentCollectionDay.set(void 0),this.newTenantNotes.set(""),this.showAddForm.set(!1)}}onTenantNameChange(e,t){let r=t.target;this.tenantUpdated.emit({id:e,updates:{name:r.value}})}onRemove(e){this.tenantRemoved.emit(e)}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}blurTarget(e){e.target.blur()}onOccupancyToggle(e,t){this.tenantOccupancyToggled.emit({id:e,date:t.date,disabled:t.disabled})}openCalendar(e){this.selectedTenantForCalendar.set(e)}closeCalendar(){this.selectedTenantForCalendar.set(null)}getWhatsAppUrl(e){return`https://wa.me/${e.replace(/[^\d+]/g,"").replace(/^\+/,"")}`}openEditModal(e){this.selectedTenantForEdit.set(e),this.editTenantName.set(e.name),this.editTenantEmail.set(e.email||""),this.editTenantPhone.set(e.phone||""),this.editTenantRoomId.set(e.roomId),this.editTenantStartDate.set(e.startDate||""),this.editTenantEndDate.set(e.endDate||""),this.editTenantRentCollectionDay.set(e.rentCollectionDay),this.editTenantNotes.set(e.notes||"")}closeEditModal(){this.selectedTenantForEdit.set(null),this.editTenantName.set(""),this.editTenantEmail.set(""),this.editTenantPhone.set(""),this.editTenantRoomId.set(""),this.editTenantStartDate.set(""),this.editTenantEndDate.set(""),this.editTenantRentCollectionDay.set(void 0),this.editTenantNotes.set("")}saveEdit(){let e=this.selectedTenantForEdit();if(!e)return;let t=this.editTenantName().trim(),r=this.editTenantRoomId();if(t&&r){let i=this.editTenantRentCollectionDay();this.tenantUpdated.emit({id:e.id,updates:{name:t,email:this.editTenantEmail().trim()||void 0,phone:this.editTenantPhone().trim()||void 0,roomId:r,startDate:this.editTenantStartDate()||void 0,endDate:this.editTenantEndDate()||void 0,rentCollectionDay:i&&i>=1&&i<=31?i:void 0,notes:this.editTenantNotes().trim()||void 0}}),this.closeEditModal()}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-tenant-list"]],inputs:{tenants:[1,"tenants"],rooms:[1,"rooms"]},outputs:{tenantAdded:"tenantAdded",tenantUpdated:"tenantUpdated",tenantRemoved:"tenantRemoved",tenantOccupancyToggled:"tenantOccupancyToggled"},decls:10,vars:4,consts:[[1,"section-header"],[1,"btn-add-small",3,"click"],[1,"add-form"],[1,"empty-list"],[1,"tenants-table-wrapper"],[3,"tenant"],[1,"modal-backdrop"],["type","text","placeholder","Tenant name","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email (optional)",3,"ngModelChange","ngModel"],["type","tel","placeholder","Phone (optional)",3,"ngModelChange","ngModel"],["required","",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"date-inputs"],["type","date","placeholder","Start date (optional)",3,"ngModelChange","ngModel"],["type","date","placeholder","End date (optional)",3,"ngModelChange","ngModel"],["type","number","placeholder","Rent collection day (1-31, optional)","min","1","max","31",3,"ngModelChange","ngModel"],["placeholder","Notes (optional)","rows","3",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"],[1,"tenants-table"],["type","text",1,"inline-edit","tenant-name",3,"blur","keydown.enter","value"],[1,"tenant-room"],[1,"tenant-email"],[1,"text-muted"],["target","_blank","rel","noopener noreferrer",1,"tenant-phone","phone-link",3,"href"],[1,"tenant-date"],[1,"tenant-notes",3,"title"],[1,"table-actions"],["title","Edit Tenant",1,"btn-edit",3,"click"],["title","Edit Presence",1,"btn-calendar"],["title","Delete",1,"btn-delete",3,"click"],["target","_blank","rel","noopener noreferrer",1,"tenant-phone","phone-link",3,"click","href"],["title","Edit Presence",1,"btn-calendar",3,"click"],[3,"close","dateToggled","tenant"],[1,"modal-backdrop",3,"click"],[1,"modal-content","edit-modal",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[1,"edit-form"],[1,"form-group"],[1,"form-row"],["type","date",3,"ngModelChange","ngModel"],["type","number","placeholder","Day of month (1-31)","min","1","max","31",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"h3"),E(2,"Tenants"),_(),v(3,"button",1),$("click",function(){return r.showAddForm.set(!0)}),E(4,"+ Add Tenant"),_()(),ue(5,Oj,19,8,"div",2)(6,kj,2,0,"p",3)(7,Kj,23,0,"div",4)(8,Qj,1,1,"app-tenant-calendar-modal",5)(9,Zj,51,8,"div",6)),t&2&&(R(5),ee(r.showAddForm()?5:-1),R(),ee(r.tenants().length===0?6:7),R(2),ee(r.selectedTenantForCalendar()?8:-1),R(),ee(r.selectedTenantForEdit()?9:-1))},dependencies:[Ht,wh,bh,$t,Cr,Ms,un,r_,Er,n_,Jt,Ph],styles:[".section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:var(--spacing-sm)}.modal-backdrop[_ngcontent-%COMP%]{padding:max(var(--spacing-md),env(safe-area-inset-top)) max(var(--spacing-md),env(safe-area-inset-right)) max(var(--spacing-md),env(safe-area-inset-bottom)) max(var(--spacing-md),env(safe-area-inset-left))}.edit-modal[_ngcontent-%COMP%]{max-height:90dvh}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:44px}}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-primary);font-size:1rem;font-weight:600;margin:0}.btn-add-small[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-md);background:transparent;color:var(--color-primary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-add-small[_ngcontent-%COMP%]:hover{background:var(--color-primary-lighter);background-opacity:.1;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]{background:var(--color-bg-secondary);border:1px solid var(--color-primary-light);border-radius:var(--border-radius-lg);padding:var(--spacing-md);margin-bottom:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary)}.add-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .add-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--color-text-tertiary)}.date-inputs[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-sm)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);justify-content:flex-end}.btn-confirm[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);background:var(--color-primary);color:#fff;font-size:.85rem;font-weight:600;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:.85rem;font-weight:500;font-family:inherit;cursor:pointer;transition:all .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:var(--color-border-light);color:var(--color-text-primary)}.empty-list[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-size:.9rem;text-align:center;padding:var(--spacing-md);margin:0}.tenants-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);-webkit-overflow-scrolling:touch}.tenants-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.tenants-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-bg-secondary)}.tenants-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:left;font-size:.875rem;font-weight:600;color:var(--color-text-primary);border-bottom:2px solid var(--color-border)}.tenants-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--spacing-md);border-bottom:1px solid var(--color-border);font-size:.9rem;color:var(--color-text-primary)}.tenants-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary)}.tenants-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.tenant-name[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;color:var(--color-text-primary);font-size:.9rem;font-weight:600;font-family:inherit;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius-sm);width:100%;min-width:120px;transition:all .2s ease}.tenant-name[_ngcontent-%COMP%]:hover{border-color:var(--color-border);background:var(--color-bg-secondary)}.tenant-name[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);background:var(--color-card-bg)}.tenant-room[_ngcontent-%COMP%]{font-weight:500;color:var(--color-primary)}.tenant-email[_ngcontent-%COMP%]{color:var(--color-text-secondary)}.phone-link[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;cursor:pointer;transition:all .2s ease}.phone-link[_ngcontent-%COMP%]:hover{color:var(--color-primary-dark);text-decoration:underline}.tenant-date[_ngcontent-%COMP%]{color:var(--color-text-secondary);font-size:.85rem}.tenant-notes[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-secondary);font-style:italic;max-width:200px}.text-muted[_ngcontent-%COMP%]{color:var(--color-text-tertiary);font-style:italic}.table-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs);align-items:center}.btn-edit[_ngcontent-%COMP%], .btn-calendar[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-sm);background:transparent;color:var(--color-text-tertiary);font-size:1rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover{background:#10b9811a;color:var(--color-success)}.btn-calendar[_ngcontent-%COMP%]:hover{background:#2563eb1a;color:var(--color-primary)}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef44441a;color:var(--color-error)}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:var(--spacing-lg)}.edit-modal[_ngcontent-%COMP%]{background:var(--color-card-bg);border-radius:var(--border-radius-lg);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:600px;width:100%;max-height:90vh;overflow-y:auto}.edit-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.edit-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.edit-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:var(--border-radius-md);background:transparent;color:var(--color-text-secondary);font-size:1.2rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.edit-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.edit-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text-primary)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-md)}"],changeDetection:0})}};function Jj(n,e){n&1&&(v(0,"div",3)(1,"div",5),E(2,"\u{1F465}"),_(),v(3,"h3"),E(4,"No apartment selected"),_(),v(5,"p"),E(6,"Select an apartment from the dropdown above to manage tenants"),_()())}function Xj(n,e){if(n&1){let t=Se();v(0,"div",4)(1,"app-tenant-list",6),$("tenantAdded",function(i){U(t);let o=P();return B(o.onTenantAdded(i))})("tenantUpdated",function(i){U(t);let o=P();return B(o.onTenantUpdated(i))})("tenantRemoved",function(i){U(t);let o=P();return B(o.onTenantRemoved(i))})("tenantOccupancyToggled",function(i){U(t);let o=P();return B(o.onOccupancyToggle(i))}),_()()}if(n&2){let t=P();R(),ie("tenants",t.currentApartment().tenants)("rooms",t.currentApartment().rooms)}}var Oh=class n{constructor(){this.apartmentService=k(Mt);this.currentApartment=this.apartmentService.currentApartment}onTenantAdded(e){let t=this.currentApartment();t&&this.apartmentService.addTenant(t.id,e)}onTenantUpdated(e){let t=this.currentApartment();t&&this.apartmentService.updateTenant(t.id,e.id,e.updates)}onTenantRemoved(e){let t=this.currentApartment();t&&this.apartmentService.removeTenant(t.id,e)}onOccupancyToggle(e){let t=this.currentApartment();t&&this.apartmentService.toggleTenantOccupancyDate(t.id,e.id,e.date,e.disabled)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-tenants"]],decls:8,vars:2,consts:[[1,"tenants-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"tenants-content"],[1,"empty-icon"],[3,"tenantAdded","tenantUpdated","tenantRemoved","tenantOccupancyToggled","tenants","rooms"]],template:function(t,r){if(t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),E(3,"Tenants"),_(),v(4,"p",2),E(5),_()(),ue(6,Jj,7,0,"div",3)(7,Xj,2,2,"div",4),_()),t&2){let i;R(5),St("Manage tenants for ",((i=r.currentApartment())==null?null:i.name)||"selected apartment",""),R(),ee(r.currentApartment()?7:6)}},dependencies:[Nh],styles:[".tenants-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.tenants-content[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.tenants-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"],changeDetection:0})}};var eU=(n,e)=>e.tenant.id;function tU(n,e){n&1&&(v(0,"div",3)(1,"div",5),E(2,"\u{1F4B0}"),_(),v(3,"h3"),E(4,"No apartment selected"),_(),v(5,"p"),E(6,"Select an apartment from the dropdown above to calculate bills"),_()())}function nU(n,e){n&1&&(v(0,"p",20),E(1,"No tenants with presence in this period"),_())}function rU(n,e){if(n&1&&(v(0,"div",22)(1,"div",23)(2,"span",24),E(3),_(),v(4,"span",25),E(5),_()(),v(6,"div",26),E(7),_()()),n&2){let t=e.$implicit,r=P(4);R(3),Ae(t.tenant.name),R(2),wi("",t.days," day",t.days!==1?"s":"",""),R(2),St(" ",r.formatCurrency(t.amount)," ")}}function iU(n,e){if(n&1&&(v(0,"div",21),It(1,rU,8,4,"div",22,eU),_()),n&2){let t=P(3);R(),Tt(t.tenantBills())}}function oU(n,e){if(n&1&&(v(0,"div",14)(1,"div",15)(2,"h3"),E(3,"Summary"),_(),v(4,"div",16)(5,"span",17),E(6,"Total Days of Presence:"),_(),v(7,"span",18),E(8),_()(),v(9,"div",16)(10,"span",17),E(11,"Cost per Day:"),_(),v(12,"span",18),E(13),_()(),v(14,"div",16)(15,"span",17),E(16,"Bill Total:"),_(),v(17,"span",18),E(18),_()()(),v(19,"div",19)(20,"h3"),E(21,"Tenant Breakdown"),_(),ue(22,nU,2,0,"p",20)(23,iU,3,0,"div",21),_()()),n&2){let t=P(2);R(8),Ae(t.totalDaysOfPresence()),R(5),Ae(t.formatCurrency(t.costPerDay())),R(5),Ae(t.formatCurrency(t.billTotal())),R(4),ee(t.tenantBills().length===0?22:23)}}function sU(n,e){if(n&1){let t=Se();v(0,"div",4)(1,"div",6)(2,"div",7)(3,"label",8),E(4,"Bill Total (AED)"),_(),v(5,"input",9),De("ngModelChange",function(i){U(t);let o=P();return Re(o.billTotal,i)||(o.billTotal=i),B(i)}),_()(),v(6,"div",7)(7,"label",10),E(8,"Start Date"),_(),v(9,"input",11),De("ngModelChange",function(i){U(t);let o=P();return Re(o.startDate,i)||(o.startDate=i),B(i)}),_()(),v(10,"div",7)(11,"label",12),E(12,"End Date"),_(),v(13,"input",13),De("ngModelChange",function(i){U(t);let o=P();return Re(o.endDate,i)||(o.endDate=i),B(i)}),_()()(),ue(14,oU,24,4,"div",14),_()}if(n&2){let t=P();R(5),xe("ngModel",t.billTotal),R(4),xe("ngModel",t.startDate),R(4),xe("ngModel",t.endDate),R(),ee(t.billTotal()>0&&t.startDate()&&t.endDate()?14:-1)}}var kh=class n{constructor(){this.apartmentService=k(Mt);this.currentApartment=this.apartmentService.currentApartment;this.today=new Date;this.billTotal=K(0);this.startDate=K("");this.endDate=K("");this.totalDaysOfPresence=Qt(()=>{let e=this.currentApartment();if(!e)return 0;let t=this.parseDate(this.startDate()),r=this.parseDate(this.endDate());if(!t||!r||r<t)return 0;let i=0;for(let o of e.tenants)i+=this.calculateTenantPresenceDays(o,t,r);return i});this.costPerDay=Qt(()=>{let e=this.totalDaysOfPresence(),t=this.billTotal();return e===0||t===0?0:t/e});this.tenantBills=Qt(()=>{let e=this.currentApartment();if(!e)return[];let t=this.parseDate(this.startDate()),r=this.parseDate(this.endDate());if(!t||!r||r<t)return[];let i=this.costPerDay(),o=[];for(let s of e.tenants){let c=this.calculateTenantPresenceDays(s,t,r);c>0&&o.push({tenant:s,days:c,amount:c*i})}return o.sort((s,c)=>c.amount-s.amount)});this.thirtyDaysAgo=new Date(this.today),this.thirtyDaysAgo.setDate(this.thirtyDaysAgo.getDate()-30),this.startDate.set(this.formatDateInput(this.thirtyDaysAgo)),this.endDate.set(this.formatDateInput(this.today))}calculateTenantPresenceDays(e,t,r){let i=e.startDate?new Date(e.startDate):null,o=e.endDate?new Date(e.endDate):null,s=i&&i>t?i:t,c=o&&o<r?o:r;if(s>c)return 0;let l=new Set(e.disabledDates||[]),u=0,h=new Date(s);for(;h<=c;){let p=this.formatDate(h);l.has(p)||u++,h.setDate(h.getDate()+1)}return u}formatCurrency(e){return new Intl.NumberFormat("en-AE",{style:"currency",currency:"AED",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}formatDateInput(e){return e.toISOString().split("T")[0]}parseDate(e){return e?new Date(e+"T00:00:00"):null}formatDate(e){return e.toISOString().split("T")[0]}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-bill-calculator"]],decls:8,vars:1,consts:[[1,"bill-calculator-page"],[1,"page-header"],[1,"page-subtitle"],[1,"empty-state"],[1,"bill-calculator-content"],[1,"empty-icon"],[1,"calculator-form"],[1,"form-group"],["for","billTotal"],["type","number","id","billTotal","placeholder","0.00","step","0.01","min","0",3,"ngModelChange","ngModel"],["for","startDate"],["type","date","id","startDate",3,"ngModelChange","ngModel"],["for","endDate"],["type","date","id","endDate",3,"ngModelChange","ngModel"],[1,"calculation-results"],[1,"summary-card"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"tenants-list"],[1,"no-tenants"],[1,"tenant-bills"],[1,"tenant-bill-item"],[1,"tenant-info"],[1,"tenant-name"],[1,"tenant-days"],[1,"tenant-amount"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),E(3,"Bill Calculator"),_(),v(4,"p",2),E(5,"Calculate bill distribution based on tenant occupancy"),_()(),ue(6,tU,7,0,"div",3)(7,sU,15,4,"div",4),_()),t&2&&(R(6),ee(r.currentApartment()?7:6))},dependencies:[Ht,$t,Cr,un,Er,Jt],styles:[".bill-calculator-page[_ngcontent-%COMP%]{padding:var(--spacing-xl);min-height:100%}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.page-subtitle[_ngcontent-%COMP%]{color:var(--color-text-secondary);margin:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-2xl) var(--spacing-xl);color:var(--color-text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-secondary)}.bill-calculator-content[_ngcontent-%COMP%]{max-width:800px}.calculator-form[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg);margin-bottom:var(--spacing-xl)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:var(--color-text-primary);margin-bottom:var(--spacing-xs)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-border);border-radius:var(--border-radius-md);background:var(--color-card-bg);color:var(--color-text-primary);font-size:.9rem;font-family:inherit;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.calculation-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg)}.summary-card[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg)}.summary-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-md) 0}.summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) 0;border-bottom:1px solid var(--color-border)}.summary-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--color-text-secondary)}.summary-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text-primary)}.tenants-list[_ngcontent-%COMP%]{background:var(--color-card-bg);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);padding:var(--spacing-lg)}.tenants-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-md) 0}.no-tenants[_ngcontent-%COMP%]{color:var(--color-text-secondary);text-align:center;padding:var(--spacing-md);margin:0}.tenant-bills[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.tenant-bill-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--border-radius-md)}.tenant-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.tenant-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--color-text-primary)}.tenant-days[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-secondary)}.tenant-amount[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:var(--color-primary)}@media (max-width: 768px){.bill-calculator-page[_ngcontent-%COMP%]{padding:var(--spacing-md);padding-left:max(var(--spacing-md),env(safe-area-inset-left));padding-right:max(var(--spacing-md),env(safe-area-inset-right))}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-height:44px}}"],changeDetection:0})}};var Vh=class n{ngOnInit(){let e=typeof window<"u"?window.location.search:"",t=`${bx}://localhost${e||""}`;typeof window<"u"&&(window.location.href=t)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=ge({type:n,selectors:[["app-oauth-redirect"]],decls:3,vars:0,consts:[[1,"oauth-redirect"]],template:function(t,r){t&1&&(v(0,"div",0)(1,"p"),E(2,"Redirecting to app\u2026"),_()())},styles:[".oauth-redirect[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;font-family:inherit;color:var(--color-text-secondary)}"],changeDetection:0})}};var zx=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"oauth-redirect",component:Vh},{path:"dashboard",component:Sh},{path:"expenses",component:Dh},{path:"rooms",component:Ah},{path:"tenants",component:Oh},{path:"bill-calculator",component:kh},{path:"**",redirectTo:"/dashboard"}];ni.isNativePlatform()&&Dc.addListener("backButton",({canGoBack:n})=>{n?window.history.back():Dc.exitApp()});Qm(Ih,{providers:[wg(zx)]}).catch(n=>console.error(n));
